System.register("chunks:///_virtual/Card.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,r,i,n,l,o,a,u,c,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){l=e.cclegacy,o=e._decorator,a=e.SpriteFrame,u=e.Sprite,c=e.Color,p=e.Component}],execute:function(){var b,g,s,f,y,m,d,h,v,w,z,C,k,F,_,D,P,R,S;l._RF.push({},"3494003ET5PObCfR+pvg0eu","Card",void 0);var B=o.ccclass,L=o.property;e("Card",(b=B("Card"),g=L({type:Boolean}),s=L({type:Number}),f=L({type:a}),y=L({type:a}),m=L({type:a}),d=L({type:a}),h=L({type:a}),v=L({type:a}),b((C=t((z=function(e){function t(){for(var t,r=arguments.length,l=new Array(r),o=0;o<r;o++)l[o]=arguments[o];return t=e.call.apply(e,[this].concat(l))||this,i(t,"clickable",C,n(t)),i(t,"val",k,n(t)),i(t,"bg1",F,n(t)),i(t,"bg2",_,n(t)),i(t,"bg3",D,n(t)),i(t,"bg4",P,n(t)),i(t,"bg5",R,n(t)),i(t,"bg6",S,n(t)),t}r(t,e);var l=t.prototype;return l.start=function(){this.node.getComponent(u).spriteFrame=this["bg"+this.val]},l.update=function(){this.node.getComponent(u).color=this.clickable?new c(255,255,255,255):new c(150,137,137,255)},t}(p)).prototype,"clickable",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),k=t(z.prototype,"val",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),F=t(z.prototype,"bg1",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=t(z.prototype,"bg2",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=t(z.prototype,"bg3",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=t(z.prototype,"bg4",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=t(z.prototype,"bg5",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=t(z.prototype,"bg6",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=z))||w));l._RF.pop()}}}));

System.register("chunks:///_virtual/Dialog.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,n,i,o,r,a,l,s,c,p;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,a=t._decorator,l=t.Label,s=t.tween,c=t.Vec3,p=t.Component}],execute:function(){var u,g,h,d,f,y,b;r._RF.push({},"b2874Bsk2dFIKJlkC51tSpY","Dialog",void 0);var m=a.ccclass,v=a.property;t("Dialog",(u=m("Dialog"),g=v({type:String}),h=v({type:String}),u((y=e((f=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,i(e,"content",y,o(e)),i(e,"title",b,o(e)),e}n(e,t);var r=e.prototype;return r.start=function(){this.node.getChildByName("Title").getComponent(l).string=this.title+"",this.node.getChildByName("Content").getComponent(l).string=this.content+"",s(this.node).to(.5,{scale:new c(1,1,1),position:new c(0,0,0)}).start()},r.close=function(){this.node.parent.removeChild(this.node)},e}(p)).prototype,"content",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"默认文字"}}),b=e(f.prototype,"title",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"默认标题"}}),d=f))||d));r._RF.pop()}}}));

System.register("chunks:///_virtual/Door.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var o,n,e,r,i,s;return{setters:[function(t){o=t.inheritsLoose},function(t){n=t.cclegacy,e=t._decorator,r=t.tween,i=t.Vec3,s=t.Component}],execute:function(){var c;n._RF.push({},"379beeB/0dByp9ddwTfcZmo","Door",void 0);var a=e.ccclass;e.property,t("Door",a("Door")(c=function(t){function n(){for(var o,n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];return(o=t.call.apply(t,[this].concat(e))||this).time=.5,o.isOpen=!1,o}o(n,t);var e=n.prototype;return e.closeDoor=function(){var t=this;r(this.node).to(this.time,{position:new i(0,0,0)}).call((function(){t.isOpen=!1})).start()},e.openDoor=function(){var t=this;r(this.node).to(this.time,{position:new i(720,0,0)}).call((function(){t.isOpen=!0})).start()},n}(s))||c);n._RF.pop()}}}));

System.register("chunks:///_virtual/Game.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Card.ts","./Door.ts"],(function(t){"use strict";var n,e,i,a,o,r,s,l,c,d,h,u,x,C,p,f;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.inheritsLoose,i=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){o=t.cclegacy,r=t._decorator,s=t.Prefab,l=t.Node,c=t.instantiate,d=t.Vec3,h=t.tween,u=t.Input,x=t.Animation,C=t.Component},function(t){p=t.Card},function(t){f=t.Door}],execute:function(){var m,v,g,b,y,k,P,w,T,I,A,S,V;o._RF.push({},"72849rpgN5NR4Ee5R15xkmr","Game",void 0);var E=r.ccclass,G=r.property;t("Game",(m=E("Game"),v=G({type:s}),g=G({type:s}),b=G({type:l}),y=G({type:s}),k=G({type:l}),m((T=n((w=function(t){function n(){for(var n,e=arguments.length,o=new Array(e),r=0;r<e;r++)o[r]=arguments[r];return n=t.call.apply(t,[this].concat(o))||this,i(n,"door",T,a(n)),n.doorInstance=null,i(n,"dialog",I,a(n)),i(n,"container",A,a(n)),i(n,"cardPrefab",S,a(n)),i(n,"box",V,a(n)),n.allCardsValue=[],n.lastCard=null,n.cardsContainer=[],n.total=30,n.totalCardType=6,n.gameStatus=0,n.boxPostion=[{x:-275.3,t:0},{x:-165.10000000000002,t:0},{x:-54.90000000000002,t:0},{x:55.29999999999998,t:0},{x:165.5,t:0},{x:275.7,t:0}],n.allCards=[],n.mapPostion=[{x:-278.8,t:249.59999999999997},{x:-233.8,t:249.59999999999997},{x:-188.8,t:249.59999999999997},{x:-143.8,t:249.59999999999997},{x:-98.80000000000001,t:249.59999999999997},{x:-53.80000000000001,t:249.59999999999997},{x:-8.800000000000011,t:249.59999999999997},{x:36.19999999999999,t:249.59999999999997},{x:81.19999999999999,t:249.59999999999997},{x:126.19999999999999,t:249.59999999999997},{x:171.2,t:249.59999999999997},{x:216.2,t:249.59999999999997},{x:261.2,t:249.59999999999997},{x:-278.8,t:131.49999999999997},{x:-233.8,t:131.49999999999997},{x:-188.8,t:131.49999999999997},{x:-143.8,t:131.49999999999997},{x:-98.80000000000001,t:131.49999999999997},{x:-53.80000000000001,t:131.49999999999997},{x:-8.800000000000011,t:131.49999999999997},{x:36.19999999999999,t:131.49999999999997},{x:81.19999999999999,t:131.49999999999997},{x:126.19999999999999,t:131.49999999999997},{x:171.2,t:131.49999999999997},{x:216.2,t:131.49999999999997},{x:261.2,t:131.49999999999997},{x:-278.8,t:13.399999999999977},{x:-233.8,t:13.399999999999977},{x:-188.8,t:13.399999999999977},{x:-143.8,t:13.399999999999977},{x:-98.80000000000001,t:13.399999999999977},{x:-53.80000000000001,t:13.399999999999977},{x:-8.800000000000011,t:13.399999999999977},{x:36.19999999999999,t:13.399999999999977},{x:81.19999999999999,t:13.399999999999977},{x:126.19999999999999,t:13.399999999999977},{x:171.2,t:13.399999999999977},{x:216.2,t:13.399999999999977},{x:261.2,t:13.399999999999977},{x:-278.8,t:-104.69999999999999},{x:-233.8,t:-104.69999999999999},{x:-188.8,t:-104.69999999999999},{x:-143.8,t:-104.69999999999999},{x:-98.80000000000001,t:-104.69999999999999},{x:-53.80000000000001,t:-104.69999999999999},{x:-8.800000000000011,t:-104.69999999999999},{x:36.19999999999999,t:-104.69999999999999},{x:81.19999999999999,t:-104.69999999999999},{x:126.19999999999999,t:-104.69999999999999},{x:171.2,t:-104.69999999999999},{x:216.2,t:-104.69999999999999},{x:261.2,t:-104.69999999999999},{x:-278.8,t:-222.79999999999995},{x:-233.8,t:-222.79999999999995},{x:-188.8,t:-222.79999999999995},{x:-143.8,t:-222.79999999999995},{x:-98.80000000000001,t:-222.79999999999995},{x:-53.80000000000001,t:-222.79999999999995},{x:-8.800000000000011,t:-222.79999999999995},{x:36.19999999999999,t:-222.79999999999995},{x:81.19999999999999,t:-222.79999999999995},{x:126.19999999999999,t:-222.79999999999995},{x:171.2,t:-222.79999999999995},{x:216.2,t:-222.79999999999995},{x:261.2,t:-222.79999999999995}],n}e(n,t);var o=n.prototype;return o.initGame=function(t){var n=this;t||(this.cardsContainer=[],this.box.destroyAllChildren(),this.box.removeAllChildren()),this.allCardsValue=[],this.allCards=[],this.container.destroyAllChildren(),this.container.removeAllChildren();var e=t?t.length:this.total,i=this.getRandomNum(0,this.mapPostion.length,e);(i=i.sort((function(t,n){return t-n}))).forEach((function(e,a){var o=c(n.cardPrefab),r=o.getComponent(p),s=t?t[a]:Math.floor(Math.random()*n.totalCardType+1);r.val=s,r.clickable=!(i.indexOf(e+1)>-1&&(e+1)%13!=0),n.allCardsValue.push(r.val),n.container.addChild(o),n.allCards.push({index:e,ele:o}),o.setPosition(new d(0,0,0)),h(o).to(Math.random(),{position:new d(n.mapPostion[e].x,n.mapPostion[e].t,0)}).call((function(){o.setPosition(new d(n.mapPostion[e].x,n.mapPostion[e].t,0)),o.on(u.EventType.TOUCH_START,n.cardClick,n)})).start()}))},o.getRandomNum=function(t,n,e){for(var i=[],a=0;a<e;a++){var o=Math.floor(Math.random()*(n-t)+t);-1==i.indexOf(o)?i.push(o):a--}return i},o.clickableCheck=function(t,n){var e=t.position.x,i=t.position.y,a=this.mapPostion.findIndex((function(t){return t.x===e&&t.t===i})),o=this.allCards.find((function(t){return t.index===a}));if(a>-1&&o){var r=this.allCards.findIndex((function(t){return t.index===o.index}));(r-1>=0&&this.allCards[r-1].index===o.index-1||1==a)&&(this.allCards[r-1].ele.getComponent(p).clickable=!n)}},o.start=function(){var t=c(this.door);this.doorInstance=t,this.node.addChild(t),this.node.getComponent(x).play()},o.update=function(){var t=this.doorInstance.getComponent(f),n=t.isOpen;1===this.gameStatus&&6===this.cardsContainer.length?(this.message("游戏结束","所有栏位已经占满"),t.isOpen=!1,t.closeDoor(),this.gameStatus=0):0===this.gameStatus&&n&&(this.initGame(),this.gameStatus=1)},o.cardClick=function(t){var n=t.currentTarget,e=n.getComponent("Card");if(this.lastCard={position:{x:n.position.x,t:n.position.y},value:e.val,containerIndex:0},this.cardsContainer.length<6&&e.clickable){for(var i=0;i<this.allCardsValue.length;i++)if(this.allCardsValue[i]===e.val){this.allCardsValue.splice(i,1);break}this.clickableCheck(n),e.clickable=!1,this.groupCheck(e,n)}},o.moveCard=function(t,n,e){t.setPosition(new d(n.x,n.y,0)),"function"==typeof e&&e()},o.groupCheck=function(t,n){for(var e=this,i=this.cardsContainer,a=i.find((function(n){return n.getComponent(p).val===t.val})),o=a?i.indexOf(a):0,r=i.length-1;r>=o;r--){var s=i[r],l=this.boxPostion[r+1];this.cardsContainer[r+1]=s,this.moveCard(s,new d(l.x,l.t,0),(function(){}))}var c=this.boxPostion[o];this.cardsContainer[o]=n,this.lastCard.containerIndex=o,this.moveCard(n,new d(c.x,c.t,0),(function(){e.box.addChild(n),e.resultCheck()}))},o.resultCheck=function(){var t=this,n=this.cardsContainer,e=[];n.forEach((function(n,i){var a=n.getComponent(p);e.length?e[e.length-1].key===a.val?e.push({key:a.val,Component:n,index:i}):e=[{key:a.val,Component:n,index:i}]:e.push({key:a.val,Component:n,index:i}),3===e.length&&(e.forEach((function(n){h(n.Component).to(.1,{position:new d(e[1].Component.position.x,e[1].Component.position.y,0)}).call((function(){t.box.removeChild(n.Component)})).start(),t.cardsContainer[n.index]=null})),t.cardsContainer=t.cardsContainer.filter((function(t){return null!==t})),e=[],t.cardsContainer.forEach((function(n,e){var i=t.boxPostion[e];t.moveCard(n,new d(i.x,i.y,0))})),t.lastCard=null)}))},o.message=function(t,n){var e=c(this.dialog),i=e.getComponent("Dialog");i.title=t,i.content=n,this.node.addChild(e)},o.lastStep=function(){var t=this;if(null===this.lastCard)this.message("小提示","没有上一步可以回退");else{var n=c(this.cardPrefab);n.getComponent(p).val=this.lastCard.value,this.allCardsValue.push(this.lastCard.value),n.getComponent(p).clickable=!0,n.on(u.EventType.TOUCH_START,this.cardClick,this),this.container.addChild(n),n.setPosition(new d(this.lastCard.position.x,this.lastCard.position.t,0)),this.clickableCheck(n,!0),this.cardsContainer[this.lastCard.containerIndex].destroy(),this.cardsContainer[this.lastCard.containerIndex]=null,this.cardsContainer=this.cardsContainer.filter((function(t){return null!==t})),this.cardsContainer.length||(this.box.destroyAllChildren(),this.box.removeAllChildren()),this.cardsContainer.forEach((function(n,e){var i=t.boxPostion[e];t.moveCard(n,new d(i.x,i.y,0))})),this.lastCard=null}},o.randomCards=function(){this.allCardsValue.length&&1===this.gameStatus?this.initGame(this.allCardsValue):this.message("小提示","暂时不可使用随机棋盘")},o.quitGame=function(){this.message("小提示","功能正在完善中...")},n}(C)).prototype,"door",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=n(w.prototype,"dialog",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=n(w.prototype,"container",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=n(w.prototype,"cardPrefab",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=n(w.prototype,"box",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=w))||P));o._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./Card.ts","./Dialog.ts","./Door.ts","./Game.ts"],(function(){"use strict";return{setters:[null,null,null,null],execute:function(){}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});