System.register("chunks:///_virtual/playerRigid.ts",["cc","./constant.ts","./clientEvent.ts","./util.ts","./gameManager.ts"],(function(i){"use strict";var t,e,n,o,r,a,l,s,c,u,d;return{setters:[function(i){t=i.cclegacy,e=i._decorator,n=i.Vec3,o=i.RigidBodyComponent,r=i.ColliderComponent,a=i.EPSILON,l=i.Component},function(i){s=i.constant},function(i){c=i.clientEvent},function(i){u=i.util},function(i){d=i.GameManager}],execute:function(){var h,p,_,g,f,y;function v(i,t,e,n){e&&Object.defineProperty(i,t,{enumerable:e.enumerable,configurable:e.configurable,writable:e.writable,value:e.initializer?e.initializer.call(n):void 0})}function m(i,t){for(var e=0;e<t.length;e++){var n=t[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(i,n.key,n)}}function E(i){if(void 0===i)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function S(i,t,e,n,o){var r={};return Object.keys(n).forEach((function(i){r[i]=n[i]})),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=e.slice().reverse().reduce((function(e,n){return n(i,t,e)||e}),r),o&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(o):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(i,t,r),r=null),r}function b(i,t,e){return t in i?Object.defineProperty(i,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):i[t]=e,i}t._RF.push({},"06d2eupY/dABrnDjohIgYfj","playerRigid",void 0);var C=e.ccclass,P=e.property,T=new n,N=function(){function i(){b(this,"point",new n),b(this,"normal",new n)}return i.prototype.assign=function(i,t){return i.isBodyA?(i.getWorldNormalOnB(this.normal),i.getWorldPointOnA(this.point)):(i.getWorldNormalOnA(this.normal),i.getWorldPointOnB(this.point)),this.collider=t,this},i}(),O=[],w=function(){function i(){}return i.getContacts=function(i,t,e){for(var n=0;n<i.length;n++)e.push(this.getContact(i[n],t))},i.getContact=function(i,t){return(O.length>0?O.pop():new N).assign(i,t)},i.recyContacts=function(i){var t;(t=Array.prototype.push).call.apply(t,[O].concat(i)),i.length=0},i}();i("PlayerRigid",C("PlayerRigid")((_=S((p=function(i){var t,e;function l(){for(var t,e=arguments.length,o=new Array(e),r=0;r<e;r++)o[r]=arguments[r];return v(E(t=i.call.apply(i,[this].concat(o))||this),"maxSpeed",_,E(t)),v(E(t),"damping",g,E(t)),v(E(t),"slopeLimit",f,E(t)),v(E(t),"gravity",y,E(t)),b(E(t),"_rigidBody",null),b(E(t),"_collider",null),b(E(t),"_grounded",!0),b(E(t),"_toSteep",!1),b(E(t),"_contacts",[]),b(E(t),"_groundContact",null),b(E(t),"_groundNormal",n.UP.clone()),b(E(t),"_initTargetPosition",new n),b(E(t),"_initCameraPosition",new n),b(E(t),"_altitudeDiff",0),b(E(t),"_velocity",new n),b(E(t),"_curMaxSpeed",0),b(E(t),"_invincibleSpeed",0),b(E(t),"_spineRoadSpeed",0),t}e=i,(t=l).prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e;var h,p,S,C=l.prototype;return C.onEnable=function(){c.on(s.EVENT_TYPE.CHANGE_TO_INVINCIBLE_SPEED,this._changeToInvincibleSpeed,this),c.on(s.EVENT_TYPE.RECOVERY_ORI_SPEED,this._recoveryOriSpeed,this),c.on(s.EVENT_TYPE.CHANGE_TO_SPINE_SPEED,this._changeToSpineSpeed,this)},C.onDisable=function(){c.off(s.EVENT_TYPE.CHANGE_TO_INVINCIBLE_SPEED,this._changeToInvincibleSpeed,this),c.off(s.EVENT_TYPE.RECOVERY_ORI_SPEED,this._recoveryOriSpeed,this),c.off(s.EVENT_TYPE.CHANGE_TO_SPINE_SPEED,this._changeToSpineSpeed,this)},C.start=function(){this._rigidBody=this.getComponent(o),this._collider=this.getComponent(r),this._collider.on("onCollisionEnter",this._onCollision,this),this._collider.on("onCollisionStay",this._onCollision,this),this._collider.on("onCollisionExit",this._onCollision,this),this._initTargetPosition=this.node.getPosition(),this._curMaxSpeed=this.maxSpeed,this._invincibleSpeed=1.3*this.maxSpeed,this._spineRoadSpeed=.7*this.maxSpeed},C.move=function(i,t){if(d.isArriveEndLine){var e=u.lerp(1,this._curMaxSpeed,.015);e=Number(e.toFixed(3)),this._curMaxSpeed=e}this._rigidBody.getLinearVelocity(T),n.scaleAndAdd(T,T,i,t);var o=this._curMaxSpeed;T.lengthSqr()>o&&(T.normalize(),T.multiplyScalar(o)),this._rigidBody.setLinearVelocity(T)},C.updateFunction=function(i){!d.isGameStart||d.isGameOver||d.isGamePause||(this._updateContactInfo(),this._applyGravity(),this._applyDamping(),this._saveState())},C._applyDamping=function(i){void 0===i&&(i=1/s.GAME_FRAME),this._rigidBody.getLinearVelocity(T),T.lengthSqr()>a&&(T.multiplyScalar(Math.pow(1-this.damping,i)),this._rigidBody.setLinearVelocity(T))},C._applyGravity=function(){var i=this.gravity,t=this._rigidBody.mass;T.set(0,t*i,0),this._rigidBody.applyForce(T)},C._saveState=function(){this._rigidBody.getLinearVelocity(this._velocity)},C._updateContactInfo=function(){this._grounded=!1,this._groundContact=null;for(var i=this.node.worldPosition,t=-.001,e=0;e<this._contacts.length;e++){var o=this._contacts[e],r=o.normal,a=o.point;r.y<=1e-4||r.y>t&&a.y>i.y-.1&&(this._grounded=!0,t=r.y,this._groundContact=o)}this._grounded?(n.copy(this._groundNormal,this._groundContact.normal),this._toSteep=this._groundContact.normal.y<=Math.cos(this.slopeLimit*Math.PI/180)):(n.copy(this._groundNormal,n.UP),this._toSteep=!1),w.recyContacts(this._contacts)},C._onCollision=function(i){var t=i.selfCollider.node.getPosition().y-this._initTargetPosition.y;this._altitudeDiff=t,t=this._initCameraPosition.y+3*Math.sin(t);this._initCameraPosition.z,Math.cos(t);w.getContacts(i.contacts,i.selfCollider,this._contacts)},C._recoveryOriSpeed=function(){this._curMaxSpeed=this.maxSpeed},C._changeToInvincibleSpeed=function(){this._curMaxSpeed=this._invincibleSpeed},C._changeToSpineSpeed=function(){this._curMaxSpeed=this._spineRoadSpeed},h=l,(p=[{key:"velocity",get:function(){return this._velocity}},{key:"onGround",get:function(){return this._grounded}}])&&m(h.prototype,p),S&&m(h,S),l}(l)).prototype,"maxSpeed",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),g=S(p.prototype,"damping",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),f=S(p.prototype,"slopeLimit",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 30}}),y=S(p.prototype,"gravity",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-20}}),h=p))||h);t._RF.pop()}}}));

System.register("chunks:///_virtual/verticalRaycast.ts",["cc"],(function(e){"use strict";var t,i,r,n,o,a,c,l,s;return{setters:[function(e){t=e.cclegacy,i=e._decorator,r=e.geometry,n=e.physics,o=e.director,a=e.Director,c=e.Vec3,l=e.PhysicsSystem,s=e.Component}],execute:function(){var u,y,p,f,v;function b(e,t,i,r){i&&Object.defineProperty(e,t,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(r):void 0})}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}t._RF.push({},"0bee9ZF+0xGBYvUyQdNwUAq","verticalRaycast",void 0);var h=i.ccclass,g=i.property,w=r.Ray.create(0,0,0,0,-1,0);e("VerticalRaycast",(u=h("VerticalRaycast"),y=g({type:n.PhysicsGroup}),u((v=function(e,t,i,r,n){var o={};return Object.keys(r).forEach((function(e){o[e]=r[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=i.slice().reverse().reduce((function(i,r){return r(e,t,i)||i}),o),n&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(n):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}((f=function(e){var t,i;function r(){for(var t,i=arguments.length,r=new Array(i),n=0;n<i;n++)r[n]=arguments[n];return b(d(t=e.call.apply(e,[this].concat(r))||this),"group",v,d(t)),t}i=e,(t=r).prototype=Object.create(i.prototype),t.prototype.constructor=t,t.__proto__=i;var n=r.prototype;return n.start=function(){o.on(a.EVENT_AFTER_PHYSICS,this.raycast,this)},n.raycast=function(){var e=this.node.worldPosition,t=e.y;c.copy(w.o,e),w.o.y+=1,l.instance.raycastClosest(w,this.group,1.2)&&(t=l.instance.raycastClosestResult.hitPoint.y),w.o.y=t,this.node.worldPosition=w.o},r}(s)).prototype,"group",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),p=f))||p));t._RF.pop()}}}));

System.register("chunks:///_virtual/localConfig.ts",["cc","./resourceUtil.ts","./csvManager.ts"],(function(n){"use strict";var r,t,e,a,i;return{setters:[function(n){r=n.cclegacy,t=n._decorator,e=n.resources},function(n){a=n.resourceUtil},function(n){i=n.CSVManager}],execute:function(){var c,s,o;function u(n,r){for(var t=0;t<r.length;t++){var e=r[t];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(n,e.key,e)}}function l(n,r,t){return r in n?Object.defineProperty(n,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[r]=t,n}r._RF.push({},"12facSZhFRGIYa7yxiLVDOp","localConfig",void 0);var f=t.ccclass;t.property,n("localConfig",f("localConfig")((o=s=function(){function n(){l(this,"csvManager",void 0),l(this,"arrCars",void 0),l(this,"_callback",null),l(this,"_skills",{}),l(this,"currentLoad",0),l(this,"cntLoad",0),l(this,"servers",[])}var r,t,c,s=n.prototype;return s.loadConfig=function(n){this._callback=n,this.csvManager=new i,this.loadCSV()},s.loadCSV=function(){var n=this;e.loadDir("datas",(function(r,t){r||(n.cntLoad=t.length,t.forEach((function(r,t,e){a.getData(r.name,(function(t,e){n.csvManager.addTable(r.name,e),n.tryToCallbackOnFinished()}))})))}))},s.queryOne=function(n,r,t){return this.csvManager.queryOne(n,r,t)},s.queryByID=function(n,r){return this.csvManager.queryByID(n,r)},s.getTable=function(n){return this.csvManager.getTable(n)},s.getTableArr=function(n){return this.csvManager.getTableArr(n)},s.getCars=function(){if(this.arrCars)return this.arrCars;var r=n.instance.getTableArr("car");return this.arrCars=r.sort((function(n,r){return n.sort-r.sort})),this.arrCars},s.queryAll=function(n,r,t){return this.csvManager.queryAll(n,r,t)},s.queryIn=function(n,r,t){return this.csvManager.queryIn(n,r,t)},s.queryByCondition=function(n,r){return this.csvManager.queryByCondition(n,r)},s.tryToCallbackOnFinished=function(){this._callback&&(this.currentLoad++,this.currentLoad>=this.cntLoad&&this._callback())},s.getCurrentServer=function(){return this.servers[0]},s.getVersion=function(){var n=this.getCurrentServer();return n?n.version:"unknown"},r=n,c=[{key:"instance",get:function(){return this._instance||(this._instance=new n),this._instance}}],(t=null)&&u(r.prototype,t),c&&u(r,c),n}(),l(s,"_instance",void 0),c=o))||c);r._RF.pop()}}}));

System.register("chunks:///_virtual/tips.ts",["cc","./util.ts","./poolManager.ts"],(function(t){"use strict";var e,i,n,o,r,a,l,s,c,u,p,f,b,h;return{setters:[function(t){e=t.cclegacy,i=t._decorator,n=t.Color,o=t.Vec3,r=t.LabelComponent,a=t.SpriteComponent,l=t.UIOpacityComponent,s=t.SpriteFrame,c=t.UITransformComponent,u=t.isValid,p=t.tween,f=t.Component},function(t){b=t.util},function(t){h=t.poolManager}],execute:function(){var d,g,y,m,v,w,z,I,O,B,T,C,U,_,j;function F(t,e,i,n){i&&Object.defineProperty(t,e,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(n):void 0})}function S(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function E(t,e,i,n,o){var r={};return Object.keys(n).forEach((function(t){r[t]=n[t]})),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=i.slice().reverse().reduce((function(i,n){return n(t,e,i)||i}),r),o&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(o):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(t,e,r),r=null),r}e._RF.push({},"1c3cekj+EtPapETa4j4p7JC","tips",void 0);var N=i.ccclass,P=i.property,k=new n(214,132,53,255),G=new n(255,255,255,255),H=new o(0,230,0);t("tips",(d=N("tips"),g=P(r),y=P(a),m=P(a),v=P(l),w=P(s),z=P(s),d((B=E((O=function(t){var e,i;function n(){for(var e,i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return F(S(e=t.call.apply(t,[this].concat(n))||this),"lbTips",B,S(e)),F(S(e),"spIcon",T,S(e)),F(S(e),"spBg",C,S(e)),F(S(e),"UIOpacityBg",U,S(e)),F(S(e),"sfGold",_,S(e)),F(S(e),"sfHeart",j,S(e)),e}i=t,(e=n).prototype=Object.create(i.prototype),e.prototype.constructor=e,e.__proto__=i;var r=n.prototype;return r.start=function(){},r.show=function(t,e,i,n,r){var a,l,s,f=this;void 0===r&&(r=function(){}),this.node.setScale(new o(n,n,n));var d=null===(a=this.lbTips)||void 0===a||null===(l=a.node)||void 0===l||null===(s=l.getComponent(c))||void 0===s?void 0:s.contentSize;u(d)?(this.lbTips.string=t,this.lbTips.color=k,"gold"===e||"heart"===e?(this.spBg.enabled=!1,this.UIOpacityBg.opacity=50,"gold"===e?this.spIcon.spriteFrame=this.sfGold:"heart"===e&&(this.spIcon.spriteFrame=this.sfHeart),this.lbTips.color=G,this.lbTips.string=b.formatValue(Number(t)),p(this.node).to(1.2,{scale:new o(n,n,n)},{easing:"smooth"}).start(),p(this.UIOpacityBg).to(.8,{opacity:255},{easing:"smooth"}).to(.4,{opacity:0},{easing:"smooth"}).call((function(){r&&r(),h.instance.putNode(f.node)})).start()):(this.spBg.enabled=!0,this.UIOpacityBg.opacity=255,this.node.setPosition(i),this.spIcon.node.active=!1,this.scheduleOnce((function(){p(f.node).to(1.1,{position:H},{easing:"smooth"}).call((function(){r&&r(),h.instance.putNode(f.node)})).start(),p(f.UIOpacityBg).to(.7,{opacity:220},{easing:"smooth"}).to(.4,{opacity:0},{easing:"smooth"}).call((function(){})).start()}),.8))):h.instance.putNode(this.node)},n}(f)).prototype,"lbTips",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=E(O.prototype,"spIcon",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=E(O.prototype,"spBg",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=E(O.prototype,"UIOpacityBg",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=E(O.prototype,"sfGold",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=E(O.prototype,"sfHeart",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=O))||I));e._RF.pop()}}}));

System.register("chunks:///_virtual/debugLevelItem.ts",["cc","./constant.ts","./clientEvent.ts","./playerData.ts","./uiManager.ts","./gameLogic.ts"],(function(e){"use strict";var t,n,i,r,a,o,l,c,u;return{setters:[function(e){t=e.cclegacy,n=e._decorator,i=e.LabelComponent,r=e.Component},function(e){a=e.constant},function(e){o=e.clientEvent},function(e){l=e.playerData},function(e){c=e.uiManager},function(e){u=e.GameLogic}],execute:function(){var s,b,f,v,p;function g(e,t,n,i){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}t._RF.push({},"1cca3We2mBMHb1+U22HEfn6","debugLevelItem",void 0);var m=n.ccclass,y=n.property;e("DebugLevelItem",(s=m("DebugLevelItem"),b=y(i),s((p=function(e,t,n,i,r){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=n.slice().reverse().reduce((function(n,i){return i(e,t,n)||n}),a),r&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(r):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}((v=function(e){var t,n;function i(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return g(d(t=e.call.apply(e,[this].concat(i))||this),"lbLevelTxt",p,d(t)),t}n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var r=i.prototype;return r.start=function(){},r.onBtnClick=function(){u.vibrateShort(),l.instance.playerInfo.level=Number(this.lbLevelTxt.string),o.dispatchEvent(a.EVENT_TYPE.ON_INIT_GAME),c.instance.hideDialog("debug/debugPanel"),c.instance.hideDialog("parkour/parkourPanel")},i}(r)).prototype,"lbLevelTxt",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=v))||f));t._RF.pop()}}}));

System.register("chunks:///_virtual/settlementSuccessPanel.ts",["cc","./constant.ts","./clientEvent.ts","./util.ts","./resourceUtil.ts","./localConfig.ts","./playerData.ts","./poolManager.ts","./audioManager.ts","./uiManager.ts","./gameLogic.ts","./effectManager.ts","./gameManager.ts"],(function(e){"use strict";var t,i,n,r,o,a,l,s,u,c,d,p,h,b,_,m,g,f,S,D,w,y,E,R,M;return{setters:[function(e){t=e.cclegacy,i=e._decorator,n=e.Vec3,r=e.Node,o=e.LabelComponent,a=e.SpriteComponent,l=e.UITransformComponent,s=e.Prefab,u=e.SpriteFrame,c=e.AnimationComponent,d=e.size,p=e.find,h=e.Component},function(e){b=e.constant},function(e){_=e.clientEvent},function(e){m=e.util},function(e){g=e.resourceUtil},function(e){f=e.localConfig},function(e){S=e.playerData},function(e){D=e.poolManager},function(e){w=e.AudioManager},function(e){y=e.uiManager},function(e){E=e.GameLogic},function(e){R=e.EffectManager},function(e){M=e.GameManager}],execute:function(){var P,I,v,N,A,T,B,O,x,z,k,L,C,U,Y,G,K,H,W,F,V,j,X,q,J,Q,Z,$,ee,te,ie,ne,re,oe,ae,le,se,ue,ce,de,pe,he,be,_e,me,ge,fe,Se,De,we,ye,Ee,Re,Me,Pe,Ie,ve;function Ne(e,t,i,n){i&&Object.defineProperty(e,t,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(n):void 0})}function Ae(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Te(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function Be(e,t,i,n,r){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=i.slice().reverse().reduce((function(i,n){return n(e,t,i)||i}),o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}t._RF.push({},"263787qKRpISIJ5Xla6M/7j","settlementSuccessPanel",void 0);var Oe=i.ccclass,xe=i.property,ze=new n(0,-.3,-5),ke=new n(20,0,0),Le=new n,Ce=new n(0,0,-15),Ue=new n(0,0,15);e("SettlementSuccessPanel",(P=Oe("SettlementSuccessPanel"),I=xe(r),v=xe(r),N=xe(r),A=xe(o),T=xe(o),B=xe(o),O=xe(r),x=xe(r),z=xe(r),k=xe(a),L=xe(o),C=xe(o),U=xe(o),Y=xe(r),G=xe(a),K=xe(l),H=xe(o),W=xe(r),F=xe(s),V=xe(r),j=xe(r),X=xe(r),q=xe(a),J=xe(u),Q=xe(u),Z=xe(o),$=xe(c),P((ie=Be((te=function(e){var t,i;function n(){for(var t,i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return Ne(Ae(t=e.call.apply(e,[this].concat(n))||this),"ndPeople",ie,Ae(t)),Ne(Ae(t),"ndDiamond",ne,Ae(t)),Ne(Ae(t),"ndMultiple",re,Ae(t)),Ne(Ae(t),"lbPeople",oe,Ae(t)),Ne(Ae(t),"lbDiamond",ae,Ae(t)),Ne(Ae(t),"lbMultiple",le,Ae(t)),Ne(Ae(t),"ndList",se,Ae(t)),Ne(Ae(t),"ndBtnNormal",ue,Ae(t)),Ne(Ae(t),"ndBtnDouble",ce,Ae(t)),Ne(Ae(t),"spIcon",de,Ae(t)),Ne(Ae(t),"lbDiamondNormal",pe,Ae(t)),Ne(Ae(t),"lbDiamondDouble",he,Ae(t)),Ne(Ae(t),"lbBtnMultiple",be,Ae(t)),Ne(Ae(t),"ndArrow",_e,Ae(t)),Ne(Ae(t),"spSkinIcon",me,Ae(t)),Ne(Ae(t),"UIComImgGray",ge,Ae(t)),Ne(Ae(t),"lbSkinProgress",fe,Ae(t)),Ne(Ae(t),"ndSkin",Se,Ae(t)),Ne(Ae(t),"pbBoxDiamond",De,Ae(t)),Ne(Ae(t),"ndLottery",we,Ae(t)),Ne(Ae(t),"ndBoxContent",ye,Ae(t)),Ne(Ae(t),"ndReward",Ee,Ae(t)),Ne(Ae(t),"spRewardIcon",Re,Ae(t)),Ne(Ae(t),"sfKey",Me,Ae(t)),Ne(Ae(t),"sfDiamond",Pe,Ae(t)),Ne(Ae(t),"lbRewardNum",Ie,Ae(t)),Ne(Ae(t),"aniLottery",ve,Ae(t)),Te(Ae(t),"_scriptGameManager",null),Te(Ae(t),"_curDiamond",0),Te(Ae(t),"_curPeople",0),Te(Ae(t),"_curMultiple",0),Te(Ae(t),"_rewardDiamond",10),Te(Ae(t),"_diamondMultiple",0),Te(Ae(t),"_boxRewardType",0),Te(Ae(t),"_ndBoxReward",null),Te(Ae(t),"_isStopArrow",!1),Te(Ae(t),"_randomSkin",void 0),Te(Ae(t),"_hatProgress",null),t}i=e,(t=n).prototype=Object.create(i.prototype),t.prototype.constructor=t,t.__proto__=i;var r=n.prototype;return r.start=function(){},r.show=function(e){var t=this;w.instance.playSound(b.AUDIO_SOUND.WIN),this._scriptGameManager=e,this._curDiamond=0,this._curMultiple=0,this._curPeople=0,this._isStopArrow=!1,this._boxRewardType=b.REWARD_TYPE.DIAMOND,this._hatProgress=null,this.ndList.active=!0,this.ndSkin.active=!1,this.ndLottery.active=!0,this.ndReward.active=!1,this.spRewardIcon.node.active=!1,this.schedule(this._numRaise,.05),this.aniLottery.getState("lottery").time=0,this.aniLottery.getState("lottery").sample(),this._rewardDiamond=(e.people+e.diamond)*e.multiple,M.gameType===b.GAME_TYPE.REWARD?(this._rewardDiamond=e.diamond*e.multiple,this.ndPeople.active=!1):this.ndPeople.active=!0,this.lbDiamondNormal.string=String(Math.ceil(this._rewardDiamond)),this.lbDiamondDouble.string=String(Math.ceil(this._rewardDiamond)),this.ndBtnDouble.active=!0,this.ndBtnNormal.active=!1,setTimeout((function(){t.node.active&&!t._isStopArrow&&(t.ndBtnNormal.active=!0)}),2e3),E.updatePayIcon(b.SHARE_ID.SETTLEMENT_SUCCESS_DOUBLE,this.spIcon,(function(e){b.OPEN_REWARD_TYPE.NULL}))},r._numRaise=function(){var e=this,t=this._scriptGameManager.diamond,i=this._scriptGameManager.multiple,n=this._scriptGameManager.people;this._curDiamond=Math.ceil(this._curDiamond+.3*(t-this._curDiamond)),this._curMultiple=this._curMultiple+.3*(i-this._curMultiple),this._curPeople=Math.ceil(this._curPeople+.3*(n-this._curPeople)),this.lbDiamond.string=String(this._curDiamond),this.lbMultiple.string=this._curMultiple-Math.floor(this._curMultiple)!=0?"x"+Number(this._curMultiple.toFixed(1)):"x"+Number(this._curMultiple.toFixed(1))+".0",this.lbPeople.string=String(this._curPeople),this._curDiamond===t&&Number(this._curMultiple.toFixed(1))===i&&this._curPeople===n&&(this.unschedule(this._numRaise),setTimeout((function(){e.ndList.active=!1,e._showSkinProgress()}),1e3))},r._showSkinProgress=function(){if(S.instance.isLevelHatUnlockOver())this.ndSkin.active=!1;else{this.ndSkin.active=!0,this._hatProgress=S.instance.getSetting(b.SETTINGS_KEY.LEVEL_HAT_PROGRESS);var e=f.instance.queryByID("shop",this._hatProgress.ID);g.setSpriteFrame("texture/icon/hats/"+e.iconName,this.spSkinIcon,(function(){})),this.lbSkinProgress.string=this._hatProgress.progress+"%",this.lbSkinProgress.node.active=!0;var t=this.UIComImgGray.contentSize;if(this.UIComImgGray.setContentSize(d(t.width,t.width*(1-.01*this._hatProgress.progress))),this._hatProgress.progress+=b.unlockHatSkinProgress,this._hatProgress.progress=this._hatProgress.progress>=100?100:this._hatProgress.progress,S.instance.setSetting(b.SETTINGS_KEY.LEVEL_HAT_PROGRESS,this._hatProgress),this.schedule(this._progressRaise,.1),this._hatProgress.progress>=100){var i=S.instance.getSetting(b.SETTINGS_KEY.LEVEL_HAT_PROGRESS),n=S.instance.getHatStatus(i.ID);n.status=b.SHOP_ITEM_STATUS.UNLOCKED_NOT_OWNED,S.instance.updateHatStatus(n)}}},r._progressRaise=function(){var e=m.lerp(this._hatProgress.progress,Number(this.lbSkinProgress.string.split("%")[0]),.15);if(Math.ceil(e)!==Number(this.lbSkinProgress.string)){w.instance.playSound(b.AUDIO_SOUND.NUM_RAISE),E.vibrateShort(),this.lbSkinProgress.string=Math.ceil(e)+"%";var t=this.UIComImgGray.contentSize;this.UIComImgGray.setContentSize(d(t.width,t.width*(1-.01*e)))}Math.ceil(e)===this._hatProgress.progress&&(this.unschedule(this._progressRaise),100===Math.ceil(e)&&(this.lbSkinProgress.node.active=!1))},r.onBtnNormalClick=function(){w.instance.playSound(b.AUDIO_SOUND.DIAMOND_RECEIVE),E.vibrateShort(),this._isStopArrow||(this.ndBtnDouble.active=!1,this.ndBtnNormal.active=!1,this._close())},r.onBtnDoubleClick=function(){var e=this;w.instance.playSound(b.AUDIO_SOUND.CLICK),E.vibrateShort(),this._isStopArrow||(this.ndBtnDouble.active=!1,this.ndBtnNormal.active=!1,E.pay(b.SHARE_ID.SETTLEMENT_SUCCESS_DOUBLE,(function(t){t||(w.instance.playSound(b.AUDIO_SOUND.DIAMOND_RECEIVE),e._isStopArrow=!0,e.aniLottery.play("lottery"),"??"===e.lbBtnMultiple.string?e._showBox():e._close())})))},r._showBox=function(){var e=this,t=Math.random();t>=0&&t<.3?this._boxRewardType=b.REWARD_TYPE.DIAMOND:t>=.3&&t<.7?this._boxRewardType=b.REWARD_TYPE.KEY:(this._boxRewardType=b.REWARD_TYPE.SKIN,S.instance.isBoxHatUnlockOver()?this._boxRewardType=b.REWARD_TYPE.DIAMOND:this._randomSkin=S.instance.getArrHatUnlockByBox()[0]);var i=p("Camera3D");this._ndBoxReward=D.instance.getNode(this.pbBoxDiamond,i),this._ndBoxReward.setPosition(ze),this._ndBoxReward.setScale(2,2,2),this._ndBoxReward.eulerAngles=ke;var n=this._ndBoxReward.getComponentInChildren(c);this.scheduleOnce((function(){w.instance.playSound(b.AUDIO_SOUND.REWARD_SMALL_BOX),n.play("boxOpen"),R.instance.playEffect(e._ndBoxReward,"box/boxOpen02",!0,!0,5,1,Le)}),.5),n.once(c.EventType.FINISHED,(function(){e.scheduleOnce((function(){if(e.ndReward.active=!0,e._boxRewardType===b.REWARD_TYPE.DIAMOND)e.spRewardIcon.spriteFrame=e.sfDiamond,e.lbRewardNum.string=String(Math.ceil(e._rewardDiamond*e._diamondMultiple));else if(e._boxRewardType===b.REWARD_TYPE.KEY)e.spRewardIcon.spriteFrame=e.sfKey,e.lbRewardNum.string="1";else if(e._boxRewardType===b.REWARD_TYPE.SKIN){var t="texture/icon/hats/"+f.instance.queryByID("shop",String(e._randomSkin.ID)).iconName;g.setSpriteFrame(t,e.spRewardIcon,(function(e){})),e.lbRewardNum.string="1"}e.spRewardIcon.node.active=!0,e._ndBoxReward.destroy(),e._close()}),1)}));var r=this._ndBoxReward.worldPosition;R.instance.playParticle("colorBar/colorBar01",r.clone().add3f(-1.5,-2.2,0),3,1.5,Ce),R.instance.playParticle("colorBar/colorBar01",r.clone().add3f(1.5,-2.2,0),3,1.5,Ue),w.instance.playSound(b.AUDIO_SOUND.FIRE)},r._close=function(){var e=this,t=Math.ceil(this._rewardDiamond*this._diamondMultiple);R.instance.showFlyReward(t,(function(){e.unscheduleAllCallbacks(),y.instance.hideDialog("settlement/settlementSuccessPanel");var t=function(){console.log("检查是否拥有3把钥匙,当前有几把：",S.instance.playerInfo.key),S.instance.playerInfo.key>=3?y.instance.showDialog("box/boxPanel"):_.dispatchEvent(b.EVENT_TYPE.CHECK_LEVEL_UNLOCK_HAT_SKIN)};e._boxRewardType===b.REWARD_TYPE.DIAMOND?t():e._boxRewardType===b.REWARD_TYPE.KEY?(S.instance.updatePlayerInfo("key",1),t()):e._boxRewardType===b.REWARD_TYPE.SKIN?y.instance.showDialog("skin/skinPanel",[b.SKIN_HAT_CHANEL.BOX_SETTLEMENT,b.SKIN_TYPE.HAT,e._randomSkin,function(){t()}]):t()}))},r.update=function(e){if(!this._isStopArrow){var t=this.ndArrow.eulerAngles.z;if(t>=54&&t<90)this._diamondMultiple=2,this.lbDiamondDouble.string=String(Math.ceil(this._rewardDiamond*this._diamondMultiple));else if(t>=18&&t<54)this._diamondMultiple=3,this.lbDiamondDouble.string=String(Math.ceil(this._rewardDiamond*this._diamondMultiple));else{if(t>=-18&&t<18)return this._diamondMultiple=2,this.lbBtnMultiple.string="??",void(this.lbDiamondDouble.string="???");t>=-54&&t<-18?(this._diamondMultiple=3,this.lbDiamondDouble.string=String(Math.ceil(this._rewardDiamond*this._diamondMultiple))):(this._diamondMultiple=2,this.lbDiamondDouble.string=String(Math.ceil(this._rewardDiamond*this._diamondMultiple)))}this.lbBtnMultiple.string="X"+this._diamondMultiple}},n}(h)).prototype,"ndPeople",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ne=Be(te.prototype,"ndDiamond",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),re=Be(te.prototype,"ndMultiple",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),oe=Be(te.prototype,"lbPeople",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ae=Be(te.prototype,"lbDiamond",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),le=Be(te.prototype,"lbMultiple",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),se=Be(te.prototype,"ndList",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ue=Be(te.prototype,"ndBtnNormal",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ce=Be(te.prototype,"ndBtnDouble",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),de=Be(te.prototype,"spIcon",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),pe=Be(te.prototype,"lbDiamondNormal",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),he=Be(te.prototype,"lbDiamondDouble",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),be=Be(te.prototype,"lbBtnMultiple",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_e=Be(te.prototype,"ndArrow",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),me=Be(te.prototype,"spSkinIcon",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ge=Be(te.prototype,"UIComImgGray",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),fe=Be(te.prototype,"lbSkinProgress",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Se=Be(te.prototype,"ndSkin",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),De=Be(te.prototype,"pbBoxDiamond",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),we=Be(te.prototype,"ndLottery",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ye=Be(te.prototype,"ndBoxContent",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ee=Be(te.prototype,"ndReward",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Re=Be(te.prototype,"spRewardIcon",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Me=Be(te.prototype,"sfKey",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Pe=Be(te.prototype,"sfDiamond",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ie=Be(te.prototype,"lbRewardNum",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ve=Be(te.prototype,"aniLottery",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ee=te))||ee));t._RF.pop()}}}));

System.register("chunks:///_virtual/debugPanel.ts",["cc","./constant.ts","./localConfig.ts","./storageManager.ts","./playerData.ts","./poolManager.ts","./uiManager.ts","./debugLevelItem.ts"],(function(e){"use strict";var n,t,i,a,o,r,l,c,s,u,f,p,g,b,d,v,h;return{setters:[function(e){n=e.cclegacy,t=e._decorator,i=e.Node,a=e.Prefab,o=e.SpriteComponent,r=e.Color,l=e.game,c=e.PhysicsSystem,s=e.profiler,u=e.Component},function(e){f=e.constant},function(e){p=e.localConfig},function(e){g=e.StorageManager},function(e){b=e.playerData},function(e){d=e.poolManager},function(e){v=e.uiManager},function(e){h=e.DebugLevelItem}],execute:function(){var m,y,w,C,E,_,S;function P(e,n,t,i){t&&Object.defineProperty(e,n,{enumerable:t.enumerable,configurable:t.configurable,writable:t.writable,value:t.initializer?t.initializer.call(i):void 0})}function T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function A(e,n,t,i,a){var o={};return Object.keys(i).forEach((function(e){o[e]=i[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=t.slice().reverse().reduce((function(t,i){return i(e,n,t)||t}),o),a&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(a):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,n,o),o=null),o}n._RF.push({},"2be6523odhOBpHGGn8NMbw1","debugPanel",void 0);var D=t.ccclass,M=t.property;e("DebugPanel",(m=D("DebugPanel"),y=M(i),w=M(a),m((_=A((E=function(e){var n,t;function i(){for(var n,t=arguments.length,i=new Array(t),a=0;a<t;a++)i[a]=arguments[a];return P(T(n=e.call.apply(e,[this].concat(i))||this),"ndContent",_,T(n)),P(T(n),"pbLevelItem",S,T(n)),n}t=e,(n=i).prototype=Object.create(t.prototype),n.prototype.constructor=n,n.__proto__=t;var a=i.prototype;return a.start=function(){},a.show=function(){this._initLevelView()},a._initLevelView=function(){var e=this,n=p.instance.getTableArr("map");this.ndContent.children.forEach((function(e){e.active=!1})),n.forEach((function(n,t,i){var a=null;(a=t<e.ndContent.children.length?e.ndContent.children[t]:d.instance.getNode(e.pbLevelItem,e.ndContent)).active=!0,a.getComponent(h).lbLevelTxt.string=String(t+1);var l=a.getComponent(o);n.type===f.GAME_TYPE.NORMAL?l.color=(new r).fromHEX("#E7A8E7"):n.type===f.GAME_TYPE.REWARD?l.color=(new r).fromHEX("#EBE08A"):n.type===f.GAME_TYPE.BOSS&&(l.color=(new r).fromHEX("#B1A5B1"))}))},a.onBtnCloseClick=function(){v.instance.hideDialog("debug/debugPanel")},a.onBtnClearStorageClick=function(){b.instance.playerInfo=null,b.instance.history=null,b.instance.settings=null,b.instance.saveAll(),g.instance.jsonData={},g.instance.save(),v.instance.showTips("游戏缓存已清除，请完全关闭游戏并重新打开！")},a.onToggleFrame30Click=function(){v.instance.showTips("游戏已经切换为30帧"),g.instance.setGlobalData("frameRate",30),l.setFrameRate(30),c.instance.fixedTimeStep=1/30,this._showState()},a.onToggleFrame60Click=function(){v.instance.showTips("游戏已经切换为60帧"),g.instance.setGlobalData("frameRate",60),l.setFrameRate(60),c.instance.fixedTimeStep=1/60,this._showState()},a._showState=function(){var e;!0===(null!==(e=g.instance.getGlobalData("debug"))&&void 0!==e&&e)?s.showStats():s.hideStats()},i}(u)).prototype,"ndContent",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=A(E.prototype,"pbLevelItem",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=E))||C));n._RF.pop()}}}));

System.register("chunks:///_virtual/playerRigidController.ts",["cc","./constant.ts","./clientEvent.ts","./gameManager.ts","./playerRigid.ts"],(function(t){"use strict";var e,i,r,n,a,o,s,c,l,u,h,f;return{setters:[function(t){e=t.cclegacy,i=t._decorator,r=t.Vec3,n=t.Quat,a=t.Node,o=t.ColliderComponent,s=t.clamp,c=t.Component},function(t){l=t.constant},function(t){u=t.clientEvent},function(t){h=t.GameManager},function(t){f=t.PlayerRigid}],execute:function(){var p,_,d,v,g,b,y,R,O,m;function E(t,e,i,r){i&&Object.defineProperty(t,e,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(r):void 0})}function w(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function z(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function C(t,e,i,r,n){var a={};return Object.keys(r).forEach((function(t){a[t]=r[t]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=i.slice().reverse().reduce((function(i,r){return r(t,e,i)||i}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(t,e,a),a=null),a}e._RF.push({},"2f138e18iREe4uU8zYyIZV6","playerRigidController",void 0);var X=i.ccclass,x=i.property,P=new r,M=new n;t("PlayerRigidController",(p=X("PlayerRigidController"),_=x({type:a}),d=x({type:a}),v=x({type:r}),p((y=C((b=function(t){var e,i;function r(){for(var e,i=arguments.length,r=new Array(i),n=0;n<i;n++)r[n]=arguments[n];return E(w(e=t.call.apply(t,[this].concat(r))||this),"currentOrient",y,w(e)),E(w(e),"targetOrient",R,w(e)),E(w(e),"rotateFactor",O,w(e)),E(w(e),"speed",m,w(e)),z(w(e),"_stateX",0),z(w(e),"_stateZ",0),z(w(e),"_speed",0),z(w(e),"_collider",null),z(w(e),"_character",null),z(w(e),"_oriCurrentRotation",null),z(w(e),"_oriTargetRotation",null),z(w(e),"_oldX",0),e}i=t,(e=r).prototype=Object.create(i.prototype),e.prototype.constructor=e,e.__proto__=i;var a=r.prototype;return a.onEnable=function(){u.on(l.EVENT_TYPE.ON_REVIVE,this._onRevive,this)},a.onDestroy=function(){u.off(l.EVENT_TYPE.ON_REVIVE,this._onRevive,this)},a.start=function(){this._collider=this.getComponent(o),this._character=this.node.getComponent(f),this._oriCurrentRotation||(this._oriCurrentRotation=this.currentOrient.getRotation(),this._oriTargetRotation=this.targetOrient.getRotation())},a._onRevive=function(){this.currentOrient.setRotation(this._oriCurrentRotation),this.targetOrient.setRotation(this._oriTargetRotation),this._stateX=0},a.touchStart=function(t){this._stateX=0},a.touchMove=function(t){var e=t.getUIDelta().x;this._stateX=e>0?this.speed.x:e<0?-this.speed.x:0,Math.abs(e-this._oldX)<=3?(this._stateX=0,this._oldX=0):this._oldX=e},a.touchEnd=function(t){this._stateX=0},a.touchCancel=function(t){this._stateX=0},a._updateCharacter=function(t){if(h.isGameStart&&!h.isGameOver&&!h.isGamePause){if(this._character.updateFunction(t),h.scriptPlayer.isStopMove)return;var e=this.currentOrient.rotation,i=this.targetOrient.rotation;if(n.equals(e,i)||(n.slerp(M,e,i,this.rotateFactor),this.currentOrient.worldRotation=M),h.isArriveEndLine&&(this.speed.x=0),this._stateZ=this.speed.z,!this._character.onGround)return;if(this._stateX||this._stateZ){P.set(this._stateX,0,this._stateZ),P.normalize(),P.negative(),this.targetOrient.forward=P,P.set(this.currentOrient.forward),P.negative();var r=this.currentOrient.rotation,a=this.targetOrient.rotation;s(this._rotationScalar(r,a),0,1);P.x=Math.abs(P.x)<1e-7?0:P.x,this._character.move(P,1)}}},a._rotationScalar=function(t,e){return Math.abs(t.x*e.x+t.y*e.y+t.z*e.z+t.w*e.w)},a.update=function(t){var e=1e3/l.GAME_FRAME;this._updateCharacter(e)},r}(c)).prototype,"currentOrient",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=C(b.prototype,"targetOrient",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=C(b.prototype,"rotateFactor",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.1}}),m=C(b.prototype,"speed",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new r(1,0,1)}}),g=b))||g));e._RF.pop()}}}));

System.register("chunks:///_virtual/eventListener.ts",["cc"],(function(t){"use strict";var e,n;return{setters:[function(t){e=t.cclegacy,n=t._decorator}],execute:function(){var r,s;e._RF.push({},"32ed24Iw8ZJwaEdiMAQBvLQ","eventListener",void 0);var i=n.ccclass,o=(n.property,i("oneToOneListener")(r=function(){function t(){var t,e,n;n=void 0,(e="supportEvent")in(t=this)?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,this.supportEvent=null}var e=t.prototype;return e.on=function(t,e,n){this[t]={handler:e,target:n}},e.off=function(t,e){var n=this[t];n&&n.handler&&n.handler===e&&(this[t]=null)},e.dispatchEvent=function(t){if(null===this.supportEvent||this.supportEvent.hasOwnProperty(t)){for(var e=this[t],n=[],r=1;r<arguments.length;r++)n.push(arguments[r]);e.handler?e.handler.apply(e.target,n):cc.log("not register "+t+"    callback func")}else cc.error("please add the event into clientEvent.js")},e.setSupportEventList=function(t){if(!(t instanceof Array))return cc.error("supportEvent was not array"),!1;for(var e in this.supportEvent={},t){var n=t[e];this.supportEvent[n]=e}return!0},t}())||r);t("eventListener",i("eventListener")(s=function(){function t(){}return t.getBaseClass=function(t){return o},t}())||s);e._RF.pop()}}}));

System.register("chunks:///_virtual/batchUtil.ts",["cc"],(function(e){"use strict";var t,i,n,r,a,c;return{setters:[function(e){t=e.cclegacy,i=e._decorator,n=e.Node,r=e.MeshRenderer,a=e.BatchingUtility,c=e.Component}],execute:function(){var o,l,u,h,s;function f(e,t,i,n){i&&Object.defineProperty(e,t,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(n):void 0})}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}t._RF.push({},"423e6cUn0hLkZnhwZVWsgaI","batchUtil",void 0);var b=i.ccclass,d=i.property;e("BatchUtil",(o=b("BatchUtil"),l=d([n]),o((s=function(e,t,i,n,r){var a={};return Object.keys(n).forEach((function(e){a[e]=n[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=i.slice().reverse().reduce((function(i,n){return n(e,t,i)||i}),a),r&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(r):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}((h=function(e){var t,i;function c(){for(var t,i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return f(p(t=e.call.apply(e,[this].concat(n))||this),"arrBatching",s,p(t)),t}i=e,(t=c).prototype=Object.create(i.prototype),t.prototype.constructor=t,t.__proto__=i;var o=c.prototype;return o.start=function(){},o.useBatch=function(){var e=this;this.arrBatching.forEach((function(t){if(t.children.length)if(t.getComponentsInChildren(r).length>=2){var i=new n,c=t.name+"Static";e.node.getChildByName(c)?i=e.node.getChildByName(c):(i.name=c,i.parent=e.node),a.batchStaticModel(t,i)}else console.warn("该节点下的字节点的所有mesh组件少于2个",t.name)}))},c}(c)).prototype,"arrBatching",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),u=h))||u));t._RF.pop()}}}));

System.register("chunks:///_virtual/migrate-canvas.ts",["cc"],(function(){"use strict";var e,n,t,i,r,o;return{setters:[function(a){e=a.cclegacy,n=a.director,t=a.Director,i=a.Canvas,r=a.Camera,o=a.game}],execute:function(){e._RF.push({},"4403eme8CVHMbAoN5Go9KCS","migrate-canvas",void 0);var a=1048575;function c(e,n){for(var t=0,i=e.children.length;t<i;t++)e.children[t].layer=n,c(e.children[t],n)}n.on(t.EVENT_AFTER_SCENE_LAUNCH,(function(){var e,t,l,s=null===(e=n.getScene())||void 0===e?void 0:e.children,v=null===(t=n.getScene())||void 0===t?void 0:t.getComponentsInChildren(i);if(!(v.length<=1)){v=v.filter((function(e){return!!e.cameraComponent}));var m=null===(l=n.getScene())||void 0===l?void 0:l.getComponentsInChildren(r),u=0;m.forEach((function(e){return u|=e.visibility&a}));for(var p=[],f=0,C=s.length;f<C;f++){var d=s[f];if(o.isPersistRootNode(d)){var h=d.getComponentsInChildren(i);0!==h.length&&p.push.apply(p,h.filter((function(e){return!!e.cameraComponent})))}}p.forEach((function(e){if(v.find((function(n){return n!==e&&n.cameraComponent.visibility&e.cameraComponent.visibility&a}))){var n=~u,t=n&~(n-1);e.cameraComponent.visibility=t|4293918720&e.cameraComponent.visibility,c(e.node,t),u|=n}}))}}));var l=cc.Node.prototype.setParent;function s(e){var n=null,t=e.getComponent(i);return t&&t.cameraComponent?n=t.cameraComponent.visibility&t.node.layer?t.node.layer:t.cameraComponent.visibility&~(t.cameraComponent.visibility-1):(e.parent&&(n=s(e.parent)),n)}cc.Node.prototype.setParent=function(e,n){if(l.call(this,e,n),e){var t=s(this);t&&(this.layer=t,c(this,t))}},e._RF.pop()}}}));

System.register("chunks:///_virtual/shoesItem.ts",["cc","./constant.ts","./clientEvent.ts","./resourceUtil.ts","./playerData.ts","./audioManager.ts","./gameLogic.ts"],(function(t){"use strict";var e,i,n,o,s,r,a,u,c,l,h,S,_,E;return{setters:[function(t){e=t.cclegacy,i=t._decorator,n=t.SpriteComponent,o=t.SpriteFrame,s=t.Node,r=t.LabelComponent,a=t.ButtonComponent,u=t.Component},function(t){c=t.constant},function(t){l=t.clientEvent},function(t){h=t.resourceUtil},function(t){S=t.playerData},function(t){_=t.AudioManager},function(t){E=t.GameLogic}],execute:function(){var b,f,p,T,I,m,d,v,P,O,y,H,g,M,N,U,j,w,D,z,A,k,F;function x(t,e,i,n){i&&Object.defineProperty(t,e,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(n):void 0})}function C(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Q(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function R(t,e,i,n,o){var s={};return Object.keys(n).forEach((function(t){s[t]=n[t]})),s.enumerable=!!s.enumerable,s.configurable=!!s.configurable,("value"in s||s.initializer)&&(s.writable=!0),s=i.slice().reverse().reduce((function(i,n){return n(t,e,i)||i}),s),o&&void 0!==s.initializer&&(s.value=s.initializer?s.initializer.call(o):void 0,s.initializer=void 0),void 0===s.initializer&&(Object.defineProperty(t,e,s),s=null),s}e._RF.push({},"48142P2OE9MB6ADx5KkY8we","shoesItem",void 0);var Y=i.ccclass,V=i.property;t("ShoesItem",(b=Y("ShoesItem"),f=V(n),p=V(o),T=V(o),I=V(s),m=V(s),d=V(n),v=V(s),P=V(n),O=V(r),y=V(a),b((M=R((g=function(t){var e,i;function n(){for(var e,i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return x(C(e=t.call.apply(t,[this].concat(n))||this),"spItemBg",M,C(e)),x(C(e),"sfWhite",N,C(e)),x(C(e),"sfGray",U,C(e)),x(C(e),"ndTick",j,C(e)),x(C(e),"ndSelect",w,C(e)),x(C(e),"spShoesIcon",D,C(e)),x(C(e),"ndPay",z,C(e)),x(C(e),"spPayIcon",A,C(e)),x(C(e),"lbTxt",k,C(e)),x(C(e),"btnItem",F,C(e)),Q(C(e),"_status",c.SHOP_ITEM_STATUS.LOCK),Q(C(e),"_itemInfo",void 0),Q(C(e),"_obj",void 0),e}i=t,(e=n).prototype=Object.create(i.prototype),e.prototype.constructor=e,e.__proto__=i;var o=n.prototype;return o.onEnable=function(){l.on(c.EVENT_TYPE.HIDE_SHOES_EQUIPMENT,this._hideShoesEquipment,this),l.on(c.EVENT_TYPE.REFRESH_SHOES_ITEM,this._refreshShoesItem,this)},o.onDisable=function(){l.off(c.EVENT_TYPE.HIDE_SHOES_EQUIPMENT,this._hideShoesEquipment,this),l.off(c.EVENT_TYPE.REFRESH_SHOES_ITEM,this._refreshShoesItem,this)},o.start=function(){},o.init=function(t){this._itemInfo=t,this._obj=S.instance.getShoesStatus(t.ID),this._status=this._obj.status;var e="texture/icon/shoes/"+t.iconName;switch(E.updatePayIcon(c.SHARE_ID.SHOP_SHOES,this.spPayIcon),this._obj.status){case c.SHOP_ITEM_STATUS.LOCK:this.spItemBg.spriteFrame=this.sfGray,this.ndSelect.active=!1,this.ndTick.active=!1,this.lbTxt.node.active=!0,this.lbTxt.string=this._obj.watchTimes+"/"+t.videoTimes,h.setSpriteFrame("texture/icon/shoes/111",this.spShoesIcon,(function(){}));break;case c.SHOP_ITEM_STATUS.OWNED:this.spItemBg.spriteFrame=this.sfWhite,this.ndSelect.active=!1,this.ndTick.active=!1,this.lbTxt.node.active=!1,h.setSpriteFrame(e,this.spShoesIcon,(function(){}));break;case c.SHOP_ITEM_STATUS.EQUIPMENT:this.spItemBg.spriteFrame=this.sfWhite,this.ndSelect.active=!0,this.ndTick.active=!0,this.lbTxt.node.active=!1,h.setSpriteFrame(e,this.spShoesIcon,(function(){}))}},o.onShoesItemClick=function(){var t=this;_.instance.playSound(c.AUDIO_SOUND.CLICK),E.vibrateShort(),this._status===c.SHOP_ITEM_STATUS.OWNED?(l.dispatchEvent(c.EVENT_TYPE.HIDE_SHOES_EQUIPMENT),this._obj.status=c.SHOP_ITEM_STATUS.EQUIPMENT,S.instance.updateShoesStatus(this._obj),this.init(this._itemInfo),l.dispatchEvent(c.EVENT_TYPE.EQUIPMENT_SHOES)):this._status===c.SHOP_ITEM_STATUS.LOCK?this._obj.watchTimes<this._itemInfo.videoTimes&&E.pay(c.SHARE_ID.SHOP_SHOES,(function(e){e||(t._obj.watchTimes+=1,t._obj.watchTimes>=t._itemInfo.videoTimes?(l.dispatchEvent(c.EVENT_TYPE.HIDE_SHOES_EQUIPMENT),t._obj.status=c.SHOP_ITEM_STATUS.EQUIPMENT,S.instance.updateShoesStatus(t._obj),t.init(t._itemInfo),l.dispatchEvent(c.EVENT_TYPE.EQUIPMENT_SHOES)):(S.instance.updateShoesStatus(t._obj),t.init(t._itemInfo)))})):(this._status,c.SHOP_ITEM_STATUS.OWNED)},o._hideShoesEquipment=function(){this._status===c.SHOP_ITEM_STATUS.EQUIPMENT&&(this._obj.status=c.SHOP_ITEM_STATUS.OWNED,S.instance.updateShoesStatus(this._obj),this.init(this._itemInfo))},o._refreshShoesItem=function(t){t.ID===this._obj.ID&&(this._obj.status=t.status,S.instance.updateShoesStatus(this._obj),this.init(this._itemInfo))},n}(u)).prototype,"spItemBg",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=R(g.prototype,"sfWhite",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=R(g.prototype,"sfGray",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=R(g.prototype,"ndTick",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=R(g.prototype,"ndSelect",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=R(g.prototype,"spShoesIcon",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=R(g.prototype,"ndPay",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=R(g.prototype,"spPayIcon",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=R(g.prototype,"lbTxt",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=R(g.prototype,"btnItem",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=g))||H));e._RF.pop()}}}));

System.register("chunks:///_virtual/util.ts",["cc"],(function(r){"use strict";var t,e;return{setters:[function(r){t=r.cclegacy,e=r._decorator}],execute:function(){var n;t._RF.push({},"51238kLGAFBiLoz3gxcwxtH","util",void 0);var o=e.ccclass;e.property,r("util",o("util")(n=function(){function r(){}return r.clone=function(r){if(null===r||"object"!=typeof r)return r;var t={};for(var e in r.constructor===Array&&(t=[]),r)r.hasOwnProperty(e)&&(t[e]=this.clone(r[e]));return t},r.objectToArray=function(r){var t=[];for(var e in r)r.hasOwnProperty(e)&&t.push(r[e]);return t},r.arrayToObject=function(r,t){var e={};for(var n in r)r.hasOwnProperty(n)&&r[n][t]&&(e[r[n][t]]=r[n]);return e},r.getWeightRandIndex=function(r,t){for(var e=Math.floor(Math.random()*t),n=0,o=0;o<r.length&&!(e<(n+=r[o]));o++);return o},r.getRandomNFromM=function(r,t){for(var e=[],n=0,o=0;o<t&&!(o>=r+1);){n=this.getRandomInt(0,r);for(var a=0,u=0;u<o;u++)if(e[u]===n){a=1;break}0===a&&(e[o]=n,o++)}return e},r.getRandomInt=function(r,t){var e=Math.random()*(t-r+1)+r;return Math.floor(e)},r.getStringLength=function(r){for(var t=r,e=0,n=0,o=t.length;n<o;n++){e+=t.charCodeAt(n)<=255?1:2}return Math.ceil(e/2)},r.isEmptyObject=function(r){var t=!0;if(r&&r.constructor===Object){for(var e in r)if(r.hasOwnProperty(e)){t=!1;break}}else t=!1;return t},r.formatNum=function(r){if(r<=0)return"0";var t=Math.round(Math.log(r)/Math.log(1e3));return parseInt((r/Math.pow(1e3,t-1<0?0:t-1)).toString(),10)+["","","K","M","B"][t]},r.isNewDay=function(r){var t=new Date(r),e=new Date,n=t.getYear(),o=t.getMonth(),a=t.getDate(),u=e.getYear(),f=e.getMonth(),i=e.getDate();return u>n||(f>o||i>a)},r.getPropertyCount=function(r){var t,e=0;for(t in r)r.hasOwnProperty(t)&&e++;return e},r.difference=function(r,t){var e=[];if(r.constructor!==Array||t.constructor!==Array)return e;for(var n=r.length,o=0;o<n;o++)-1===t.indexOf(r[o])&&e.push(r[o]);return e},r.base64encode=function(r){var t,e,n,o,a,u,f,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",c="",h=0;for(r=this.utf8Encode(r);h<r.length;)o=(t=r.charCodeAt(h++))>>2,a=(3&t)<<4|(e=r.charCodeAt(h++))>>4,u=(15&e)<<2|(n=r.charCodeAt(h++))>>6,f=63&n,isNaN(e)?u=f=64:isNaN(n)&&(f=64),c=c+i.charAt(o)+i.charAt(a)+i.charAt(u)+i.charAt(f);return c},r.utf8Encode=function(r){r=r.replace(/\r\n/g,"\n");for(var t="",e=0;e<r.length;e++){var n=r.charCodeAt(e);n<128?t+=String.fromCharCode(n):n>127&&n<2048?(t+=String.fromCharCode(n>>6|192),t+=String.fromCharCode(63&n|128)):(t+=String.fromCharCode(n>>12|224),t+=String.fromCharCode(n>>6&63|128),t+=String.fromCharCode(63&n|128))}return t},r.base64Decode=function(r){var t,e,n,o,a,u,f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",i="",c=0;for(r=r.replace(/[^A-Za-z0-9\+\/\=]/g,"");c<r.length;)t=f.indexOf(r.charAt(c++))<<2|(o=f.indexOf(r.charAt(c++)))>>4,e=(15&o)<<4|(a=f.indexOf(r.charAt(c++)))>>2,n=(3&a)<<6|(u=f.indexOf(r.charAt(c++))),i+=String.fromCharCode(t),64!=a&&(i+=String.fromCharCode(e)),64!=u&&(i+=String.fromCharCode(n));return i=this.utf8Decode(i)},r.utf8Decode=function(r){for(var t="",e=0,n=0,o=0,a=0;e<r.length;)(n=r.charCodeAt(e))<128?(t+=String.fromCharCode(n),e++):n>191&&n<224?(o=r.charCodeAt(e+1),t+=String.fromCharCode((31&n)<<6|63&o),e+=2):(o=r.charCodeAt(e+1),a=r.charCodeAt(e+2),t+=String.fromCharCode((15&n)<<12|(63&o)<<6|63&a),e+=3);return t},r.remove=function(r,t){var e=[],n=[];return r.forEach((function(r,o){t(r)&&(e.push(r),n.push(o))})),this.basePullAt(r,n),e},r.basePullAt=function(r,t){for(var e,n=r?t.length:0,o=n-1;n--;){var a=t[n];n!==o&&a===e||(e=a,Array.prototype.splice.call(r,a,1))}return r},r.stringToArray=function(r){var t,e="\\ufe0e\\ufe0f",n="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",o=RegExp("[\\u200d\\ud800-\\udfff"+n+e+"]"),a="\\ud83c[\\udffb-\\udfff]",u="[\\ufe0e\\ufe0f]?",f="["+n+"]",i="(?:"+f+"|"+a+")"+"?",c="[\\ud800-\\udfff]",h="[^\\ud800-\\udfff]",g="(?:\\ud83c[\\udde6-\\uddff]){2}",l="[\\ud800-\\udbff][\\udc00-\\udfff]",d=u+i+("(?:\\u200d(?:"+[h,g,l].join("|")+")"+u+i+")*"),s="(?:"+[h+f+"?",f,g,l,c].join("|")+")",v=RegExp(a+"(?="+a+")|"+s+d,"g");return t=r,o.test(t)?function(r){return r.match(v)||[]}(r):function(r){return r.split("")}(r)},r.simulationUUID=function(){function r(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return r()+r()+"-"+r()+"-"+r()+"-"+r()+"-"+r()+r()+r()},r.trim=function(r){return r.replace(/(^\s*)|(\s*$)/g,"")},r.isNowValid=function(r,t){var e=new Date(r),n=new Date(t),o=!1;if(e.getDate()+""!="NaN"&&n.getDate()+""!="NaN"){var a=new Date;o=a<n&&a>e}return o},r.getDeltaDays=function(r,t){r=new Date(r),t=new Date(t);var e=r.getFullYear(),n=r.getMonth()+1,o=r.getDate(),a=t.getFullYear(),u=t.getMonth()+1,f=t.getDate();r=new Date(e+"/"+n+"/"+o+" GMT+0800").getTime();var i=(t=new Date(a+"/"+u+"/"+f+" GMT+0800").getTime())-r;return Math.floor(i/864e5)},r.getMin=function(r){var t=null;if(r.constructor===Array)for(var e=r.length,n=0;n<e;n++)t=0===n?Number(r[0]):t>Number(r[n])?Number(r[n]):t;return t},r.formatTwoDigits=function(r){return(Array(2).join(0)+r).slice(-2)},r.formatDate=function(r,t){var e={"M+":r.getMonth()+1,"d+":r.getDate(),"h+":r.getHours(),"m+":r.getMinutes(),"s+":r.getSeconds(),"q+":Math.floor((r.getMonth()+3)/3),S:r.getMilliseconds()};for(var n in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(r.getFullYear()+"").substr(4-RegExp.$1.length))),e)new RegExp("("+n+")").test(t)&&(t=t.replace(RegExp.$1,1===RegExp.$1.length?e[n]:("00"+e[n]).substr((""+e[n]).length)));return t},r.getDay=function(){var r=new Date;return r.getFullYear()+"-"+(r.getMonth()+1)+"-"+r.getDate()},r.formatName=function(r,t){t=t||6;var e=this.stringToArray(r),n="";if(e.length>t){for(var o=0;o<t;o++)n+=e[o];n+="..."}else n=r;return n},r.formatMoney=function(r){for(var t=["","K","M","G","T","P","E","Z","Y","B","N","D"],e="",n=0;n<t.length;n++){if(!(r>=1e4)){e=Math.floor(r)+t[n];break}r/=1e3}return""===e&&(e=Math.floor(r)+"U"),e},r.formatValue=function(r){for(var t=[],e="",n=0;n<26;n++)t.push(String.fromCharCode(97+n));for(var o=0;o<t.length;o++){if(!(r>=1e4)){e=Math.floor(r)+t[o];break}r/=1e3}return e},r.formatTimeForSecond=function(r,t){void 0===t&&(t=!1);var e="",n=r%60,o=Math.floor(r/60);o=o<0?0:o;var a=Math.floor(o/60),u=o%60;return a>0?(e+=a>9?a.toString():"0"+a,e+=":"):e+="00:",e+=u>9?u.toString():"0"+u,t||(e+=":",e+=n>9?n.toString():"0"+n),e},r.formatTimeForMillisecond=function(r){var t=Math.floor(r/1e3%60),e=Math.floor(r/1e3/60%60);return{hour:Math.floor(r/1e3/60/60),minute:e,second:t}},r.zip=function(r){var t=pako.gzip(encodeURIComponent(r),{to:"string"});return this.base64encode(t)},r.unZip=function(r){var t=this.base64Decode(r),e=t.split("").map((function(r){return r.charCodeAt(0)})),n=new Uint8Array(e),o=pako.inflate(n);return t=String.fromCharCode.apply(null,new Uint16Array(o)),decodeURIComponent(t)},r.encrypt=function(r){var t=this.base64encode(r),e=6;t.length%2==0&&(e=7);for(var n="",o=0;o<(t.length-e+1)/2;o++)n+=t[2*o+1],n+=t[2*o];return n+=t.slice(t.length-e+1)},r.decrypt=function(r){var t=6;r.length%2==0&&(t=7);for(var e="",n=0;n<r.length-t;n+=2)e+=r[n+1],e+=r[n];return e+=r.slice(r.length-t+1),e=this.base64Decode(e)},r.rand=function(r){for(var t=this.clone(r),e=t.length-1;e>=0;e--){var n=Math.floor(Math.random()*(e+1)),o=t[n];t[n]=t[e],t[e]=o}return t},r.getOffsetMimutes=function(r,t){var e=t-r;return Math.floor(e%36e5/6e4)},r.formatNumToFixed=function(r,t){return void 0===t&&(t=0),Number(r.toFixed(t))},r.lerp=function(r,t,e){void 0===e&&(e=.25);var n=t;return r>t?n=t+(r-t)*e:r<t&&(n=t-(t-r)*e),n},r}())||n);t._RF.pop()}}}));

System.register("chunks:///_virtual/boss.ts",["cc","./constant.ts","./clientEvent.ts","./resourceUtil.ts","./poolManager.ts","./audioManager.ts","./effectManager.ts","./gameManager.ts"],(function(i){"use strict";var t,n,e,o,a,r,s,l,c,u,_,h,d,p,S,A,m;return{setters:[function(i){t=i.cclegacy,n=i._decorator,e=i.Vec3,o=i.SkeletalAnimationComponent,a=i.RigidBodyComponent,r=i.BoxColliderComponent,s=i.Node,l=i.AnimationClip,c=i.AnimationComponent,u=i.Component},function(i){_=i.constant},function(i){h=i.clientEvent},function(i){d=i.resourceUtil},function(i){p=i.poolManager},function(i){S=i.AudioManager},function(i){A=i.EffectManager},function(i){m=i.GameManager}],execute:function(){var f,g,C,y,b,O,k,v,P,T,E,N,B;function I(i,t,n,e){n&&Object.defineProperty(i,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(e):void 0})}function w(i){if(void 0===i)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function W(i,t,n){return t in i?Object.defineProperty(i,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):i[t]=n,i}function D(i,t,n,e,o){var a={};return Object.keys(e).forEach((function(i){a[i]=e[i]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=n.slice().reverse().reduce((function(n,e){return e(i,t,n)||n}),a),o&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(o):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(i,t,a),a=null),a}t._RF.push({},"523b8ZuIANDiLAYRM0CX+Qy","boss",void 0);var H=n.ccclass,U=n.property,L=new e,M=new e,R=new e(0,1,0),V=new e;i("Boss",(f=H("Boss"),g=U(o),C=U(a),y=U(r),b=U(s),O=U(s),f((P=D((v=function(i){var t,n;function a(){for(var t,n=arguments.length,e=new Array(n),o=0;o<n;o++)e[o]=arguments[o];return I(w(t=i.call.apply(i,[this].concat(e))||this),"aniCom",P,w(t)),I(w(t),"rigidCom",T,w(t)),I(w(t),"boxColliderCom",E,w(t)),I(w(t),"ndSocketHand",N,w(t)),I(w(t),"ndSocketHead",B,w(t)),W(w(t),"aniType",""),W(w(t),"isAniPlaying",!1),W(w(t),"isVertigo",!1),W(w(t),"isComa",!1),W(w(t),"isAttacking",!1),W(w(t),"isAngry",!1),W(w(t),"isLookAtPlayer",!1),W(w(t),"bossAttackTimes",0),W(w(t),"_ndWeapon",null),W(w(t),"_ndHornHat",null),W(w(t),"_attackCallback",null),W(w(t),"_aniState",null),W(w(t),"_aniComComa",null),W(w(t),"_curLookAtPos",null),W(w(t),"_colliderComWeapon",null),t}n=i,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var s=a.prototype;return s.onEnable=function(){},s.onDisable=function(){},s.start=function(){},s.init=function(){var i=this;this._ndWeapon?(this._colliderComWeapon=this._ndWeapon.getComponent(r),this._colliderComWeapon.isTrigger=!0,this._colliderComWeapon.enabled=!1):d.loadModelRes("weapon/mace").then((function(t){i._ndWeapon=p.instance.getNode(t,i.ndSocketHand),i._colliderComWeapon=i._ndWeapon.getComponent(r),i._colliderComWeapon.isTrigger=!0,i._colliderComWeapon.enabled=!1})),this._ndHornHat||d.loadModelRes("hat/hornHat").then((function(t){i._ndHornHat=p.instance.getNode(t,i.ndSocketHead)})),this.isLookAtPlayer=!1,this.playAni(_.BOSS_ANI_TYPE.BOSS_FIGHT_IDLE,!0),this.hideAniVertigo();var t=this.node.worldPosition.clone();V.set(0,1,t.z-1),this.node.lookAt(V,R),this._curLookAtPos=null,this.isAttacking=!1,this.isAngry=!1,this.isAniPlaying=!1,this.isComa=!1,this.isVertigo=!1},s.playAni=function(i,t,n){var e,a,r=this;void 0===t&&(t=!1),void 0===n&&(n=function(){}),this.aniType=i,this.aniCom||(this.aniCom=this.node.getComponent(o)),null===(e=this.aniCom)||void 0===e||e.crossFade(i),this.isAniPlaying=!0,this._aniState=null===(a=this.aniCom)||void 0===a?void 0:a.getState(i),this._aniState&&(this._aniState.wrapMode=t?l.WrapMode.Loop:l.WrapMode.Normal,i===_.BOSS_ANI_TYPE.BOSS_ATTACK?this._aniState.speed=1.5:this._aniState.speed=1),t||this.aniCom.once(o.EventType.FINISHED,(function(){r.isAniPlaying=!1,n&&n()}))},s.refreshAniAttackSpeed=function(){var i;this._aniState=null===(i=this.aniCom)||void 0===i?void 0:i.getState(_.BOSS_ANI_TYPE.BOSS_ATTACK),this._aniState&&(this._aniState.speed=m.gameSpeed)},s.playAniAttack=function(i){var t=this;this.isAttacking=!0,this._attackCallback=i,this.playAni(_.BOSS_ANI_TYPE.BOSS_ATTACK,!1,(function(){!t.isComa&&!t.isVertigo&&t.bossAttackTimes>1&&t.playAni(_.BOSS_ANI_TYPE.BOSS_FIGHT_IDLE,!0),t.isAttacking=!1,h.dispatchEvent(_.EVENT_TYPE.REFRESH_ATTACK_WOR_POS)}))},s.playAniAngry=function(i){var t=this;S.instance.playSound(_.AUDIO_SOUND.BOSS_ANGRY),this.hideAniVertigo(),this.isAngry=!0,this.playAni(_.BOSS_ANI_TYPE.BOSS_ANGRY,!1,(function(){})),A.instance.playEffect(this.node,"bossAngry/bossAngry",!1,!0,2,1,new e,new e,(function(){t.isAngry=!1,t.playAni(_.BOSS_ANI_TYPE.BOSS_FIGHT_IDLE,!0),i&&i()}))},s.showAniVertigo=function(){S.instance.playSound(_.AUDIO_SOUND.BOSS_VERTIGO),this.isVertigo=!0,this.playAni(_.BOSS_ANI_TYPE.BOSS_SWOON,!0),this._showStar()},s._showStar=function(){var i=this;this._aniComComa?(this._aniComComa.node.active=!0,this._aniComComa.play("star01")):d.loadEffectRes("star/star01").then((function(t){var n=p.instance.getNode(t,i.ndSocketHead);i._aniComComa=n.getComponent(c),i._aniComComa.play("star01")}))},s.hideAniVertigo=function(){this.isVertigo&&this._aniComComa&&(this._aniComComa.stop(),this._aniComComa.node.active=!1,this.isVertigo=!1)},s.showAniComa=function(){S.instance.playSound(_.AUDIO_SOUND.BOSS_VERTIGO),this.playAni(_.BOSS_ANI_TYPE.BOSS_LOSE),this._showStar()},s.onFrameEnableCollider=function(){this._colliderComWeapon.enabled=!0,this._colliderComWeapon.isTrigger=!0,S.instance.playSound(_.AUDIO_SOUND.BOSS_ATTACK_GROUND[Math.floor(Math.random()*_.AUDIO_SOUND.BOSS_ATTACK_GROUND.length)])},s.onFrameDisableCollider=function(){this._colliderComWeapon.enabled=!1,this._colliderComWeapon.isTrigger=!0,this._attackCallback&&this._attackCallback(),this._attackCallback=null},s.onFrameUseWeapon=function(){S.instance.playSound(_.AUDIO_SOUND.BOSS_WEAPON_WAVING[Math.floor(Math.random()*_.AUDIO_SOUND.BOSS_WEAPON_WAVING.length)])},s.hitFlyBoss=function(){this.hideAniVertigo()},s.update=function(i){this.isLookAtPlayer&&!m.scriptPlayer.isJumping&&m.scriptPlayer.jumpPos!==m.scriptPlayer.preJumpPos&&(this._curLookAtPos||(this._curLookAtPos=m.scriptPlayer.getOriLookAtPos()),L=m.scriptPlayer.oppositeSidePos,this._curLookAtPos.lerp(L,.1),this.node.lookAt(this._curLookAtPos,R),M=e.subtract(M,L,this._curLookAtPos),console.log("offset",M.length()),M.length()<=.05&&(this.isLookAtPlayer=!1))},a}(u)).prototype,"aniCom",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=D(v.prototype,"rigidCom",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=D(v.prototype,"boxColliderCom",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=D(v.prototype,"ndSocketHand",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=D(v.prototype,"ndSocketHead",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=v))||k));t._RF.pop()}}}));

System.register("chunks:///_virtual/cocosAnalytics.min.js",["./cjs-loader.mjs"],(function(t,e){"use strict";var n;return{setters:[function(t){n=t.default}],execute:function(){let r;t("default",void 0),n.define(e.meta.url,(function(e,i,o,s,a){n.createRequireWithReqMap({},i);!function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/assets/",n(n.s=3)}([function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e){var n={utf8:{stringToBytes:function(t){return n.bin.stringToBytes(unescape(encodeURIComponent(t)))},bytesToString:function(t){return decodeURIComponent(escape(n.bin.bytesToString(t)))}},bin:{stringToBytes:function(t){for(var e=[],n=0;n<t.length;n++)e.push(255&t.charCodeAt(n));return e},bytesToString:function(t){for(var e=[],n=0;n<t.length;n++)e.push(String.fromCharCode(t[n]));return e.join("")}}};t.exports=n},function(t,e,n){(function(t,r){var i,o;!function(s,a,u){var h={function:!0,object:!0},l=h[typeof window]&&window||this,c=h[typeof e]&&e,f=h[typeof t]&&t&&!t.nodeType&&t,p=c&&f&&"object"==typeof r&&r;!p||p.global!==p&&p.window!==p&&p.self!==p||(l=p),void 0===(o="function"==typeof(i=u)?i.call(e,n,e,t):i)||(t.exports=o),l.cocosAnalytics=u()}(0,window,(function(){return n(4)}))}).call(this,n(1)(t),n(0))},function(t,e,n){var r=n(5),i=n(11),o=n(12),s=n(15),a=n(16),u=n(17),h=n(18),l=n(19),c=n(20),f=n(21),p=n(22),d=n(23),g=n(24),v={data:{msgPlus:0,isInit:!1,isShowLog:!1,msgPool:[],apiURL:"https://logstorage.cocos.com/log/v2",apiURLReserved:"http://logstorage.cocos.com/log/v2",versionCode:"v2"},version:"2.2.1",browserVersion:void 0,isActive:!0,init:function(t){this.CAAccount=new a(this),this.CAEvent=new u(this),this.CAPayment=new h(this),this.CALevels=new l(this),this.CATask=new c(this),this.CAItem=new f(this),this.CAVirtual=new p(this),this.CATaskType=new d(this),this.CACustomEvent=new s(this),this.CAAdvertising=new g(this),i.manufacturer=i.manufacturer||"",this.data.appVersion=t.version,this.data.appBuild=t.build,this.data.engine=t.engine||"",this.data.resolution=this._getScreenResolution(),this.data.uniqueID=this._getUniqueID(),this.data.CCID=this._getCCID(),this.data.age=0,this.data.sex=0,this._runInterval(),this._bindPageVisibilityEvent(),this.data.isInit=!0,console.log("cocos analytics version :"+this.version);var e=this._getLocalStorage("_SDK_APPID_")||"",n=this._getLocalStorage("_SDK_STORE_")||"",r=this._getLocalStorage("_SDK_CALLNUMBER_")||"";if(e.length>0&&e!=t.appID||n.length>0&&n!=t.storeID||r.length>0&&r!=t.callNumber){var o=this._getLocalStorage("onlineDuration"),v=this._getLocalStorage("_UID_"+e)||"";v.length>0&&parseInt(o)>0&&(this.data.appID=e,this.data.userID=v,this.data.storeID=n,this.data.callNumber=r,this.CAAccount.logout())}return t.appID?(this.data.appID=t.appID,t.storeID=t.storeID,t.storeID&&0!=t.storeID.replace(/\s/g,"").length?(this.data.storeID=t.storeID,this.data.callNumber=t.callNumber||"",this.data.userID="",this.data.channel="",this._addLocalStorage("_SDK_STORE_",this.data.storeID),this._addLocalStorage("_SDK_APPID_",t.appID),this._addLocalStorage("_SDK_CALLNUMBER_",this.data.callNumber),void this._sendInitEvent()):(console.log("storeID 不能为空!"),void(this.data.isInit=!1))):(console.log("appID 不能为空!"),void(this.data.isInit=!1))},isInited:function(){return this.data.isInit},onPause:function(){this.isActive=!1,this.data.end=((new Date).getTime()+"").substr(0,10);var t=this.data.end-this.data.start;this.log("duration..."+t+"s");var e=this._generatePostData({eventValue:{action:"background",start:this.data.start,end:this.data.end},eventTag:"successed",eventID:"view"});this._upload(e)},onResume:function(){this.isActive=!0,this.data.start=((new Date).getTime()+"").substr(0,10),this.data.end&&this.data.start-this.data.end>3600&&this._sendInitEvent()},enableDebug:function(t){this.data.isShowLog=t},_sendInitEvent:function(){if(i.runtimeMask){var t=null;t=setInterval(function(){if(!i.runtimeMask){clearInterval(t);var e=this._generatePostData({eventTag:"successed",eventID:"init"});this._upload(e)}}.bind(this),10)}else{var e=this._generatePostData({eventTag:"successed",eventID:"init"});this._upload(e)}},_runInterval:function(){var t=this;this.isInited()||(setInterval((function(){t.log("cocos analytics check and upload log...");for(var e=t._getLocalStorage("_MSG_"+t.data.appID),n=JSON.parse(e||"[]")||t.data.msgPool;0!==n.length;)if(n.length<=100)n.forEach((function(e){t._submit(e)})),n=[],t.data.msgPool=n,t._addLocalStorage("_MSG_"+t.data.appID,t._toJson(t.data.msgPool));else{var r=n.splice(0,100);t._submit(r),t.data.msgPool=n,t._addLocalStorage("_MSG_"+t.data.appID,t._toJson(t.data.msgPool))}}),3e4),setInterval((function(){t.isActive&&t.data.heartBeat&&(t.data.onlineTime=parseInt(t.data.onlineTime||0)+1,t._addLocalStorage("onlineDuration",t.data.onlineTime))}),1e3))},_bindPageVisibilityEvent:function(){var t="hidden";t in document?document.addEventListener("visibilitychange",n):(t="mozHidden")in document?document.addEventListener("mozvisibilitychange",n):(t="webkitHidden")in document?document.addEventListener("webkitvisibilitychange",n):(t="msHidden")in document?document.addEventListener("msvisibilitychange",n):"onfocusin"in document?document.onfocusin=document.onfocusout=n:window.onpageshow=window.onpagehide=window.onfocus=window.onblur=n;var e=this;function n(){var t=document.visibilityState;"visible"===t&&e.onResume(),"hidden"===t&&e.onPause()}void 0!==document[t]&&n()},_generatePostData:function(t){var e=this._generateBasePostData();if(null==t)return e;for(var n in t)null!=t[n]&&e[n]!==t[n]&&(e[n]=t[n]);return e},_lastMsgID:function(){return this.data.saveMsgID||""},_msgID:function(){return this.data.saveMsgID=o(this.data.CCID+((new Date).getTime()+this.data.msgPlus)),this.data.msgPlus=this.data.msgPlus+1,this.data.saveMsgID},_generateBasePostData:function(){var t=((new Date).getTime()+"").substr(0,10),e={appVersion:this.data.appVersion,versionCode:this.data.versionCode,uniqueID:this.data.uniqueID,appID:this.data.appID,channelID:this.data.channel,platform:"H5",engine:this.data.engine,chargeTime:t,userID:this.data.userID,resolution:this.data.resolution,osVersion:i.os.version,language:this._getLanguage(),manufacturer:i.manufacturer||"",store:this.data.storeID,age:this.data.age,sex:this.data.sex,callNumber:this.data.callNumber,model:i.product};return e.lastMsgID=this._lastMsgID(),e.msgID=this._msgID(),e},_toJson:function(t){return JSON.stringify(t)},_fromJson:function(t){return JSON.parse(t)},_upload:function(t){this.data.isInit?this._submit(t):console.log("Please init first!")},log:function(){if(!0===this.data.isShowLog)for(var t in arguments)console.log(arguments[t])},_submit:function(t){var e;e=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");var n=this;e.onreadystatechange=function(){if(4==e.readyState){if(0==e.status&&n.data.apiURL!=n.data.apiURLReserved)return n.data.apiURL=n.data.apiURLReserved,void n._msgPersist(t);200==e.status&&n.log(n._toJson(t))}},e.onerror=function(e){n._msgPersist(t)};var i=r.encryptPostData(this._toJson(t));e.open("POST",this.data.apiURL,!0),e.setRequestHeader("Content-Type","text/plain;charset=UTF-8"),e.send(i)},_msgPersist:function(t){this.data.msgPool.push(t),this._addLocalStorage("_MSG_"+this.data.appID,this._toJson(this.data.msgPool))},_getUniqueID:function(){var t="_SDK_UNIQUE_ID_",e=this._getLocalStorage(t);return e||(e=r.random32Str(),this._addLocalStorage(t,e)),e},_getCCID:function(){var t=r.x64hash128(),e=this._getLocalStorage(t);return e||(e=r.random32Str(),this._addLocalStorage(t,e)),e},extends:function(t){t.data=this.data,t.log=this.log,t._toJson=this._toJson,t._upload=this._upload,t._submit=this._submit,t._msgPersist=this._msgPersist,t._generatePostData=this._generatePostData,t._generateBasePostData=this._generateBasePostData,t._addLocalStorage=this._addLocalStorage,t._delLocalStorage=this._delLocalStorage,t._getLocalStorage=this._getLocalStorage,t._getLanguage=this._getLanguage,t._setHeartBeat=this._setHeartBeat,t._lastMsgID=this._lastMsgID,t._msgID=this._msgID},_addLocalStorage:function(t,e){e=e.toString(),window.localStorage&&("sessionId"==t&&window.sessionStorage?sessionStorage.setItem("__CA_"+t,e):window.wx&&wx.setStorage?wx.setStorage({key:"__CA_"+t,data:e}):localStorage.setItem("__CA_"+t,e))},_delLocalStorage:function(t){window.localStorage&&("sessionId"==t&&window.sessionStorage?sessionStorage.removeItem("__CA_"+t):window.wx&&wx.removeStorageSync?wx.removeStorageSync("__CA_"+t):localStorage.removeItem("__CA_"+t))},_getLocalStorage:function(t){if(window.localStorage)return"sessionId"==t&&window.sessionStorage?sessionStorage.getItem("__CA_"+t):window.wx&&wx.getStorageSync?wx.getStorageSync("__CA_"+t):localStorage.getItem("__CA_"+t)},_getScreenResolution:function(){if(null!=window.BK&&null!=window.BK.Director){var t=window.BK.Director.renderSize;return t.width+"*"+t.height}return null==window.screen.width?window.screen.availWidth+"*"+window.screen.availHeight:window.screen.width+"*"+window.screen.height},_getBrowserVersion:function(){if(!this.browserVersion){var t=window.navigator.userAgent.toLowerCase(),e=/micromessenger|qqbrowser|sogou|qzone|liebao|ucbrowser|360 aphone|360browser|edge|baiduboxapp|bidubrowser|baidubrowser|maxthon|mxbrowser|trident|miuibrowser/i.exec(t);e||(e=/chrome|safari|firefox|opr|oupeng|opera/i.exec(t));var n=e?e[0]:"unknown";"micromessenger"===n?n="wechat":"safari"===n&&t.match(/android.*applewebkit/)?n="androidbrowser":"trident"===n?n="ie":"360 aphone"===n?n="360browser":"mxbrowser"===n?n="maxthon":"opr"===n?n="opera":"bidubrowser"===n&&(n="baidubrowser");var r=t.match(/(micromessenger|qq|mx|maxthon|edge|bidu|baidu|sogou)(mobile)?(browserType)?\/?([\d.]+)/i);r||(r=t.match(/(msie |rv:|firefox|chrome|ucbrowser|oupeng|opera|opr|safari|miui)(mobile)?(browserType)?\/?([\d.]+)/i));var i=r?r[4]:"";this.browserVersion=n,i&&(this.browserVersion+="-"+i)}return this.browserVersion},_getLanguage:function(){var t=window.navigator.language;return(t=t||window.navigator.browserLanguage)?t.split("-")[0]:"en"},_setHeartBeat:function(t){this.data.heartBeat=t||!1,this.data.onlineTime=this._getLocalStorage("onlineDuration")||0}};t.exports=v},function(t,e,n){(function(e){function r(t,e){var n=0,r=t.length;if(!t)return 0;for(;e<r;){var i=e,o=t.charCodeAt(e);if((n+=o<=127?1:o<=2047?2:o<=65535?3:o<=2097151?4:o<=67108863?5:6)>117){e=i;break}e++}return e}function i(t){var e=new JSEncrypt;return e.setPublicKey("-----BEGIN PUBLIC KEY-----\nMIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQC9LCzyypg24REurnyflGy2LdFj\nc63hBk/69r84TAJHlE7x92kUpZBF+7cRf0bFRIRA52OsKlF/ljzCjfOPBE9JfNIq\n+dwF/rSqns+eyQHPQFd5lY692loz9Mo1pNgElpHuJbfydju7F5KTnQYqviCWompm\nLKKdzAPcY1AVJfWd+QIDAQAB\n-----END PUBLIC KEY-----"),e.key.encrypt(t)}n(10);var o={urlsafe_b64encode:t=>t.replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,""),encryptPostData(t){for(var n=new e(0),o=0,s=t.length;s-o>0;){var a=o,u=r(t,o),h="";do{h=i(t.substr(a,u-a))}while(256!=h.length);n+=h,o=u}var l=e.from(n,"hex").toString("base64");return this.urlsafe_b64encode(l)},x64Add:function(t,e){t=[t[0]>>>16,65535&t[0],t[1]>>>16,65535&t[1]],e=[e[0]>>>16,65535&e[0],e[1]>>>16,65535&e[1]];var n=[0,0,0,0];return n[3]+=t[3]+e[3],n[2]+=n[3]>>>16,n[3]&=65535,n[2]+=t[2]+e[2],n[1]+=n[2]>>>16,n[2]&=65535,n[1]+=t[1]+e[1],n[0]+=n[1]>>>16,n[1]&=65535,n[0]+=t[0]+e[0],n[0]&=65535,[n[0]<<16|n[1],n[2]<<16|n[3]]},x64Multiply:function(t,e){t=[t[0]>>>16,65535&t[0],t[1]>>>16,65535&t[1]],e=[e[0]>>>16,65535&e[0],e[1]>>>16,65535&e[1]];var n=[0,0,0,0];return n[3]+=t[3]*e[3],n[2]+=n[3]>>>16,n[3]&=65535,n[2]+=t[2]*e[3],n[1]+=n[2]>>>16,n[2]&=65535,n[2]+=t[3]*e[2],n[1]+=n[2]>>>16,n[2]&=65535,n[1]+=t[1]*e[3],n[0]+=n[1]>>>16,n[1]&=65535,n[1]+=t[2]*e[2],n[0]+=n[1]>>>16,n[1]&=65535,n[1]+=t[3]*e[1],n[0]+=n[1]>>>16,n[1]&=65535,n[0]+=t[0]*e[3]+t[1]*e[2]+t[2]*e[1]+t[3]*e[0],n[0]&=65535,[n[0]<<16|n[1],n[2]<<16|n[3]]},x64Rotl:function(t,e){return 32==(e%=64)?[t[1],t[0]]:e<32?[t[0]<<e|t[1]>>>32-e,t[1]<<e|t[0]>>>32-e]:(e-=32,[t[1]<<e|t[0]>>>32-e,t[0]<<e|t[1]>>>32-e])},x64LeftShift:function(t,e){return 0==(e%=64)?t:e<32?[t[0]<<e|t[1]>>>32-e,t[1]<<e]:[t[1]<<e-32,0]},x64Xor:function(t,e){return[t[0]^e[0],t[1]^e[1]]},x64Fmix:function(t){return t=this.x64Xor(t,[0,t[0]>>>1]),t=this.x64Multiply(t,[4283543511,3981806797]),t=this.x64Xor(t,[0,t[0]>>>1]),t=this.x64Multiply(t,[3301882366,444984403]),this.x64Xor(t,[0,t[0]>>>1])},x64hash128:function(t,e){e=e||0;for(var n=(t=t||"0").length%16,r=t.length-n,i=[0,e],o=[0,e],s=[0,0],a=[0,0],u=[2277735313,289559509],h=[1291169091,658871167],l=0;l<r;l+=16)s=[255&t.charCodeAt(l+4)|(255&t.charCodeAt(l+5))<<8|(255&t.charCodeAt(l+6))<<16|(255&t.charCodeAt(l+7))<<24,255&t.charCodeAt(l)|(255&t.charCodeAt(l+1))<<8|(255&t.charCodeAt(l+2))<<16|(255&t.charCodeAt(l+3))<<24],a=[255&t.charCodeAt(l+12)|(255&t.charCodeAt(l+13))<<8|(255&t.charCodeAt(l+14))<<16|(255&t.charCodeAt(l+15))<<24,255&t.charCodeAt(l+8)|(255&t.charCodeAt(l+9))<<8|(255&t.charCodeAt(l+10))<<16|(255&t.charCodeAt(l+11))<<24],s=this.x64Multiply(s,u),s=this.x64Rotl(s,31),s=this.x64Multiply(s,h),i=this.x64Xor(i,s),i=this.x64Rotl(i,27),i=this.x64Add(i,o),i=this.x64Add(this.x64Multiply(i,[0,5]),[0,1390208809]),a=this.x64Multiply(a,h),a=this.x64Rotl(a,33),a=this.x64Multiply(a,u),o=this.x64Xor(o,a),o=this.x64Rotl(o,31),o=this.x64Add(o,i),o=this.x64Add(this.x64Multiply(o,[0,5]),[0,944331445]);switch(s=[0,0],a=[0,0],n){case 15:a=this.x64Xor(a,this.x64LeftShift([0,t.charCodeAt(l+14)],48));case 14:a=this.x64Xor(a,this.x64LeftShift([0,t.charCodeAt(l+13)],40));case 13:a=this.x64Xor(a,this.x64LeftShift([0,t.charCodeAt(l+12)],32));case 12:a=this.x64Xor(a,this.x64LeftShift([0,t.charCodeAt(l+11)],24));case 11:a=this.x64Xor(a,this.x64LeftShift([0,t.charCodeAt(l+10)],16));case 10:a=this.x64Xor(a,this.x64LeftShift([0,t.charCodeAt(l+9)],8));case 9:a=this.x64Xor(a,[0,t.charCodeAt(l+8)]),a=this.x64Multiply(a,h),a=this.x64Rotl(a,33),a=this.x64Multiply(a,u),o=this.x64Xor(o,a);case 8:s=this.x64Xor(s,this.x64LeftShift([0,t.charCodeAt(l+7)],56));case 7:s=this.x64Xor(s,this.x64LeftShift([0,t.charCodeAt(l+6)],48));case 6:s=this.x64Xor(s,this.x64LeftShift([0,t.charCodeAt(l+5)],40));case 5:s=this.x64Xor(s,this.x64LeftShift([0,t.charCodeAt(l+4)],32));case 4:s=this.x64Xor(s,this.x64LeftShift([0,t.charCodeAt(l+3)],24));case 3:s=this.x64Xor(s,this.x64LeftShift([0,t.charCodeAt(l+2)],16));case 2:s=this.x64Xor(s,this.x64LeftShift([0,t.charCodeAt(l+1)],8));case 1:s=this.x64Xor(s,[0,t.charCodeAt(l)]),s=this.x64Multiply(s,u),s=this.x64Rotl(s,31),s=this.x64Multiply(s,h),i=this.x64Xor(i,s)}return i=this.x64Xor(i,[0,t.length]),o=this.x64Xor(o,[0,t.length]),i=this.x64Add(i,o),o=this.x64Add(o,i),i=this.x64Fmix(i),o=this.x64Fmix(o),i=this.x64Add(i,o),o=this.x64Add(o,i),("00000000"+(i[0]>>>0).toString(16)).slice(-8)+("00000000"+(i[1]>>>0).toString(16)).slice(-8)+("00000000"+(o[0]>>>0).toString(16)).slice(-8)+("00000000"+(o[1]>>>0).toString(16)).slice(-8)},random32Str:function(){var t,e=Date.now().toString(32).toUpperCase();return t=Date.now(),(e||"")+"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var n;return n=(t+16*Math.random())%16|0,t=Math.floor(t/16),"x"===e?n.toString(16):(7&n|8).toString(16)})).replace(/-/g,"").toUpperCase()}};t.exports=o}).call(this,n(6).Buffer)},function(t,e,n){(function(t){var r=n(7),i=n(8),o=n(9);function s(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(t,e){if(s()<e)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=u.prototype:(null===t&&(t=new u(e)),t.length=e),t}function u(t,e,n){if(!(u.TYPED_ARRAY_SUPPORT||this instanceof u))return new u(t,e,n);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return c(this,t)}return h(this,t,e,n)}function h(t,e,n,r){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,n,r){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return e=void 0===n&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,n):new Uint8Array(e,n,r),u.TYPED_ARRAY_SUPPORT?(t=e).__proto__=u.prototype:t=f(t,e),t}(t,e,n,r):"string"==typeof e?function(t,e,n){if("string"==typeof n&&""!==n||(n="utf8"),!u.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|d(e,n),i=(t=a(t,r)).write(e,n);return i!==r&&(t=t.slice(0,i)),t}(t,e,n):function(t,e){if(u.isBuffer(e)){var n=0|p(e.length);return 0===(t=a(t,n)).length||e.copy(t,0,0,n),t}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(r=e.length)!=r?a(t,0):f(t,e);if("Buffer"===e.type&&o(e.data))return f(t,e.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function l(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function c(t,e){if(l(e),t=a(t,e<0?0:0|p(e)),!u.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function f(t,e){var n=e.length<0?0:0|p(e.length);t=a(t,n);for(var r=0;r<n;r+=1)t[r]=255&e[r];return t}function p(t){if(t>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|t}function d(t,e){if(u.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return F(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return j(t).length;default:if(r)return F(t).length;e=(""+e).toLowerCase(),r=!0}}function g(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return P(this,e,n);case"utf8":case"utf-8":return A(this,e,n);case"ascii":return T(this,e,n);case"latin1":case"binary":return E(this,e,n);case"base64":return I(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return B(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function v(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function y(t,e,n,r,i){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof e&&(e=u.from(e,r)),u.isBuffer(e))return 0===e.length?-1:b(t,e,n,r,i);if("number"==typeof e)return e&=255,u.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):b(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function b(t,e,n,r,i){var o,s=1,a=t.length,u=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;s=2,a/=2,u/=2,n/=2}function h(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(i){var l=-1;for(o=n;o<a;o++)if(h(t,o)===h(e,-1===l?0:o-l)){if(-1===l&&(l=o),o-l+1===u)return l*s}else-1!==l&&(o-=o-l),l=-1}else for(n+u>a&&(n=a-u),o=n;o>=0;o--){for(var c=!0,f=0;f<u;f++)if(h(t,o+f)!==h(e,f)){c=!1;break}if(c)return o}return-1}function m(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=e.length;if(o%2!=0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var s=0;s<r;++s){var a=parseInt(e.substr(2*s,2),16);if(isNaN(a))return s;t[n+s]=a}return s}function w(t,e,n,r){return X(F(e,t.length-n),t,n,r)}function S(t,e,n,r){return X(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function _(t,e,n,r){return S(t,e,n,r)}function x(t,e,n,r){return X(j(e),t,n,r)}function D(t,e,n,r){return X(function(t,e){for(var n,r,i,o=[],s=0;s<t.length&&!((e-=2)<0);++s)r=(n=t.charCodeAt(s))>>8,i=n%256,o.push(i),o.push(r);return o}(e,t.length-n),t,n,r)}function I(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function A(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;i<n;){var o,s,a,u,h=t[i],l=null,c=h>239?4:h>223?3:h>191?2:1;if(i+c<=n)switch(c){case 1:h<128&&(l=h);break;case 2:128==(192&(o=t[i+1]))&&(u=(31&h)<<6|63&o)>127&&(l=u);break;case 3:o=t[i+1],s=t[i+2],128==(192&o)&&128==(192&s)&&(u=(15&h)<<12|(63&o)<<6|63&s)>2047&&(u<55296||u>57343)&&(l=u);break;case 4:o=t[i+1],s=t[i+2],a=t[i+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&(u=(15&h)<<18|(63&o)<<12|(63&s)<<6|63&a)>65535&&u<1114112&&(l=u)}null===l?(l=65533,c=1):l>65535&&(l-=65536,r.push(l>>>10&1023|55296),l=56320|1023&l),r.push(l),i+=c}return function(t){var e=t.length;if(e<=4096)return String.fromCharCode.apply(String,t);for(var n="",r=0;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=4096));return n}(r)}function T(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function E(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function P(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=e;o<n;++o)i+=V(t[o]);return i}function B(t,e,n){for(var r=t.slice(e,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function C(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function R(t,e,n,r,i,o){if(!u.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function M(t,e,n,r){e<0&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-n,2);i<o;++i)t[n+i]=(e&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function O(t,e,n,r){e<0&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-n,4);i<o;++i)t[n+i]=e>>>8*(r?i:3-i)&255}function L(t,e,n,r,i,o){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function k(t,e,n,r,o){return o||L(t,0,n,4),i.write(t,e,n,r,23,4),n+4}function N(t,e,n,r,o){return o||L(t,0,n,8),i.write(t,e,n,r,52,8),n+8}e.Buffer=u,e.SlowBuffer=function(t){return+t!=t&&(t=0),u.alloc(+t)},e.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=s(),u.poolSize=8192,u._augment=function(t){return t.__proto__=u.prototype,t},u.from=function(t,e,n){return h(null,t,e,n)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(t,e,n){return function(t,e,n,r){return l(e),e<=0?a(t,e):void 0!==n?"string"==typeof r?a(t,e).fill(n,r):a(t,e).fill(n):a(t,e)}(null,t,e,n)},u.allocUnsafe=function(t){return c(null,t)},u.allocUnsafeSlow=function(t){return c(null,t)},u.isBuffer=function(t){return!(null==t||!t._isBuffer)},u.compare=function(t,e){if(!u.isBuffer(t)||!u.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,i=0,o=Math.min(n,r);i<o;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},u.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(t,e){if(!o(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return u.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=u.allocUnsafe(e),i=0;for(n=0;n<t.length;++n){var s=t[n];if(!u.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(r,i),i+=s.length}return r},u.byteLength=d,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)v(this,e,e+1);return this},u.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)v(this,e,e+3),v(this,e+1,e+2);return this},u.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)v(this,e,e+7),v(this,e+1,e+6),v(this,e+2,e+5),v(this,e+3,e+4);return this},u.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?A(this,0,t):g.apply(this,arguments)},u.prototype.equals=function(t){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===u.compare(this,t)},u.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},u.prototype.compare=function(t,e,n,r,i){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),e<0||n>t.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&e>=n)return 0;if(r>=i)return-1;if(e>=n)return 1;if(this===t)return 0;for(var o=(i>>>=0)-(r>>>=0),s=(n>>>=0)-(e>>>=0),a=Math.min(o,s),h=this.slice(r,i),l=t.slice(e,n),c=0;c<a;++c)if(h[c]!==l[c]){o=h[c],s=l[c];break}return o<s?-1:s<o?1:0},u.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},u.prototype.indexOf=function(t,e,n){return y(this,t,e,n,!0)},u.prototype.lastIndexOf=function(t,e,n){return y(this,t,e,n,!1)},u.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-e;if((void 0===n||n>i)&&(n=i),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return m(this,t,e,n);case"utf8":case"utf-8":return w(this,t,e,n);case"ascii":return S(this,t,e,n);case"latin1":case"binary":return _(this,t,e,n);case"base64":return x(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D(this,t,e,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},u.prototype.slice=function(t,e){var n,r=this.length;if((t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t),u.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=u.prototype;else{var i=e-t;n=new u(i,void 0);for(var o=0;o<i;++o)n[o]=this[o+t]}return n},u.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||C(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r},u.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||C(t,e,this.length);for(var r=this[t+--e],i=1;e>0&&(i*=256);)r+=this[t+--e]*i;return r},u.prototype.readUInt8=function(t,e){return e||C(t,1,this.length),this[t]},u.prototype.readUInt16LE=function(t,e){return e||C(t,2,this.length),this[t]|this[t+1]<<8},u.prototype.readUInt16BE=function(t,e){return e||C(t,2,this.length),this[t]<<8|this[t+1]},u.prototype.readUInt32LE=function(t,e){return e||C(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},u.prototype.readUInt32BE=function(t,e){return e||C(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},u.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||C(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*e)),r},u.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||C(t,e,this.length);for(var r=e,i=1,o=this[t+--r];r>0&&(i*=256);)o+=this[t+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*e)),o},u.prototype.readInt8=function(t,e){return e||C(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},u.prototype.readInt16LE=function(t,e){e||C(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt16BE=function(t,e){e||C(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt32LE=function(t,e){return e||C(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},u.prototype.readInt32BE=function(t,e){return e||C(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},u.prototype.readFloatLE=function(t,e){return e||C(t,4,this.length),i.read(this,t,!0,23,4)},u.prototype.readFloatBE=function(t,e){return e||C(t,4,this.length),i.read(this,t,!1,23,4)},u.prototype.readDoubleLE=function(t,e){return e||C(t,8,this.length),i.read(this,t,!0,52,8)},u.prototype.readDoubleBE=function(t,e){return e||C(t,8,this.length),i.read(this,t,!1,52,8)},u.prototype.writeUIntLE=function(t,e,n,r){t=+t,e|=0,n|=0,r||R(this,t,e,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[e]=255&t;++o<n&&(i*=256);)this[e+o]=t/i&255;return e+n},u.prototype.writeUIntBE=function(t,e,n,r){t=+t,e|=0,n|=0,r||R(this,t,e,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+n},u.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,1,255,0),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},u.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):M(this,t,e,!0),e+2},u.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):M(this,t,e,!1),e+2},u.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):O(this,t,e,!0),e+4},u.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):O(this,t,e,!1),e+4},u.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);R(this,t,e,n,i-1,-i)}var o=0,s=1,a=0;for(this[e]=255&t;++o<n&&(s*=256);)t<0&&0===a&&0!==this[e+o-1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+n},u.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);R(this,t,e,n,i-1,-i)}var o=n-1,s=1,a=0;for(this[e+o]=255&t;--o>=0&&(s*=256);)t<0&&0===a&&0!==this[e+o+1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+n},u.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,1,127,-128),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},u.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):M(this,t,e,!0),e+2},u.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):M(this,t,e,!1),e+2},u.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):O(this,t,e,!0),e+4},u.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||R(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):O(this,t,e,!1),e+4},u.prototype.writeFloatLE=function(t,e,n){return k(this,t,e,!0,n)},u.prototype.writeFloatBE=function(t,e,n){return k(this,t,e,!1,n)},u.prototype.writeDoubleLE=function(t,e,n){return N(this,t,e,!0,n)},u.prototype.writeDoubleBE=function(t,e,n){return N(this,t,e,!1,n)},u.prototype.copy=function(t,e,n,r){if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var i,o=r-n;if(this===t&&n<e&&e<r)for(i=o-1;i>=0;--i)t[i+e]=this[i+n];else if(o<1e3||!u.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+e]=this[i+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+o),e);return o},u.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!u.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var o;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(o=e;o<n;++o)this[o]=t;else{var s=u.isBuffer(t)?t:F(new u(t,r).toString()),a=s.length;for(o=0;o<n-e;++o)this[o+e]=s[o%a]}return this};var U=/[^+\/0-9A-Za-z-_]/g;function V(t){return t<16?"0"+t.toString(16):t.toString(16)}function F(t,e){var n;e=e||1/0;for(var r=t.length,i=null,o=[],s=0;s<r;++s){if((n=t.charCodeAt(s))>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===r){(e-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function j(t){return r.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(U,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function X(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}}).call(this,n(0))},function(t,e,n){e.byteLength=function(t){var e=h(t),n=e[0],r=e[1];return 3*(n+r)/4-r},e.toByteArray=function(t){var e,n,r=h(t),s=r[0],a=r[1],u=new o(function(t,e,n){return 3*(e+n)/4-n}(0,s,a)),l=0,c=a>0?s-4:s;for(n=0;n<c;n+=4)e=i[t.charCodeAt(n)]<<18|i[t.charCodeAt(n+1)]<<12|i[t.charCodeAt(n+2)]<<6|i[t.charCodeAt(n+3)],u[l++]=e>>16&255,u[l++]=e>>8&255,u[l++]=255&e;return 2===a&&(e=i[t.charCodeAt(n)]<<2|i[t.charCodeAt(n+1)]>>4,u[l++]=255&e),1===a&&(e=i[t.charCodeAt(n)]<<10|i[t.charCodeAt(n+1)]<<4|i[t.charCodeAt(n+2)]>>2,u[l++]=e>>8&255,u[l++]=255&e),u},e.fromByteArray=function(t){for(var e,n=t.length,i=n%3,o=[],s=0,a=n-i;s<a;s+=16383)o.push(l(t,s,s+16383>a?a:s+16383));return 1===i?(e=t[n-1],o.push(r[e>>2]+r[e<<4&63]+"==")):2===i&&(e=(t[n-2]<<8)+t[n-1],o.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+"=")),o.join("")};for(var r=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,u=s.length;a<u;++a)r[a]=s[a],i[s.charCodeAt(a)]=a;function h(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function l(t,e,n){for(var i,o,s=[],a=e;a<n;a+=3)i=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(255&t[a+2]),s.push(r[(o=i)>>18&63]+r[o>>12&63]+r[o>>6&63]+r[63&o]);return s.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(t,e){e.read=function(t,e,n,r,i){var o,s,a=8*i-r-1,u=(1<<a)-1,h=u>>1,l=-7,c=n?i-1:0,f=n?-1:1,p=t[e+c];for(c+=f,o=p&(1<<-l)-1,p>>=-l,l+=a;l>0;o=256*o+t[e+c],c+=f,l-=8);for(s=o&(1<<-l)-1,o>>=-l,l+=r;l>0;s=256*s+t[e+c],c+=f,l-=8);if(0===o)o=1-h;else{if(o===u)return s?NaN:1/0*(p?-1:1);s+=Math.pow(2,r),o-=h}return(p?-1:1)*s*Math.pow(2,o-r)},e.write=function(t,e,n,r,i,o){var s,a,u,h=8*o-i-1,l=(1<<h)-1,c=l>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,d=r?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=l):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),(e+=s+c>=1?f/u:f*Math.pow(2,1-c))*u>=2&&(s++,u/=2),s+c>=l?(a=0,s=l):s+c>=1?(a=(e*u-1)*Math.pow(2,i),s+=c):(a=e*Math.pow(2,c-1)*Math.pow(2,i),s=0));i>=8;t[n+p]=255&a,p+=d,a/=256,i-=8);for(s=s<<i|a,h+=i;h>0;t[n+p]=255&s,p+=d,s/=256,h-=8);t[n+p-d]|=128*g}},function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},function(t,e,n){!function(t){function e(t){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(t)}function n(t,e){return t&e}function r(t,e){return t|e}function i(t,e){return t^e}function o(t,e){return t&~e}function s(t){if(0==t)return-1;var e=0;return 0==(65535&t)&&(t>>=16,e+=16),0==(255&t)&&(t>>=8,e+=8),0==(15&t)&&(t>>=4,e+=4),0==(3&t)&&(t>>=2,e+=2),0==(1&t)&&++e,e}function a(t){for(var e=0;0!=t;)t&=t-1,++e;return e}var u,h,l=function(t,e){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},c={decode:function(t){var e;if(void 0===u){for(u=Object.create(null),e=0;e<64;++e)u["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(e)]=e;for(e=0;e<"= \f\n\r\t \u2028\u2029".length;++e)u["= \f\n\r\t \u2028\u2029".charAt(e)]=-1}var n=[],r=0,i=0;for(e=0;e<t.length;++e){var o=t.charAt(e);if("="==o)break;if(-1!=(o=u[o])){if(void 0===o)throw new Error("Illegal character at offset "+e);r|=o,++i>=4?(n[n.length]=r>>16,n[n.length]=r>>8&255,n[n.length]=255&r,r=0,i=0):r<<=6}}switch(i){case 1:throw new Error("Base64 encoding incomplete: at least 2 bits missing");case 2:n[n.length]=r>>10;break;case 3:n[n.length]=r>>16,n[n.length]=r>>8&255}return n},re:/-----BEGIN [^-]+-----([A-Za-z0-9+\/=\s]+)-----END [^-]+-----|begin-base64[^\n]+\n([A-Za-z0-9+\/=\s]+)====/,unarmor:function(t){var e=c.re.exec(t);if(e)if(e[1])t=e[1];else{if(!e[2])throw new Error("RegExp out of sync");t=e[2]}return c.decode(t)}},f=function(){function t(e,n){this.hexDigits="0123456789ABCDEF",e instanceof t?(this.enc=e.enc,this.pos=e.pos):(this.enc=e,this.pos=n)}return t.prototype.get=function(t){if(void 0===t&&(t=this.pos++),t>=this.enc.length)throw new Error("Requesting byte offset "+t+" on a stream of length "+this.enc.length);return"string"==typeof this.enc?this.enc.charCodeAt(t):this.enc[t]},t.prototype.hexByte=function(t){return this.hexDigits.charAt(t>>4&15)+this.hexDigits.charAt(15&t)},t.prototype.hexDump=function(t,e,n){for(var r="",i=t;i<e;++i)if(r+=this.hexByte(this.get(i)),!0!==n)switch(15&i){case 7:r+="  ";break;case 15:r+="\n";break;default:r+=" "}return r},t}(),p=function(){function t(t,e,n,r,i){if(!(r instanceof d))throw new Error("Invalid tag value.");this.stream=t,this.header=e,this.length=n,this.tag=r,this.sub=i}return t.prototype.toString=function(){return this.typeName()+"@"+this.stream.pos+"[header:"+this.header+",length:"+this.length+",sub:"+(null===this.sub?"null":this.sub.length)+"]"},t.prototype.posStart=function(){return this.stream.pos},t.prototype.posContent=function(){return this.stream.pos+this.header},t.prototype.posEnd=function(){return this.stream.pos+this.header+Math.abs(this.length)},t.prototype.toHexString=function(){return this.stream.hexDump(this.posStart(),this.posEnd(),!0)},t.decodeLength=function(t){var e=t.get(),n=127&e;if(n==e)return n;if(n>6)throw new Error("Length over 48 bits not supported at position "+(t.pos-1));if(0===n)return null;e=0;for(var r=0;r<n;++r)e=256*e+t.get();return e},t.prototype.getHexStringValue=function(){var t=this.toHexString(),e=2*this.header,n=2*this.length;return t.substr(e,n)},t.decode=function(e){var n;n=e instanceof f?e:new f(e,0);var r=new f(n),i=new d(n),o=t.decodeLength(n),s=n.pos,a=s-r.pos,u=null,h=function(){var e=[];if(null!==o){for(var r=s+o;n.pos<r;)e[e.length]=t.decode(n);if(n.pos!=r)throw new Error("Content size is not correct for container starting at offset "+s)}else try{for(;;){var i=t.decode(n);if(i.tag.isEOC())break;e[e.length]=i}o=s-n.pos}catch(t){throw new Error("Exception while decoding undefined length content: "+t)}return e};if(i.tagConstructed)u=h();else if(i.isUniversal()&&(3==i.tagNumber||4==i.tagNumber))try{if(3==i.tagNumber&&0!=n.get())throw new Error("BIT STRINGs with unused bits cannot encapsulate.");u=h();for(var l=0;l<u.length;++l)if(u[l].tag.isEOC())throw new Error("EOC is not supposed to be actual content.")}catch(t){u=null}if(null===u){if(null===o)throw new Error("We can't skip over an invalid tag with undefined length at offset "+s);n.pos=s+Math.abs(o)}return new t(r,a,o,i,u)},t}(),d=function(){function t(t){var e=t.get();this.tagClass=e>>6,this.tagConstructed=0!=(32&e),this.tagNumber=31&e,31==this.tagNumber&&null.error(0)}return t.prototype.isUniversal=function(){return 0===this.tagClass},t.prototype.isEOC=function(){return 0===this.tagClass&&0===this.tagNumber},t}(),g=function(){function t(t,e,n){null!=t&&("number"==typeof t?this.fromNumber(t,e,n):null==e&&"string"!=typeof t?this.fromString(t,256):this.fromString(t,e))}return t.prototype.toString=function(t){if(this.s<0)return"-"+this.negate().toString(t);var n;if(16==t)n=4;else if(8==t)n=3;else if(2==t)n=1;else if(32==t)n=5;else{if(4!=t)return this.toRadix(t);n=2}var r,i=(1<<n)-1,o=!1,s="",a=this.t,u=this.DB-a*this.DB%n;if(a-- >0)for(u<this.DB&&(r=this[a]>>u)>0&&(o=!0,s=e(r));a>=0;)u<n?(r=(this[a]&(1<<u)-1)<<n-u,r|=this[--a]>>(u+=this.DB-n)):(r=this[a]>>(u-=n)&i,u<=0&&(u+=this.DB,--a)),r>0&&(o=!0),o&&(s+=e(r));return o?s:"0"},t.prototype.negate=function(){var e=m();return t.ZERO.subTo(this,e),e},t.prototype.abs=function(){return this.s<0?this.negate():this},t.prototype.compareTo=function(t){var e=this.s-t.s;if(0!=e)return e;var n=this.t;if(0!=(e=n-t.t))return this.s<0?-e:e;for(;--n>=0;)if(0!=(e=this[n]-t[n]))return e;return 0},t.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+A(this[this.t-1]^this.s&this.DM)},t.prototype.mod=function(e){var n=m();return this.abs().divRemTo(e,null,n),this.s<0&&n.compareTo(t.ZERO)>0&&e.subTo(n,n),n},t.prototype.modPowInt=function(t,e){var n;return n=t<256||e.isEven()?new y(e):new b(e),this.exp(t,n)},t.prototype.clone=function(){var t=m();return this.copyTo(t),t},t.prototype.intValue=function(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},t.prototype.byteValue=function(){return 0==this.t?this.s:this[0]<<24>>24},t.prototype.shortValue=function(){return 0==this.t?this.s:this[0]<<16>>16},t.prototype.signum=function(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1},t.prototype.equals=function(t){return 0==this.compareTo(t)},t.prototype.min=function(t){return this.compareTo(t)<0?this:t},t.prototype.max=function(t){return this.compareTo(t)>0?this:t},t.prototype.and=function(t){var e=m();return this.bitwiseTo(t,n,e),e},t.prototype.or=function(t){var e=m();return this.bitwiseTo(t,r,e),e},t.prototype.xor=function(t){var e=m();return this.bitwiseTo(t,i,e),e},t.prototype.andNot=function(t){var e=m();return this.bitwiseTo(t,o,e),e},t.prototype.not=function(){for(var t=m(),e=0;e<this.t;++e)t[e]=this.DM&~this[e];return t.t=this.t,t.s=~this.s,t},t.prototype.shiftLeft=function(t){var e=m();return t<0?this.rShiftTo(-t,e):this.lShiftTo(t,e),e},t.prototype.shiftRight=function(t){var e=m();return t<0?this.lShiftTo(-t,e):this.rShiftTo(t,e),e},t.prototype.getLowestSetBit=function(){for(var t=0;t<this.t;++t)if(0!=this[t])return t*this.DB+s(this[t]);return this.s<0?this.t*this.DB:-1},t.prototype.bitCount=function(){for(var t=0,e=this.s&this.DM,n=0;n<this.t;++n)t+=a(this[n]^e);return t},t.prototype.testBit=function(t){var e=Math.floor(t/this.DB);return e>=this.t?0!=this.s:0!=(this[e]&1<<t%this.DB)},t.prototype.setBit=function(t){return this.changeBit(t,r)},t.prototype.clearBit=function(t){return this.changeBit(t,o)},t.prototype.flipBit=function(t){return this.changeBit(t,i)},t.prototype.add=function(t){var e=m();return this.addTo(t,e),e},t.prototype.subtract=function(t){var e=m();return this.subTo(t,e),e},t.prototype.multiply=function(t){var e=m();return this.multiplyTo(t,e),e},t.prototype.divide=function(t){var e=m();return this.divRemTo(t,e,null),e},t.prototype.remainder=function(t){var e=m();return this.divRemTo(t,null,e),e},t.prototype.divideAndRemainder=function(t){var e=m(),n=m();return this.divRemTo(t,e,n),[e,n]},t.prototype.pow=function(t){return this.exp(t,new v)},t.prototype.copyTo=function(t){for(var e=this.t-1;e>=0;--e)t[e]=this[e];t.t=this.t,t.s=this.s},t.prototype.fromInt=function(t){this.t=1,this.s=t<0?-1:0,t>0?this[0]=t:t<-1?this[0]=t+this.DV:this.t=0},t.prototype.fromString=function(e,n){var r;if(16==n)r=4;else if(8==n)r=3;else if(256==n)r=8;else if(2==n)r=1;else if(32==n)r=5;else{if(4!=n)return void this.fromRadix(e,n);r=2}this.t=0,this.s=0;for(var i=e.length,o=!1,s=0;--i>=0;){var a=8==r?255&+e[i]:D(e,i);a<0?"-"==e.charAt(i)&&(o=!0):(o=!1,0==s?this[this.t++]=a:s+r>this.DB?(this[this.t-1]|=(a&(1<<this.DB-s)-1)<<s,this[this.t++]=a>>this.DB-s):this[this.t-1]|=a<<s,(s+=r)>=this.DB&&(s-=this.DB))}8==r&&0!=(128&+e[0])&&(this.s=-1,s>0&&(this[this.t-1]|=(1<<this.DB-s)-1<<s)),this.clamp(),o&&t.ZERO.subTo(this,this)},t.prototype.clamp=function(){for(var t=this.s&this.DM;this.t>0&&this[this.t-1]==t;)--this.t},t.prototype.dlShiftTo=function(t,e){var n;for(n=this.t-1;n>=0;--n)e[n+t]=this[n];for(n=t-1;n>=0;--n)e[n]=0;e.t=this.t+t,e.s=this.s},t.prototype.drShiftTo=function(t,e){for(var n=t;n<this.t;++n)e[n-t]=this[n];e.t=Math.max(this.t-t,0),e.s=this.s},t.prototype.lShiftTo=function(t,e){for(var n=t%this.DB,r=this.DB-n,i=(1<<r)-1,o=Math.floor(t/this.DB),s=this.s<<n&this.DM,a=this.t-1;a>=0;--a)e[a+o+1]=this[a]>>r|s,s=(this[a]&i)<<n;for(a=o-1;a>=0;--a)e[a]=0;e[o]=s,e.t=this.t+o+1,e.s=this.s,e.clamp()},t.prototype.rShiftTo=function(t,e){e.s=this.s;var n=Math.floor(t/this.DB);if(n>=this.t)e.t=0;else{var r=t%this.DB,i=this.DB-r,o=(1<<r)-1;e[0]=this[n]>>r;for(var s=n+1;s<this.t;++s)e[s-n-1]|=(this[s]&o)<<i,e[s-n]=this[s]>>r;r>0&&(e[this.t-n-1]|=(this.s&o)<<i),e.t=this.t-n,e.clamp()}},t.prototype.subTo=function(t,e){for(var n=0,r=0,i=Math.min(t.t,this.t);n<i;)r+=this[n]-t[n],e[n++]=r&this.DM,r>>=this.DB;if(t.t<this.t){for(r-=t.s;n<this.t;)r+=this[n],e[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<t.t;)r-=t[n],e[n++]=r&this.DM,r>>=this.DB;r-=t.s}e.s=r<0?-1:0,r<-1?e[n++]=this.DV+r:r>0&&(e[n++]=r),e.t=n,e.clamp()},t.prototype.multiplyTo=function(e,n){var r=this.abs(),i=e.abs(),o=r.t;for(n.t=o+i.t;--o>=0;)n[o]=0;for(o=0;o<i.t;++o)n[o+r.t]=r.am(0,i[o],n,o,0,r.t);n.s=0,n.clamp(),this.s!=e.s&&t.ZERO.subTo(n,n)},t.prototype.squareTo=function(t){for(var e=this.abs(),n=t.t=2*e.t;--n>=0;)t[n]=0;for(n=0;n<e.t-1;++n){var r=e.am(n,e[n],t,2*n,0,1);(t[n+e.t]+=e.am(n+1,2*e[n],t,2*n+1,r,e.t-n-1))>=e.DV&&(t[n+e.t]-=e.DV,t[n+e.t+1]=1)}t.t>0&&(t[t.t-1]+=e.am(n,e[n],t,2*n,0,1)),t.s=0,t.clamp()},t.prototype.divRemTo=function(e,n,r){var i=e.abs();if(!(i.t<=0)){var o=this.abs();if(o.t<i.t)return null!=n&&n.fromInt(0),void(null!=r&&this.copyTo(r));null==r&&(r=m());var s=m(),a=this.s,u=e.s,h=this.DB-A(i[i.t-1]);h>0?(i.lShiftTo(h,s),o.lShiftTo(h,r)):(i.copyTo(s),o.copyTo(r));var l=s.t,c=s[l-1];if(0!=c){var f=c*(1<<this.F1)+(l>1?s[l-2]>>this.F2:0),p=this.FV/f,d=(1<<this.F1)/f,g=1<<this.F2,v=r.t,y=v-l,b=null==n?m():n;for(s.dlShiftTo(y,b),r.compareTo(b)>=0&&(r[r.t++]=1,r.subTo(b,r)),t.ONE.dlShiftTo(l,b),b.subTo(s,s);s.t<l;)s[s.t++]=0;for(;--y>=0;){var w=r[--v]==c?this.DM:Math.floor(r[v]*p+(r[v-1]+g)*d);if((r[v]+=s.am(0,w,r,y,0,l))<w)for(s.dlShiftTo(y,b),r.subTo(b,r);r[v]<--w;)r.subTo(b,r)}null!=n&&(r.drShiftTo(l,n),a!=u&&t.ZERO.subTo(n,n)),r.t=l,r.clamp(),h>0&&r.rShiftTo(h,r),a<0&&t.ZERO.subTo(r,r)}}},t.prototype.invDigit=function(){if(this.t<1)return 0;var t=this[0];if(0==(1&t))return 0;var e=3&t;return(e=(e=(e=(e=e*(2-(15&t)*e)&15)*(2-(255&t)*e)&255)*(2-((65535&t)*e&65535))&65535)*(2-t*e%this.DV)%this.DV)>0?this.DV-e:-e},t.prototype.isEven=function(){return 0==(this.t>0?1&this[0]:this.s)},t.prototype.exp=function(e,n){if(e>4294967295||e<1)return t.ONE;var r=m(),i=m(),o=n.convert(this),s=A(e)-1;for(o.copyTo(r);--s>=0;)if(n.sqrTo(r,i),(e&1<<s)>0)n.mulTo(i,o,r);else{var a=r;r=i,i=a}return n.revert(r)},t}(),v=function(){function t(){}return t.prototype.convert=function(t){return t},t.prototype.revert=function(t){return t},t.prototype.mulTo=function(t,e,n){t.multiplyTo(e,n)},t.prototype.sqrTo=function(t,e){t.squareTo(e)},t}(),y=function(){function t(t){this.m=t}return t.prototype.convert=function(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t},t.prototype.revert=function(t){return t},t.prototype.reduce=function(t){t.divRemTo(this.m,null,t)},t.prototype.mulTo=function(t,e,n){t.multiplyTo(e,n),this.reduce(n)},t.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)},t}(),b=function(){function t(t){this.m=t,this.mp=t.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}return t.prototype.convert=function(t){var e=m();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&e.compareTo(g.ZERO)>0&&this.m.subTo(e,e),e},t.prototype.revert=function(t){var e=m();return t.copyTo(e),this.reduce(e),e},t.prototype.reduce=function(t){for(;t.t<=this.mt2;)t[t.t++]=0;for(var e=0;e<this.m.t;++e){var n=32767&t[e],r=n*this.mpl+((n*this.mph+(t[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(t[n=e+this.m.t]+=this.m.am(0,r,t,e,0,this.m.t);t[n]>=t.DV;)t[n]-=t.DV,t[++n]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)},t.prototype.mulTo=function(t,e,n){t.multiplyTo(e,n),this.reduce(n)},t.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)},t}();function m(){return new g(null)}function w(t,e){return new g(t,e)}"Microsoft Internet Explorer"==window.navigator.appName?(g.prototype.am=function(t,e,n,r,i,o){for(var s=32767&e,a=e>>15;--o>=0;){var u=32767&this[t],h=this[t++]>>15,l=a*u+h*s;i=((u=s*u+((32767&l)<<15)+n[r]+(1073741823&i))>>>30)+(l>>>15)+a*h+(i>>>30),n[r++]=1073741823&u}return i},h=30):"Netscape"!=window.navigator.appName?(g.prototype.am=function(t,e,n,r,i,o){for(;--o>=0;){var s=e*this[t++]+n[r]+i;i=Math.floor(s/67108864),n[r++]=67108863&s}return i},h=26):(g.prototype.am=function(t,e,n,r,i,o){for(var s=16383&e,a=e>>14;--o>=0;){var u=16383&this[t],h=this[t++]>>14,l=a*u+h*s;i=((u=s*u+((16383&l)<<14)+n[r]+i)>>28)+(l>>14)+a*h,n[r++]=268435455&u}return i},h=28),g.prototype.DB=h,g.prototype.DM=(1<<h)-1,g.prototype.DV=1<<h,g.prototype.FV=Math.pow(2,52),g.prototype.F1=52-h,g.prototype.F2=2*h-52;var S,_,x=[];for(S="0".charCodeAt(0),_=0;_<=9;++_)x[S++]=_;for(S="a".charCodeAt(0),_=10;_<36;++_)x[S++]=_;for(S="A".charCodeAt(0),_=10;_<36;++_)x[S++]=_;function D(t,e){var n=x[t.charCodeAt(e)];return null==n?-1:n}function I(t){var e=m();return e.fromInt(t),e}function A(t){var e,n=1;return 0!=(e=t>>>16)&&(t=e,n+=16),0!=(e=t>>8)&&(t=e,n+=8),0!=(e=t>>4)&&(t=e,n+=4),0!=(e=t>>2)&&(t=e,n+=2),0!=(e=t>>1)&&(t=e,n+=1),n}g.ZERO=I(0),g.ONE=I(1);var T,E,P=function(){function t(){this.i=0,this.j=0,this.S=[]}return t.prototype.init=function(t){var e,n,r;for(e=0;e<256;++e)this.S[e]=e;for(n=0,e=0;e<256;++e)n=n+this.S[e]+t[e%t.length]&255,r=this.S[e],this.S[e]=this.S[n],this.S[n]=r;this.i=0,this.j=0},t.prototype.next=function(){var t;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,t=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=t,this.S[t+this.S[this.i]&255]},t}(),B=null;if(null==B){B=[],E=0;var C=void 0;if(window.crypto&&window.crypto.getRandomValues){var R=new Uint32Array(256);for(window.crypto.getRandomValues(R),C=0;C<R.length;++C)B[E++]=255&R[C]}var M=function(t){if(this.count=this.count||0,this.count>=256||E>=256)window.removeEventListener?window.removeEventListener("mousemove",M,!1):window.detachEvent&&window.detachEvent("onmousemove",M);else try{var e=t.x+t.y;B[E++]=255&e,this.count+=1}catch(t){}};window.addEventListener?window.addEventListener("mousemove",M,!1):window.attachEvent&&window.attachEvent("onmousemove",M)}function O(){if(null==T){for(T=new P;E<256;){var t=Math.floor(65536*Math.random());B[E++]=255&t}for(T.init(B),E=0;E<B.length;++E)B[E]=0;E=0}return T.next()}var L=function(){function t(){}return t.prototype.nextBytes=function(t){for(var e=0;e<t.length;++e)t[e]=O()},t}(),k=function(t){function e(n){var r=t.call(this)||this;return n&&("string"==typeof n?r.parseKey(n):(e.hasPrivateKeyProperty(n)||e.hasPublicKeyProperty(n))&&r.parsePropertiesFrom(n)),r}return function(t,e){function n(){this.constructor=t}l(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.parseKey=function(t){try{var e=0,n=0,r=/^\s*(?:[0-9A-Fa-f][0-9A-Fa-f]\s*)+$/.test(t)?Hex.decode(t):c.unarmor(t),i=p.decode(r);if(3===i.sub.length&&(i=i.sub[2].sub[0]),9===i.sub.length){e=i.sub[1].getHexStringValue(),this.n=w(e,16),n=i.sub[2].getHexStringValue(),this.e=parseInt(n,16);var o=i.sub[3].getHexStringValue();this.d=w(o,16);var s=i.sub[4].getHexStringValue();this.p=w(s,16);var a=i.sub[5].getHexStringValue();this.q=w(a,16);var u=i.sub[6].getHexStringValue();this.dmp1=w(u,16);var h=i.sub[7].getHexStringValue();this.dmq1=w(h,16);var l=i.sub[8].getHexStringValue();this.coeff=w(l,16)}else{if(2!==i.sub.length)return!1;var f=i.sub[1].sub[0];e=f.sub[0].getHexStringValue(),this.n=w(e,16),n=f.sub[1].getHexStringValue(),this.e=parseInt(n,16)}return!0}catch(t){return!1}},e}(function(){function t(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}return t.prototype.doPublic=function(t){return t.modPowInt(this.e,this.n)},t.prototype.setPublic=function(t,e){null!=t&&null!=e&&t.length>0&&e.length>0?(this.n=w(t,16),this.e=parseInt(e,16)):console.error("Invalid RSA public key")},t.prototype.encrypt=function(t){var e=function(t,e){if(e<t.length+11)return console.error("Message too long for RSA"),null;for(var n=[],r=t.length-1;r>=0&&e>0;){var i=t.charCodeAt(r--);i<128?n[--e]=i:i>127&&i<2048?(n[--e]=63&i|128,n[--e]=i>>6|192):(n[--e]=63&i|128,n[--e]=i>>6&63|128,n[--e]=i>>12|224)}n[--e]=0;for(var o=new L,s=[];e>2;){for(s[0]=0;0==s[0];)o.nextBytes(s);n[--e]=s[0]}return n[--e]=2,n[--e]=0,new g(n)}(t,this.n.bitLength()+7>>3);if(null==e)return null;var n=this.doPublic(e);if(null==n)return null;var r=n.toString(16);return 0==(1&r.length)?r:"0"+r},t}()),N=function(){function t(t){t=t||{},this.default_key_size=parseInt(t.default_key_size,10)||1024,this.default_public_exponent=t.default_public_exponent||"010001",this.log=t.log||!1,this.key=null}return t.prototype.setKey=function(t){this.log&&this.key&&console.warn("A key was already set, overriding existing."),this.key=new k(t)},t.prototype.setPublicKey=function(t){this.setKey(t)},t.version="3.0.0-rc.1",t}();window.JSEncrypt=N,t.JSEncrypt=N,t.default=N,Object.defineProperty(t,"__esModule",{value:!0})}(e)},function(t,e,n){(function(t,r){var i;(function(){var o={function:!0,object:!0},s=o[typeof window]&&window||this,a=o[typeof e]&&e,u=o[typeof t]&&t&&!t.nodeType&&t,h=a&&u&&"object"==typeof r&&r;!h||h.global!==h&&h.window!==h&&h.self!==h||(s=h);var l=Math.pow(2,53)-1,c=/\bOpera/,f=Object.prototype,p=f.hasOwnProperty,d=f.toString;function g(t){return(t=String(t)).charAt(0).toUpperCase()+t.slice(1)}function v(t){return t=S(t),/^(?:webOS|i(?:OS|P))/.test(t)?t:g(t)}function y(t,e){for(var n in t)p.call(t,n)&&e(t[n],n,t)}function b(t){return null==t?g(t):d.call(t).slice(8,-1)}function m(t){return String(t).replace(/([ -])(?!$)/g,"$1?")}function w(t,e){var n=null;return function(t,e){var n=-1,r=t?t.length:0;if("number"==typeof r&&r>-1&&r<=l)for(;++n<r;)e(t[n],n);else y(t,e)}(t,(function(r,i){n=e(n,r,i,t)})),n}function S(t){return String(t).replace(/^ +| +$/g,"")}var _=function t(e){var n=s,r=e&&"object"==typeof e&&"String"!=b(e);r&&(n=e,e=null);var i=n.navigator||{},o=i.userAgent||"";e||(e=o);var a,u,h,l,f,p=r?!!i.likeChrome:/\bChrome\b/.test(e)&&!/internal|\n/i.test(d.toString()),g=r?"Object":"ScriptBridgingProxyObject",_=r?"Object":"Environment",x=r&&n.java?"JavaPackage":b(n.java),D=r?"Object":"RuntimeObject",I=/\bJava/.test(x)&&n.java,A=I&&b(n.environment)==_,T=I?"a":"α",E=I?"b":"β",P=n.document||{},B=n.operamini||n.opera,C=c.test(C=r&&B?B["[[Class]]"]:b(B))?C:B=null,R=e,M=[],O=null,L=e==o,k=L&&B&&"function"==typeof B.version&&B.version(),N=w([{label:"EdgeHTML",pattern:"Edge"},"Trident",{label:"WebKit",pattern:"AppleWebKit"},"iCab","Presto","NetFront","Tasman","KHTML","Gecko"],(function(t,n){return t||RegExp("\\b"+(n.pattern||m(n))+"\\b","i").exec(e)&&(n.label||n)})),U=w(["Adobe AIR","Arora","Avant Browser","Breach","Camino","Electron","Epiphany","Fennec","Flock","Galeon","GreenBrowser","iCab","Iceweasel","K-Meleon","Konqueror","Lunascape","Maxthon",{label:"Microsoft Edge",pattern:"Edge"},"Midori","Nook Browser","PaleMoon","PhantomJS","Raven","Rekonq","RockMelt",{label:"Samsung Internet",pattern:"SamsungBrowser"},"SeaMonkey",{label:"Silk",pattern:"(?:Cloud9|Silk-Accelerated)"},"Sleipnir","SlimBrowser",{label:"SRWare Iron",pattern:"Iron"},"Sunrise","Swiftfox","Waterfox","WebPositive","Opera Mini",{label:"Opera Mini",pattern:"OPiOS"},"Opera",{label:"Opera",pattern:"OPR"},"Chrome",{label:"Chrome Mobile",pattern:"(?:CriOS|CrMo)"},{label:"Firefox",pattern:"(?:Firefox|Minefield)"},{label:"Firefox for iOS",pattern:"FxiOS"},{label:"IE",pattern:"IEMobile"},{label:"IE",pattern:"MSIE"},"Safari"],(function(t,n){return t||RegExp("\\b"+(n.pattern||m(n))+"\\b","i").exec(e)&&(n.label||n)})),V=Y([{label:"BlackBerry",pattern:"BB10"},"BlackBerry",{label:"Galaxy S",pattern:"GT-I9000"},{label:"Galaxy S2",pattern:"GT-I9100"},{label:"Galaxy S3",pattern:"GT-I9300"},{label:"Galaxy S4",pattern:"GT-I9500"},{label:"Galaxy S5",pattern:"SM-G900"},{label:"Galaxy S6",pattern:"SM-G920"},{label:"Galaxy S6 Edge",pattern:"SM-G925"},{label:"Galaxy S7",pattern:"SM-G930"},{label:"Galaxy S7 Edge",pattern:"SM-G935"},"Google TV","Lumia","iPad","iPod","iPhone","Kindle",{label:"Kindle Fire",pattern:"(?:Cloud9|Silk-Accelerated)"},"Nexus","Nook","PlayBook","PlayStation Vita","PlayStation","TouchPad","Transformer",{label:"Wii U",pattern:"WiiU"},"Wii","Xbox One",{label:"Xbox 360",pattern:"Xbox"},"Xoom"]),F=w({Apple:{iPad:1,iPhone:1,iPod:1},Archos:{},Amazon:{Kindle:1,"Kindle Fire":1},Asus:{Transformer:1},"Barnes & Noble":{Nook:1},BlackBerry:{PlayBook:1},Google:{"Google TV":1,Nexus:1},HP:{TouchPad:1},HTC:{},LG:{},Microsoft:{Xbox:1,"Xbox One":1},Motorola:{Xoom:1},Nintendo:{"Wii U":1,Wii:1},Nokia:{Lumia:1},Samsung:{"Galaxy S":1,"Galaxy S2":1,"Galaxy S3":1,"Galaxy S4":1},Sony:{PlayStation:1,"PlayStation Vita":1}},(function(t,n,r){return t||(n[V]||n[/^[a-z]+(?: +[a-z]+\b)*/i.exec(V)]||RegExp("\\b"+m(r)+"(?:\\b|\\w*\\d)","i").exec(e))&&r})),j=w(["Windows Phone","Android","CentOS",{label:"Chrome OS",pattern:"CrOS"},"Debian","Fedora","FreeBSD","Gentoo","Haiku","Kubuntu","Linux Mint","OpenBSD","Red Hat","SuSE","Ubuntu","Xubuntu","Cygwin","Symbian OS","hpwOS","webOS ","webOS","Tablet OS","Tizen","Linux","Mac OS X","Macintosh","Mac","Windows 98;","Windows "],(function(t,n){var r=n.pattern||m(n);return!t&&(t=RegExp("\\b"+r+"(?:/[\\d.]+|[ \\w.]*)","i").exec(e))&&(t=function(t,e,n){var r={"10.0":"10",6.4:"10 Technical Preview",6.3:"8.1",6.2:"8",6.1:"Server 2008 R2 / 7","6.0":"Server 2008 / Vista",5.2:"Server 2003 / XP 64-bit",5.1:"XP",5.01:"2000 SP1","5.0":"2000","4.0":"NT","4.90":"ME"};return e&&n&&/^Win/i.test(t)&&!/^Windows Phone /i.test(t)&&(r=r[/[\d.]+$/.exec(t)])&&(t="Windows "+r),t=String(t),e&&n&&(t=t.replace(RegExp(e,"i"),n)),v(t.replace(/ ce$/i," CE").replace(/\bhpw/i,"web").replace(/\bMacintosh\b/,"Mac OS").replace(/_PowerPC\b/i," OS").replace(/\b(OS X) [^ \d]+/i,"$1").replace(/\bMac (OS X)\b/,"$1").replace(/\/(\d)/," $1").replace(/_/g,".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i,"").replace(/\bx86\.64\b/gi,"x86_64").replace(/\b(Windows Phone) OS\b/,"$1").replace(/\b(Chrome OS \w+) [\d.]+\b/,"$1").split(" on ")[0])}(t,r,n.label||n)),t}));if(window.BK){var X=BK.getSystemInfoSync();-1!=(V=X.platform).indexOf("ios")?(V=V.replace(/ios/,"iPhone"),e=" OS "+X.osVersion+") "):(V=V.replace(/ios/,"Android"),e=" Android "+X.osVersion+"; ",j="Android "+X.osVersion),k=X.osVersion}function Y(t){return w(t,(function(t,n){var r=n.pattern||m(n);return!t&&(t=RegExp("\\b"+r+" *\\d+[.\\w_]*","i").exec(e)||RegExp("\\b"+r+" *\\w+-[\\w]*","i").exec(e)||RegExp("\\b"+r+"(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)","i").exec(e))&&((t=String(n.label&&!RegExp(r,"i").test(n.label)?n.label:t).split("/"))[1]&&!/[\d.]+/.test(t[0])&&(t[0]+=" "+t[1]),n=n.label||n,t=v(t[0].replace(RegExp(r,"i"),n).replace(RegExp("; *(?:"+n+"[_-])?","i")," ").replace(RegExp("("+n+")[-_.]?(\\w)","i"),"$1 $2"))),t}))}if(N&&(N=[N]),F&&!V&&(V=Y([F])),(a=/\bGoogle TV\b/.exec(V))&&(V=a[0]),/\bSimulator\b/i.test(e)&&(V=(V?V+" ":"")+"Simulator"),"Opera Mini"==U&&/\bOPiOS\b/.test(e)&&M.push("running in Turbo/Uncompressed mode"),"IE"==U&&/\blike iPhone OS\b/.test(e)?(F=(a=t(e.replace(/like iPhone OS/,""))).manufacturer,V=a.product):/^iP/.test(V)?(U||(U="Safari"),j="iOS"+((a=/ OS ([\d_]+)/i.exec(e))||(a=/ OS[^]+?([\d\.]+?) /i.exec(e))?" "+a[1].replace(/_/g,"."):"")):"Konqueror"!=U||/buntu/i.test(j)?F&&"Google"!=F&&(/Chrome/.test(U)&&!/\bMobile Safari\b/i.test(e)||/\bVita\b/.test(V))||/\bAndroid\b/.test(j)&&/^Chrome/.test(U)&&/\bVersion\//i.test(e)?(U="Android Browser",j=/\bAndroid\b/.test(j)?j:"Android"):"Silk"==U?(/\bMobi/i.test(e)||(j="Android",M.unshift("desktop mode")),/Accelerated *= *true/i.test(e)&&M.unshift("accelerated")):"PaleMoon"==U&&(a=/\bFirefox\/([\d.]+)\b/.exec(e))?M.push("identifying as Firefox "+a[1]):"Firefox"==U&&(a=/\b(Mobile|Tablet|TV)\b/i.exec(e))?(j||(j="Firefox OS"),V||(V=a[1])):!U||(a=!/\bMinefield\b/i.test(e)&&/\b(?:Firefox|Safari)\b/.exec(U))?(U&&!V&&/[\/,]|^[^(]+?\)/.test(e.slice(e.indexOf(a+"/")+8))&&(U=null),(a=V||F||j)&&(V||F||/\b(?:Android|Symbian OS|Tablet OS|webOS)\b/.test(j))&&(U=/[a-z]+(?: Hat)?/i.exec(/\bAndroid\b/.test(j)?j:a)+" Browser")):"Electron"==U&&(a=(/\bChrome\/([\d.]+)\b/.exec(e)||0)[1])&&M.push("Chromium "+a):j="Kubuntu",k||(j&&-1!=j.indexOf("Android")&&(V=V||"Android",(a=/ Android[^]+?([\d\.]+?)[\)|;]/i.exec(e))&&(j="Android "+((k=a[1].replace(/_/g,"."))||""))),k||(k=w(["(?:Cloud9|CriOS|CrMo|Edge|FxiOS|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|SamsungBrowser|Silk(?!/[\\d.]+$))","Version",m(U),"(?:Firefox|Minefield|NetFront)"],(function(t,n){return t||(RegExp(n+"(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)","i").exec(e)||0)[1]||null})))),(a=("iCab"==N&&parseFloat(k)>3?"WebKit":/\bOpera\b/.test(U)&&(/\bOPR\b/.test(e)?"Blink":"Presto"))||/\b(?:Midori|Nook|Safari)\b/i.test(e)&&!/^(?:Trident|EdgeHTML)$/.test(N)&&"WebKit"||!N&&/\bMSIE\b/i.test(e)&&("Mac OS"==j?"Tasman":"Trident")||"WebKit"==N&&/\bPlayStation\b(?! Vita\b)/i.test(U)&&"NetFront")&&(N=[a]),"IE"==U&&(a=(/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(e)||0)[1])?(U+=" Mobile",j="Windows Phone "+(/\+$/.test(a)?a:a+".x"),M.unshift("desktop mode")):/\bWPDesktop\b/i.test(e)?(U="IE Mobile",j="Windows Phone 8.x",M.unshift("desktop mode"),k||(k=(/\brv:([\d.]+)/.exec(e)||0)[1])):"IE"!=U&&"Trident"==N&&(a=/\brv:([\d.]+)/.exec(e))&&(U&&M.push("identifying as "+U+(k?" "+k:"")),U="IE",k=a[1]),L){if(l="global",f=null!=(h=n)?typeof h[l]:"number",/^(?:boolean|number|string|undefined)$/.test(f)||"object"==f&&!h[l])b(a=n.runtime)==g?(U="Adobe AIR",j=a.flash.system.Capabilities.os):b(a=n.phantom)==D?(U="PhantomJS",k=(a=a.version||null)&&a.major+"."+a.minor+"."+a.patch):"number"==typeof P.documentMode&&(a=/\bTrident\/(\d+)/i.exec(e))?(k=[k,P.documentMode],(a=+a[1]+4)!=k[1]&&(M.push("IE "+k[1]+" mode"),N&&(N[1]=""),k[1]=a),k="IE"==U?String(k[1].toFixed(1)):k[0]):"number"==typeof P.documentMode&&/^(?:Chrome|Firefox)\b/.test(U)&&(M.push("masking as "+U+" "+k),U="IE",k="11.0",N=["Trident"],j="Windows");else if(I&&(R=(a=I.lang.System).getProperty("os.arch"),j=j||a.getProperty("os.name")+" "+a.getProperty("os.version")),A){try{k=n.require("ringo/engine").version.join("."),U="RingoJS"}catch(t){(a=n.system)&&a.global.system==n.system&&(U="Narwhal",j||(j=a[0].os||null))}U||(U="Rhino")}else"object"==typeof n.process&&!n.process.browser&&(a=n.process)&&("object"==typeof a.versions&&("string"==typeof a.versions.electron?(M.push("Node "+a.versions.node),U="Electron",k=a.versions.electron):"string"==typeof a.versions.nw&&(M.push("Chromium "+k,"Node "+a.versions.node),U="NW.js",k=a.versions.nw)),U||(U="Node.js",R=a.arch,j=a.platform,k=(k=/[\d.]+/.exec(a.version))?k[0]:null));j=j&&v(j)}if(k&&(a=/(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(k)||/(?:alpha|beta)(?: ?\d)?/i.exec(e+";"+(L&&i.appMinorVersion))||/\bMinefield\b/i.test(e)&&"a")&&(O=/b/i.test(a)?"beta":"alpha",k=k.replace(RegExp(a+"\\+?$"),"")+("beta"==O?E:T)+(/\d+\+?/.exec(a)||"")),"Fennec"==U||"Firefox"==U&&/\b(?:Android|Firefox OS)\b/.test(j))U="Firefox Mobile";else if("Maxthon"==U&&k)k=k.replace(/\.[\d.]+/,".x");else if(/\bXbox\b/i.test(V))"Xbox 360"==V&&(j=null),"Xbox 360"==V&&/\bIEMobile\b/.test(e)&&M.unshift("mobile mode");else if(!/^(?:Chrome|IE|Opera)$/.test(U)&&(!U||V||/Browser|Mobi/.test(U))||"Windows CE"!=j&&!/Mobi/i.test(e))if("IE"==U&&L)try{null===n.external&&M.unshift("platform preview")}catch(t){M.unshift("embedded")}else(/\bBlackBerry\b/.test(V)||/\bBB10\b/.test(e))&&(a=(RegExp(V.replace(/ +/g," *")+"/([.\\d]+)","i").exec(e)||0)[1]||k)?(j=((a=[a,/BB10/.test(e)])[1]?(V=null,F="BlackBerry"):"Device Software")+" "+a[0],k=null):this!=y&&"Wii"!=V&&(L&&B||/Opera/.test(U)&&/\b(?:MSIE|Firefox)\b/i.test(e)||"Firefox"==U&&/\bOS X (?:\d+\.){2,}/.test(j)||"IE"==U&&(j&&!/^Win/.test(j)&&k>5.5||/\bWindows XP\b/.test(j)&&k>8||8==k&&!/\bTrident\b/.test(e)))&&!c.test(a=t.call(y,e.replace(c,"")+";"))&&a.name&&(a="ing as "+a.name+((a=a.version)?" "+a:""),c.test(U)?(/\bIE\b/.test(a)&&"Mac OS"==j&&(j=null),a="identify"+a):(a="mask"+a,U=C?v(C.replace(/([a-z])([A-Z])/g,"$1 $2")):"Opera",/\bIE\b/.test(a)&&(j=null),L||(k=null)),N=["Presto"],M.push(a));else U+=" Mobile";(a=(/\bAppleWebKit\/([\d.]+\+?)/i.exec(e)||0)[1])&&(a=[parseFloat(a.replace(/\.(\d)$/,".0$1")),a],"Safari"==U&&"+"==a[1].slice(-1)?(U="WebKit Nightly",O="alpha",k=a[1].slice(0,-1)):k!=a[1]&&k!=(a[2]=(/\bSafari\/([\d.]+\+?)/i.exec(e)||0)[1])||(k=null),a[1]=(/\bChrome\/([\d.]+)/i.exec(e)||0)[1],537.36==a[0]&&537.36==a[2]&&parseFloat(a[1])>=28&&"WebKit"==N&&(N=["Blink"]),L&&(p||a[1])?(N&&(N[1]="like Chrome"),a=a[1]||((a=a[0])<530?1:a<532?2:a<532.05?3:a<533?4:a<534.03?5:a<534.07?6:a<534.1?7:a<534.13?8:a<534.16?9:a<534.24?10:a<534.3?11:a<535.01?12:a<535.02?"13+":a<535.07?15:a<535.11?16:a<535.19?17:a<536.05?18:a<536.1?19:a<537.01?20:a<537.11?"21+":a<537.13?23:a<537.18?24:a<537.24?25:a<537.36?26:"Blink"!=N?"27":"28")):(N&&(N[1]="like Safari"),a=(a=a[0])<400?1:a<500?2:a<526?3:a<533?4:a<534?"4+":a<535?5:a<537?6:a<538?7:a<601?8:"8"),N&&(N[1]+=" "+(a+="number"==typeof a?".x":/[.+]/.test(a)?"":"+")),"Safari"==U&&(!k||parseInt(k)>45)&&(k=a)),"Opera"==U&&(a=/\bzbov|zvav$/.exec(j))?(U+=" ",M.unshift("desktop mode"),"zvav"==a?(U+="Mini",k=null):U+="Mobile",j=j.replace(RegExp(" *"+a+"$"),"")):"Safari"==U&&/\bChrome\b/.exec(N&&N[1])&&(M.unshift("desktop mode"),U="Chrome Mobile",k=null,/\bOS X\b/.test(j)?(F="Apple",j="iOS 4.3+"):j=null),k&&0==k.indexOf(a=/[\d.]+$/.exec(j))&&e.indexOf("/"+a+"-")>-1&&(j=S(j.replace(a,""))),N&&!/\b(?:Avant|Nook)\b/.test(U)&&(/Browser|Lunascape|Maxthon/.test(U)||"Safari"!=U&&/^iOS/.test(j)&&/\bSafari\b/.test(N[1])||/^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Samsung Internet|Sleipnir|Web)/.test(U)&&N[1])&&(a=N[N.length-1])&&M.push(a),M.length&&(M=["("+M.join("; ")+")"]),F&&V&&V.indexOf(F)<0&&M.push("on "+F),V&&M.push((/^on /.test(M[M.length-1])?"":"on ")+V),j&&(a=/ ([\d.+]+)$/.exec(j),u=a&&"/"==j.charAt(j.length-a[0].length-1),j={architecture:32,family:a&&!u?j.replace(a[0],""):j,version:a?a[1]:null,toString:function(){var t=this.version;return this.family+(t&&!u?" "+t:"")+(64==this.architecture?" 64-bit":"")}}),(a=/\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(R))&&!/\bi686\b/i.test(R)?(j&&(j.architecture=64,j.family=j.family.replace(RegExp(" *"+a),"")),U&&(/\bWOW64\b/i.test(e)||L&&/\w(?:86|32)$/.test(i.cpuClass||i.platform)&&!/\bWin64; x64\b/i.test(e))&&M.unshift("32-bit")):j&&/^OS X/.test(j.family)&&"Chrome"==U&&parseFloat(k)>=39&&(j.architecture=64),e||(e=null);var K={};K.description=e,K.layout=N&&N[0],K.manufacturer=F,K.name=U,K.prerelease=O,K.product=V,K.ua=e,K.version=U&&k,K.os=j||{architecture:null,family:null,version:null,toString:function(){return"null"}};var W=window.my||window.hbs||window.qg||window.wx||window.tt||window.loadRuntime&&window.loadRuntime();return W&&W.getSystemInfo&&(K.runtimeMask=!0,K.product="",K.manufacturer="",K.os.version="",W.getSystemInfo({success:function(t){K.product=t.model,K.manufacturer=t.brand||"";var e=/Android[^]+?([\d\.]+?)\s/i.exec(t.system+" ");e&&e.length>1?K.os.version=e[1].replace(/_/g,"."):K.os.version=t.system,K.runtimeMask=!1},fail:function(){K.runtimeMask=!1},complete:function(){K.runtimeMask=!1}})),K.parse=t,K.toString=function(){return this.description||""},K.version&&M.unshift(k),K.name&&M.unshift(U),j&&U&&(j!=String(j).split(" ")[0]||j!=U.split(" ")[0]&&!V)&&M.push(V?"("+j+")":"on "+j),M.length&&(K.description=M.join(" ")),K}();s.platform=_,void 0===(i=function(){return _}.call(e,n,e,t))||(t.exports=i)}).call(this)}).call(this,n(1)(t),n(0))},function(t,e,n){var r,i,o,s,a;r=n(13),i=n(2).utf8,o=n(14),s=n(2).bin,(a=function(t,e){t.constructor==String?t=e&&"binary"===e.encoding?s.stringToBytes(t):i.stringToBytes(t):o(t)?t=Array.prototype.slice.call(t,0):Array.isArray(t)||(t=t.toString());for(var n=r.bytesToWords(t),u=8*t.length,h=1732584193,l=-271733879,c=-1732584194,f=271733878,p=0;p<n.length;p++)n[p]=16711935&(n[p]<<8|n[p]>>>24)|4278255360&(n[p]<<24|n[p]>>>8);n[u>>>5]|=128<<u%32,n[14+(u+64>>>9<<4)]=u;var d=a._ff,g=a._gg,v=a._hh,y=a._ii;for(p=0;p<n.length;p+=16){var b=h,m=l,w=c,S=f;h=d(h,l,c,f,n[p+0],7,-680876936),f=d(f,h,l,c,n[p+1],12,-389564586),c=d(c,f,h,l,n[p+2],17,606105819),l=d(l,c,f,h,n[p+3],22,-1044525330),h=d(h,l,c,f,n[p+4],7,-176418897),f=d(f,h,l,c,n[p+5],12,1200080426),c=d(c,f,h,l,n[p+6],17,-1473231341),l=d(l,c,f,h,n[p+7],22,-45705983),h=d(h,l,c,f,n[p+8],7,1770035416),f=d(f,h,l,c,n[p+9],12,-1958414417),c=d(c,f,h,l,n[p+10],17,-42063),l=d(l,c,f,h,n[p+11],22,-1990404162),h=d(h,l,c,f,n[p+12],7,1804603682),f=d(f,h,l,c,n[p+13],12,-40341101),c=d(c,f,h,l,n[p+14],17,-1502002290),h=g(h,l=d(l,c,f,h,n[p+15],22,1236535329),c,f,n[p+1],5,-165796510),f=g(f,h,l,c,n[p+6],9,-1069501632),c=g(c,f,h,l,n[p+11],14,643717713),l=g(l,c,f,h,n[p+0],20,-373897302),h=g(h,l,c,f,n[p+5],5,-701558691),f=g(f,h,l,c,n[p+10],9,38016083),c=g(c,f,h,l,n[p+15],14,-660478335),l=g(l,c,f,h,n[p+4],20,-405537848),h=g(h,l,c,f,n[p+9],5,568446438),f=g(f,h,l,c,n[p+14],9,-1019803690),c=g(c,f,h,l,n[p+3],14,-187363961),l=g(l,c,f,h,n[p+8],20,1163531501),h=g(h,l,c,f,n[p+13],5,-1444681467),f=g(f,h,l,c,n[p+2],9,-51403784),c=g(c,f,h,l,n[p+7],14,1735328473),h=v(h,l=g(l,c,f,h,n[p+12],20,-1926607734),c,f,n[p+5],4,-378558),f=v(f,h,l,c,n[p+8],11,-2022574463),c=v(c,f,h,l,n[p+11],16,1839030562),l=v(l,c,f,h,n[p+14],23,-35309556),h=v(h,l,c,f,n[p+1],4,-1530992060),f=v(f,h,l,c,n[p+4],11,1272893353),c=v(c,f,h,l,n[p+7],16,-155497632),l=v(l,c,f,h,n[p+10],23,-1094730640),h=v(h,l,c,f,n[p+13],4,681279174),f=v(f,h,l,c,n[p+0],11,-358537222),c=v(c,f,h,l,n[p+3],16,-722521979),l=v(l,c,f,h,n[p+6],23,76029189),h=v(h,l,c,f,n[p+9],4,-640364487),f=v(f,h,l,c,n[p+12],11,-421815835),c=v(c,f,h,l,n[p+15],16,530742520),h=y(h,l=v(l,c,f,h,n[p+2],23,-995338651),c,f,n[p+0],6,-198630844),f=y(f,h,l,c,n[p+7],10,1126891415),c=y(c,f,h,l,n[p+14],15,-1416354905),l=y(l,c,f,h,n[p+5],21,-57434055),h=y(h,l,c,f,n[p+12],6,1700485571),f=y(f,h,l,c,n[p+3],10,-1894986606),c=y(c,f,h,l,n[p+10],15,-1051523),l=y(l,c,f,h,n[p+1],21,-2054922799),h=y(h,l,c,f,n[p+8],6,1873313359),f=y(f,h,l,c,n[p+15],10,-30611744),c=y(c,f,h,l,n[p+6],15,-1560198380),l=y(l,c,f,h,n[p+13],21,1309151649),h=y(h,l,c,f,n[p+4],6,-145523070),f=y(f,h,l,c,n[p+11],10,-1120210379),c=y(c,f,h,l,n[p+2],15,718787259),l=y(l,c,f,h,n[p+9],21,-343485551),h=h+b>>>0,l=l+m>>>0,c=c+w>>>0,f=f+S>>>0}return r.endian([h,l,c,f])})._ff=function(t,e,n,r,i,o,s){var a=t+(e&n|~e&r)+(i>>>0)+s;return(a<<o|a>>>32-o)+e},a._gg=function(t,e,n,r,i,o,s){var a=t+(e&r|n&~r)+(i>>>0)+s;return(a<<o|a>>>32-o)+e},a._hh=function(t,e,n,r,i,o,s){var a=t+(e^n^r)+(i>>>0)+s;return(a<<o|a>>>32-o)+e},a._ii=function(t,e,n,r,i,o,s){var a=t+(n^(e|~r))+(i>>>0)+s;return(a<<o|a>>>32-o)+e},a._blocksize=16,a._digestsize=16,t.exports=function(t,e){if(null==t)throw new Error("Illegal argument "+t);var n=r.wordsToBytes(a(t,e));return e&&e.asBytes?n:e&&e.asString?s.bytesToString(n):r.bytesToHex(n)}},function(t,e){var n,r;n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r={rotl:function(t,e){return t<<e|t>>>32-e},rotr:function(t,e){return t<<32-e|t>>>e},endian:function(t){if(t.constructor==Number)return 16711935&r.rotl(t,8)|4278255360&r.rotl(t,24);for(var e=0;e<t.length;e++)t[e]=r.endian(t[e]);return t},randomBytes:function(t){for(var e=[];t>0;t--)e.push(Math.floor(256*Math.random()));return e},bytesToWords:function(t){for(var e=[],n=0,r=0;n<t.length;n++,r+=8)e[r>>>5]|=t[n]<<24-r%32;return e},wordsToBytes:function(t){for(var e=[],n=0;n<32*t.length;n+=8)e.push(t[n>>>5]>>>24-n%32&255);return e},bytesToHex:function(t){for(var e=[],n=0;n<t.length;n++)e.push((t[n]>>>4).toString(16)),e.push((15&t[n]).toString(16));return e.join("")},hexToBytes:function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(parseInt(t.substr(n,2),16));return e},bytesToBase64:function(t){for(var e=[],r=0;r<t.length;r+=3)for(var i=t[r]<<16|t[r+1]<<8|t[r+2],o=0;o<4;o++)8*r+6*o<=8*t.length?e.push(n.charAt(i>>>6*(3-o)&63)):e.push("=");return e.join("")},base64ToBytes:function(t){t=t.replace(/[^A-Z0-9+\/]/gi,"");for(var e=[],r=0,i=0;r<t.length;i=++r%4)0!=i&&e.push((n.indexOf(t.charAt(r-1))&Math.pow(2,-2*i+8)-1)<<2*i|n.indexOf(t.charAt(r))>>>6-2*i);return e}},t.exports=r},function(t,e){function n(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}t.exports=function(t){return null!=t&&(n(t)||function(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&n(t.slice(0,0))}(t)||!!t._isBuffer)}},function(t,e,n){var r=function(t){t.extends(this)};r.prototype={onStarted:function(t,e){if(e&&t&&0!=t.replace(/\s/g,"").length){var n=this._generatePostData({eventTag:"started",eventID:t,eventValue:e});this._upload(n)}else console.log("eventID 不能为空!")},onSuccess:function(t,e){if(e&&t&&0!=t.replace(/\s/g,"").length){var n=this._generatePostData({eventTag:"successed",eventID:t,eventValue:e});this._upload(n)}else console.log("eventID 不能为空!")},onCancelled:function(t,e){if(e&&t&&0!=t.replace(/\s/g,"").length){var n=this._generatePostData({eventTag:"cancelled",eventID:t,eventValue:e});this._upload(n)}else console.log("eventID 不能为空!")},onFailed:function(t,e,n){if(e&&t&&0!=t.replace(/\s/g,"").length){var r=this._generatePostData({eventTag:"failed",eventID:t,eventFailDesc:n,eventValue:e});this._upload(r)}else console.log("eventID 不能为空!")}},t.exports=r},function(t,e,n){var r=function(t){t.extends(this)};r.prototype={loginStart:function(t){this.data.channel=t&&t.channel||"";var e=this._generatePostData({eventTag:"started",eventID:"login"});this._upload(e)},loginSuccess:function(t){if(t&&t.userID){this.data.age=t.age||0,this.data.sex=t.sex||0;var e=t.channel||this.data.channel,n=this._getLocalStorage("onlineDuration"),r=this._getLocalStorage("_UID_"+this.data.appID)||"";r.length>0&&parseInt(n)>0&&(this.data.userID=r,this.logout()),this.data.channel=e,this.data.userID=t.userID,this._addLocalStorage("_UID_"+this.data.appID,this.data.userID),this._addLocalStorage("__SDK_CHANNEL_",this.data.channel);var i=this._generatePostData({onlineDuration:0,eventTag:"successed",eventID:"login"});this._upload(i),this._addLocalStorage("onlineDuration",0),this._setHeartBeat(!0)}else console.log("userID 不能为空!")},loginFailed:function(t){if(t){var e=t;"string"!=typeof t&&(this.data.channel=t.channel,e=t.reason);var n=this._generatePostData({exitFailDesc:e||"",eventTag:"failed",eventID:"login"});this._upload(n)}else console.log("loginFailed 参数不能为空!")},logout:function(){this.data.channel=this._getLocalStorage("__SDK_CHANNEL_")||"";var t=this._getLocalStorage("onlineDuration")||0,e=this._generatePostData({onlineDuration:t,exitTag:"successed",eventID:"logout"});this._upload(e),this.data.userID="",this._setHeartBeat(!1),this._addLocalStorage("onlineDuration",0),this._addLocalStorage("__SDK_CHANNEL_",""),this._addLocalStorage("_UID_"+this.data.appID,"")},setAccountType:function(t){var e=this._generatePostData({eventTag:"successed",eventID:"role",eventValue:{action:"update",accountType:t}});this._upload(e)},setAge:function(t){t&&(this.data.age=t)},setGender:function(t){0==t||1==t||2==t?t&&(this.data.aex=t):console.log("gender 为 int 类型：0 未知、1 男性、 2 女性")},createRole:function(t){var e={action:"createRole",roleID:t.roleID,userName:t.userName,race:t.race,class:t.class,gameServer:t.gameServer},n=this._generatePostData({eventTag:"successed",eventID:"role",eventValue:e});this._upload(n)},setLevel:function(t){var e=this._generatePostData({eventTag:"successed",eventID:"role",eventValue:{action:"update",level:t}});this._upload(e)}},t.exports=r},function(t,e,n){var r=function(t){t.extends(this)};r.prototype={onEvent:function(t){if(t&&t.eventName&&0!=t.eventName.replace(/\s/g,"").length){var e=this._generatePostData({eventTag:"successed",eventID:t.eventName});this._upload(e)}else console.log("eventName 不能为空或者包含空格!")},onEventStart:function(t){if(t&&t.eventName&&0!=t.eventName.replace(/\s/g,"").length){var e=this._generatePostData({eventTag:"started",eventID:t.eventName});this._upload(e)}else console.log("eventName 不能为空或者包含空格!")},onEventEnd:function(t){if(t&&t.eventName&&0!=t.eventName.replace(/\s/g,"").length){var e=this._generatePostData({eventTag:"successed",eventID:t.eventName});this._upload(e)}else console.log("eventName 不能为空或者包含空格!")}},t.exports=r},function(t,e,n){var r=function(t){t.extends(this)};r.prototype={payBegin:function(t){var e=this._generatePostData({expendTag:"started",eventID:"pay",eventValue:{orderID:t.orderID,accountID:t.accountID,partner:t.partner||"",currencyAmount:t.amount,currencyType:t.currencyType,virtualCurrencyAmount:t.virtualCurrencyAmount||"0",subjectID:t.iapID||"",paymentType:t.payType||"",gameServer:t.gameServer||"",level:t.level||"",mission:t.mission||""}});this._upload(e)},paySuccess:function(t){var e=this._generatePostData({expendTag:"successed",eventID:"pay",eventValue:{orderID:t.orderID,accountID:t.accountID,partner:t.partner||"",currencyAmount:t.amount,currencyType:t.currencyType,virtualCurrencyAmount:t.virtualCurrencyAmount||"0",subjectID:t.iapID||"",paymentType:t.payType||"",gameServer:t.gameServer||"",level:t.level||"",mission:t.mission||""}});this._upload(e)},payFailed:function(t){var e=this._generatePostData({expendTag:"failed",eventID:"pay",expendFailDesc:t.reason||"",eventValue:{orderID:t.orderID,accountID:t.accountID,partner:t.partner||"",currencyAmount:t.amount,currencyType:t.currencyType,virtualCurrencyAmount:t.virtualCurrencyAmount||"0",subjectID:t.iapID||"",paymentType:t.payType||"",gameServer:t.gameServer||"",level:t.level||"",mission:t.mission||""}});this._upload(e)},payCanceled:function(t){var e=this._generatePostData({expendTag:"cancelled",eventID:"pay",eventValue:{orderID:t.orderID,accountID:t.accountID,partner:t.partner||"",currencyAmount:t.amount,currencyType:t.currencyType,virtualCurrencyAmount:t.virtualCurrencyAmount||"0",subjectID:t.iapID||"",paymentType:t.payType||"",gameServer:t.gameServer||"",level:t.level||"",mission:t.mission||""}});this._upload(e)}},t.exports=r},function(t,e,n){var r=function(t){t.extends(this)};r.prototype={begin:function(t){if(t&&t.level){var e=this._generatePostData({eventTag:"started",eventID:"barrier",eventValue:{level:t.level}});this._upload(e)}else console.log("level 不能为空!")},complete:function(t){if(t&&t.level){var e=this._generatePostData({eventTag:"successed",eventID:"barrier",eventValue:{level:t.level}});this._upload(e)}else console.log("level 不能为空!")},failed:function(t,e){if(t&&t.level){var n=this._generatePostData({eventTag:"failed",eventID:"barrier",eventFailDesc:t.reason||e,eventValue:{level:t.level}});this._upload(n)}else console.log("level 不能为空!")}},t.exports=r},function(t,e,n){var r=function(t){t.extends(this)};r.prototype={begin:function(t){if(t&&t.taskID){var e=this._generatePostData({eventTag:"started",eventID:"task",eventValue:{taskID:t.taskID,taskType:t.type}});this._upload(e)}else console.log("taskID 不能为空!")},complete:function(t){if(t&&t.taskID){var e=this._generatePostData({eventTag:"successed",eventID:"task",eventValue:{taskID:t.taskID}});this._upload(e)}else console.log("taskID 不能为空!")},failed:function(t){if(t&&t.taskID){var e=this._generatePostData({eventTag:"failed",eventID:"task",eventFailDesc:t.reason||"",eventValue:{taskID:t.taskID}});this._upload(e)}else console.log("taskID 不能为空!")}},t.exports=r},function(t,e,n){var r=function(t){t.extends(this)};r.prototype={buy:function(t){var e={action:"buy",itemID:t.itemID,itemType:t.itemType,itemCount:t.itemCount,virtualCoin:t.virtualCoin,virtualType:t.virtualType,consumePoint:t.consumePoint},n=this._generatePostData({eventTag:"successed",eventID:"item",eventValue:e});this._upload(n)},get:function(t){var e={action:"get",itemID:t.itemID,itemType:t.itemType,itemCount:t.itemCount,reason:t.reason},n=this._generatePostData({eventTag:"successed",eventID:"item",eventValue:e});this._upload(n)},consume:function(t){var e={action:"consume",itemID:t.itemID,itemType:t.itemType,itemCount:t.itemCount,reason:t.reason},n=this._generatePostData({eventTag:"successed",eventID:"item",eventValue:e});this._upload(n)}},t.exports=r},function(t,e,n){var r=function(t){t.extends(this)};r.prototype={setVirtualNum:function(t){var e={action:"set",type:t.type,count:t.count},n=this._generatePostData({eventTag:"successed",eventID:"virtual",eventValue:e});this._upload(n)},get:function(t){var e={action:"get",type:t.type,count:t.count,reason:t.reason},n=this._generatePostData({eventTag:"successed",eventID:"virtual",eventValue:e});this._upload(n)},consume:function(t){var e={action:"consume",type:t.type,count:t.count,reason:t.reason},n=this._generatePostData({eventTag:"successed",eventID:"virtual",eventValue:e});this._upload(n)}},t.exports=r},function(t,e,n){var r=function(t){};r.prototype={GuideLine:1,MainLine:2,BranchLine:3,Daily:4,Activity:5,Other:100},t.exports=r},function(t,e,n){var r=function(t){t.extends(this)};r.prototype={begin:function(t){if(t&&t.adID){var e=this._generatePostData({eventTag:"started",eventID:"advertising",eventValue:{ID:t.adID}});this._upload(e)}else console.log("adID 不能为空!")},complete:function(t){if(t&&t.adID&&t.timeLong&&t.profit){var e=this._generatePostData({eventTag:"successed",eventID:"advertising",eventValue:{ID:t.adID,timeLong:t.timeLong,profit:t.profit}});this._upload(e)}else console.log("adID 不能为空!")},failed:function(t){if(t&&t.adID){var e=this._generatePostData({eventTag:"failed",eventID:"advertising",eventFailDesc:t.reason||"",eventValue:{ID:t.adID}});this._upload(e)}else console.log("adID 不能为空!")}},t.exports=r}]),r=t("default",o.exports)}));t("__cjsMetaURL",e.meta.url)}}}));

System.register("chunks:///_virtual/colliderItem.ts",["cc","./constant.ts","./clientEvent.ts","./localConfig.ts","./poolManager.ts","./audioManager.ts","./gameLogic.ts","./effectManager.ts","./fightMap.ts","./player.ts","./gameManager.ts"],(function(e){"use strict";var i,t,n,o,r,l,a,s,c,E,_,d,h,u,p,O,N,P,f,C,I,m,L,R;return{setters:[function(e){i=e.cclegacy,t=e.Vec3,n=e._decorator,o=e.Enum,r=e.BoxColliderComponent,l=e.CylinderColliderComponent,a=e.CapsuleColliderComponent,s=e.MeshColliderComponent,c=e.MeshRenderer,E=e.RigidBodyComponent,_=e.isValid,d=e.AnimationComponent,h=e.Quat,u=e.Component},function(e){p=e.constant},function(e){O=e.clientEvent},function(e){N=e.localConfig},function(e){P=e.poolManager},function(e){f=e.AudioManager},function(e){C=e.GameLogic},function(e){I=e.EffectManager},function(e){m=e.FightMap},function(e){L=e.Player},function(e){R=e.GameManager}],execute:function(){var v,T,y,g,A,b,D;function S(e,i,t,n){t&&Object.defineProperty(e,i,{enumerable:t.enumerable,configurable:t.configurable,writable:t.writable,value:t.initializer?t.initializer.call(n):void 0})}function M(e,i){for(var t=0;t<i.length;t++){var n=i[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function B(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function G(e,i,t){return i in e?Object.defineProperty(e,i,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[i]=t,e}i._RF.push({},"52708yzRJRNKKmsD4pqaco/","colliderItem",void 0);var Y=new t,k=new t,H=new t(0,1.35,1),V=new t(0,1.35,1),w=new t(0,.5,0),U=new t(0,.5,0),W=new t(0,.25,0),x=n.ccclass,K=n.property,z=o({WALL:1,MACE_SECTOR:2,MACE_LEFT_RIGHT:3,ROTATING_RING:4,ORGAN_DOOR:5,ORGAN_BTN:6,BOX:7,GOLD:8,DIAMOND:9,KEY:10,COLOR_LIGHT_RED:11,COLOR_LIGHT_PURPLE:12,COLOR_LIGHT_YELLOW:13,COLOR_LIGHT_GREEN:14,PEOPLE_RED:15,PEOPLE_PURPLE:16,PEOPLE_YELLOW:17,PEOPLE_GREEN:18,END_NORMAL:19,PUT_UP_CAMERA:20,END_LINE:21,END_REWARD:22,END_BOSS:23,ENEMY:24,BOSS:25,WEAPON:26,ROTATING_BLADE:27,SPINE_ROAD:28,BRICK:29,RUN_HIT_WALL_EFFECT:30});e("ColliderItem",(v=x("ColliderItem"),T=K({type:z,displayOrder:1}),v((D=b=function(e){var i,n;function o(){for(var i,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return S(B(i=e.call.apply(e,[this].concat(o))||this),"colliderName",A,B(i)),G(B(i),"colliderCom",null),G(B(i),"ani",null),G(B(i),"_curQuat",new h),G(B(i),"_rotatingBladeDirection",1),G(B(i),"_oriScale",new t),G(B(i),"_oriWorPos",new t),G(B(i),"_isInhaling",!1),G(B(i),"_isOnSpineRoad",!1),G(B(i),"_checkInterval",1),G(B(i),"_curMat",null),G(B(i),"_oriMat",null),G(B(i),"_timer",null),i}n=e,(i=o).prototype=Object.create(n.prototype),i.prototype.constructor=i,i.__proto__=n;var u,v,T,y=o.prototype;return y.onLoad=function(){this.colliderCom=this.node.getComponent(r)||this.node.getComponent(l)||this.node.getComponent(a)||this.node.getComponent(s),this.colliderCom||console.error("this node does not have collider component")},y.onEnable=function(){this.colliderCom.isTrigger?this.colliderCom.on("onTriggerEnter",this._onTriggerEnterCb,this):this.colliderCom.on("onCollisionEnter",this._onCollisionEnterCb,this),this.colliderName===o.COLLIDER_NAME.SPINE_ROAD&&(this.colliderCom.on("onTriggerStay",this._onTriggerStayCb,this),this.colliderCom.on("onTriggerExit",this._onTriggerExitCb,this)),O.on(p.EVENT_TYPE.ON_BOX_HIT,this._onBoxHit,this),O.on(p.EVENT_TYPE.ON_BOX_OPEN,this._onBoxOpen,this),O.on(p.EVENT_TYPE.PEOPLE_BECOME_SAME_SKIN,this._peopleBecomeSameSkin,this),O.on(p.EVENT_TYPE.PEOPLE_RECOVERY_ORI_SKIN,this._peopleRecoveryOriSkin,this)},y.onDisable=function(){this.colliderCom.isTrigger?this.colliderCom.off("onTriggerEnter",this._onTriggerEnterCb,this):this.colliderCom.off("onCollisionEnter",this._onCollisionEnterCb,this),this.colliderName===o.COLLIDER_NAME.SPINE_ROAD&&(this.colliderCom.off("onTriggerStay",this._onTriggerStayCb,this),this.colliderCom.off("onTriggerExit",this._onTriggerExitCb,this)),O.off(p.EVENT_TYPE.ON_BOX_HIT,this._onBoxHit,this),O.off(p.EVENT_TYPE.ON_BOX_OPEN,this._onBoxOpen,this),O.off(p.EVENT_TYPE.PEOPLE_BECOME_SAME_SKIN,this._peopleBecomeSameSkin,this),O.off(p.EVENT_TYPE.PEOPLE_RECOVERY_ORI_SKIN,this._peopleRecoveryOriSkin,this)},y.start=function(){this._oriScale=this.node.getScale(),this._oriWorPos=this.node.getWorldPosition()},y.init=function(){if(this.colliderName===z.PEOPLE_GREEN||this.colliderName===z.PEOPLE_RED||this.colliderName===z.PEOPLE_YELLOW){var e=this.node.getChildByName("people"),i=null==e?void 0:e.getComponent(c);this._oriMat&&this._curMat&&this._curMat!==this._oriMat?R.scriptPlayer&&R.scriptPlayer.isInvincible?(this._curMat=R.peopleInvincibleMaterial,null==i||i.setMaterial(this._curMat,0)):null==i||i.setMaterial(this._oriMat,0):R.scriptPlayer&&R.scriptPlayer.isInvincible&&(this._oriMat=i.getMaterial(0),this._curMat=R.peopleInvincibleMaterial,null==i||i.setMaterial(this._curMat,0))}},y._onTriggerEnterCb=function(e){this._hitPlayer(e.otherCollider)},y._onCollisionEnterCb=function(e){this._hitPlayer(e.otherCollider)},y._hitPlayer=function(e){var i,t,n,o=this;if(e.getGroup()==p.GROUP_TYPE.PLAYER&&!R.isGameOver&&R.ndPlayer)switch(this.colliderName){case z.WALL:var r,l;r=null===(i=this.node.getChildByName("brick01Group"))||void 0===i?void 0:i.getComponentsInChildren(E),l=null===(t=this.node.getChildByName("brick02Group"))||void 0===t?void 0:t.getComponentsInChildren(E),(null===(n=r)||void 0===n?void 0:n.concat(l)).forEach((function(e){e.enabled=!0,e.useGravity=!0,e.wakeUp(),e.mass=.15,e.linearDamping=.07,e.angularDamping=.07})),this._timer=setTimeout((function(){if(_(o.node)&&o.node.parent){var e,i,t;r=null===(e=o.node.getChildByName("brick01Group"))||void 0===e?void 0:e.getComponentsInChildren(E),l=null===(i=o.node.getChildByName("brick02Group"))||void 0===i?void 0:i.getComponentsInChildren(E);var n=null===(t=r)||void 0===t?void 0:t.concat(l);n.length&&n.forEach((function(e){e.clearState(),e.type=E.Type.STATIC}))}}),4e3),R.scriptPlayer.hitWall(),C.vibrateShort();break;case z.MACE_SECTOR:if(this._checkIsEffective()){var a=N.instance.queryByID("module","5001");R.scriptPlayer.updateVolume(-a.reduceVolume,p.UPDATE_VOLUME_TYPE.HIT_BY_COLLIDER),C.vibrateShort()}break;case z.ROTATING_RING:if(this._checkIsEffective()){var s=N.instance.queryByID("module","1201");R.scriptPlayer.updateVolume(-s.reduceVolume,p.UPDATE_VOLUME_TYPE.HIT_BY_COLLIDER),C.vibrateShort()}break;case z.ORGAN_DOOR:if(this._checkIsEffective()){var c=N.instance.queryByID("module","4001");R.scriptPlayer.updateVolume(-c.reduceVolume,p.UPDATE_VOLUME_TYPE.HIT_BY_COLLIDER),C.vibrateShort()}break;case z.ROTATING_BLADE:if(this._checkIsEffective()){var d=N.instance.queryByID("module","1101");R.scriptPlayer.updateVolume(-d.reduceVolume,p.UPDATE_VOLUME_TYPE.HIT_BY_COLLIDER),C.vibrateShort()}break;case z.DIAMOND:P.instance.putNode(this.node),I.instance.playEffect(R.scriptPlayer.node,"collectColor/collectPurple",!0,!0,.4,3*L.scaleRatio,H),O.dispatchEvent(p.EVENT_TYPE.REFRESH_DIAMOND),O.dispatchEvent("constant.EVENT_TYPE.CHANGE_SKIN, this.colliderName"),f.instance.playSound(p.AUDIO_SOUND.DIAMOND_COLLECT),this._isInhaling=!1,C.vibrateShort();break;case z.KEY:P.instance.putNode(this.node),I.instance.playEffect(R.scriptPlayer.node,"collectColor/collectYellow",!0,!0,.4,3*L.scaleRatio,V),R.addKey(),O.dispatchEvent(p.EVENT_TYPE.CHANGE_SKIN,this.colliderName),f.instance.playSound(p.AUDIO_SOUND.COLLECT_KEY),this._isInhaling=!1,C.vibrateShort();break;case z.COLOR_LIGHT_RED:O.dispatchEvent(p.EVENT_TYPE.CHANGE_SKIN,this.colliderName),I.instance.playEffect(R.scriptPlayer.node,"changeColor/changeRed",!0,!0,1,2*L.scaleRatio,U),f.instance.playSound(p.AUDIO_SOUND.CHANGE_COLOR),C.vibrateShort();break;case z.COLOR_LIGHT_GREEN:O.dispatchEvent(p.EVENT_TYPE.CHANGE_SKIN,this.colliderName),I.instance.playEffect(R.scriptPlayer.node,"changeColor/changeGreen",!0,!0,1,2*L.scaleRatio,U),f.instance.playSound(p.AUDIO_SOUND.CHANGE_COLOR),C.vibrateShort();break;case z.COLOR_LIGHT_YELLOW:O.dispatchEvent(p.EVENT_TYPE.CHANGE_SKIN,this.colliderName),I.instance.playEffect(R.scriptPlayer.node,"changeColor/changeYellow",!0,!0,1,2*L.scaleRatio,U),f.instance.playSound(p.AUDIO_SOUND.CHANGE_COLOR),C.vibrateShort();break;case z.PEOPLE_RED:case z.PEOPLE_YELLOW:case z.PEOPLE_GREEN:R.scriptPlayer.hitPeople(this.colliderName),O.dispatchEvent(p.EVENT_TYPE.CHANGE_SKIN,this.colliderName),P.instance.putNode(this.node),this._isInhaling=!1,C.vibrateShort();break;case z.END_LINE:O.dispatchEvent(p.EVENT_TYPE.ARRIVE_END_LINE),R.isRevive=!1,R.isArriveEndLine=!0;break;case z.WEAPON:O.dispatchEvent(p.EVENT_TYPE.WEAPON_HIT_PLAYER);break;case z.RUN_HIT_WALL_EFFECT:I.instance.playHitEffect(R.scriptPlayer.node,m.ndWall,w),setTimeout((function(){var e=N.instance.queryByID("module","9001");R.scriptPlayer.volume-e.reduceVolume-10>0||R.scriptPlayer.isInvincible?R.scriptPlayer.scriptManModel.playAni(p.ANI_TYPE.RUN_HIT,!1,(function(){R.scriptPlayer.scriptManModel.playAni(p.ANI_TYPE.RUN,!0)})):R.scriptPlayer.scriptManModel.playAni(p.ANI_TYPE.RUN_HIT)}),100);break;case z.BRICK:case z.SPINE_ROAD:break;default:console.warn("colliderName not found",this.colliderName)}},y._onTriggerStayCb=function(){this._isOnSpineRoad=!0},y._onTriggerExitCb=function(){this._isOnSpineRoad=!1,O.dispatchEvent(p.EVENT_TYPE.RECOVERY_ORI_SPEED)},y._onBoxHit=function(){if(this.colliderName==z.BOX){this.node.setPosition(Y),this.node.eulerAngles=Y;var e=this.node.getComponent(d);if(e.getState("boxHit").isPlaying)return;e.play("boxHit"),I.instance.playEffect(this.node,"box/boxHit",!0,!0,2,3,W)}},y._onBoxOpen=function(e){if(this.colliderName==z.BOX){f.instance.playSound(p.AUDIO_SOUND.REWARD_BIG_BOX);var i=this.node.getComponent(d);i.play("boxOpen");var n=!1;i.once(d.EventType.FINISHED,(function(){if(!n){n=!0;var i=R.scriptPlayer.node.worldPosition.clone();I.instance.playParticle("colorBar/colorBar",i.clone().add3f(-.3,0,0),3,1.5,null,null,!0),I.instance.playParticle("colorBar/colorBar",i.clone().add3f(.3,0,0),3,1.5,null,null,!0),I.instance.playParticle("colorBar/colorBar",i.clone().add3f(0,0,-1.3),3,1.5,null,null,!0),f.instance.playSound(p.AUDIO_SOUND.FIRE),e()}})),I.instance.playEffect(this.node,"box/boxOpen",!0,!0,5,5,new t(0,0,0))}},y._peopleBecomeSameSkin=function(){if(this.colliderName===o.COLLIDER_NAME.PEOPLE_RED||this.colliderName===o.COLLIDER_NAME.PEOPLE_YELLOW||this.colliderName===o.COLLIDER_NAME.PEOPLE_GREEN){this._curMat=R.peopleInvincibleMaterial;var e=this.node.getChildByName("people"),i=null==e?void 0:e.getComponent(c);this._oriMat=i.getMaterial(0),null==i||i.setMaterial(this._curMat,0)}},y._peopleRecoveryOriSkin=function(){if((this.colliderName===o.COLLIDER_NAME.PEOPLE_RED||this.colliderName===o.COLLIDER_NAME.PEOPLE_YELLOW||this.colliderName===o.COLLIDER_NAME.PEOPLE_GREEN)&&this._oriMat&&this._curMat&&this._curMat!==this._oriMat){var e=this.node.getChildByName("people"),i=null==e?void 0:e.getComponent(c);null==i||i.setMaterial(this._oriMat,0)}},y._checkIsEffective=function(){var e=0;switch(this.colliderName){case o.COLLIDER_NAME.WALL:e=9001;break;case o.COLLIDER_NAME.MACE_SECTOR:e=5001;break;case o.COLLIDER_NAME.ROTATING_RING:e=1201;break;case o.COLLIDER_NAME.ORGAN_DOOR:e=4001;break;case o.COLLIDER_NAME.ROTATING_BLADE:e=1101;break;case o.COLLIDER_NAME.SPINE_ROAD:e=1301}return(!R.scriptPlayer.isInvincible||R.scriptPlayer.isInvincible&&-1!=m.arrEffective.indexOf(e))&&R.scriptPlayer.reviveInvincibleTime<=0},y.update=function(e){if(!R.isGameOver&&R.ndPlayer){if(this.colliderName===z.DIAMOND)h.fromEuler(this._curQuat,0,120*e,0),this.node.rotate(this._curQuat);else if(this.colliderName===z.ROTATING_BLADE){var i,t,n,o,r=this.node.worldPosition;if(1===this._rotatingBladeDirection)k.set(.1*e,0,0),null===(i=this.node)||void 0===i||null===(t=i.parent)||void 0===t||t.translate(k),r.x>.4&&(this._rotatingBladeDirection=-1);else k.set(.1*-e,0,0),null===(n=this.node)||void 0===n||null===(o=n.parent)||void 0===o||o.translate(k),r.x<-.4&&(this._rotatingBladeDirection=1)}if((this.colliderName===z.DIAMOND||this.colliderName===z.PEOPLE_RED||this.colliderName===z.PEOPLE_GREEN||this.colliderName===z.PEOPLE_YELLOW)&&R.scriptPlayer&&R.scriptPlayer.node)if(R.scriptPlayer.isInvincible){if(this.node.worldPosition.z<=R.scriptPlayer.node.worldPosition.z+1&&this.node.worldPosition.z>=R.scriptPlayer.node.worldPosition.z-1){this._isInhaling=!0;var l=R.scriptPlayer.node.worldPosition.clone(),a=this.node.worldPosition.clone().lerp(l.add3f(0,.3,-.3),.2);this.node.setWorldPosition(a);var s=this.node.getScale().clone().lerp(this._oriScale.clone().multiplyScalar(.3),.15);this.node.setScale(s)}}else this._isInhaling&&(P.instance.putNode(this.node),this._isInhaling=!1);var c,E;if(this.colliderName===z.SPINE_ROAD&&this._isOnSpineRoad&&this._checkIsEffective()&&(this._checkInterval+=e,this._checkInterval>=.5&&(this._checkInterval=0,R.scriptPlayer.walkOnSpineRoad(),O.dispatchEvent(p.EVENT_TYPE.CHANGE_TO_SPINE_SPEED))),this.colliderName===z.BRICK)this.node.parent&&this.node.worldPosition.z<=(null===(c=this.node)||void 0===c||null===(E=c.parent)||void 0===E?void 0:E.worldPosition.z)-.5&&(this.node.active=!1)}},u=o,(v=[{key:"timer",set:function(e){this._timer&&(clearTimeout(this._timer),this._timer=null)}}])&&M(u.prototype,v),T&&M(u,T),o}(u),G(b,"COLLIDER_NAME",z),A=function(e,i,t,n,o){var r={};return Object.keys(n).forEach((function(e){r[e]=n[e]})),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=t.slice().reverse().reduce((function(t,n){return n(e,i,t)||t}),r),o&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(o):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,i,r),r=null),r}((g=D).prototype,"colliderName",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return z.WALL}}),y=g))||y));i._RF.pop()}}}));

System.register("chunks:///_virtual/effectManager.ts",["cc","./constant.ts","./resourceUtil.ts","./poolManager.ts","./audioManager.ts","./flyReward.ts","./gameManager.ts"],(function(e){"use strict";var n,t,o,i,a,r,l,c,s,u,d,f,p,v,m;return{setters:[function(e){n=e.cclegacy,t=e.Vec3,o=e._decorator,i=e.AnimationComponent,a=e.ParticleSystemComponent,r=e.UITransformComponent,l=e.find,c=e.AnimationClip,s=e.Component},function(e){u=e.constant},function(e){d=e.resourceUtil},function(e){f=e.poolManager},function(e){p=e.AudioManager},function(e){v=e.FlyReward},function(e){m=e.GameManager}],execute:function(){var g,h,y;function C(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}n._RF.push({},"554baRvdXVCaZZeXFSvvApe","effectManager",void 0);var P=new t(2,2,2),E=new t(2,2,2),R=o.ccclass;o.property,e("EffectManager",R("EffectManager")((y=h=function(e){var n,o;function s(){for(var n,t=arguments.length,o=new Array(t),i=0;i<t;i++)o[i]=arguments[i];return S(w(n=e.call.apply(e,[this].concat(o))||this),"_ndParent",null),n}o=e,(n=s).prototype=Object.create(o.prototype),n.prototype.constructor=n,n.__proto__=o;var g,h,y,R=s.prototype;return R.start=function(){},R.playAni=function(e,n,o,a,r,l,s){var u=this;void 0===o&&(o=new t),void 0===a&&(a=!1),void 0===r&&(r=!1),void 0===l&&(l=1),void 0===s&&(s=function(){});var p=e.split("/")[1],v=this.ndParent.getChildByName(p),m=function(){var e,u,d;null===(e=v)||void 0===e||e.setScale(new t(l,l,l)),null===(u=v)||void 0===u||u.setWorldPosition(o);var p=null===(d=v)||void 0===d?void 0:d.getComponent(i);p.play(n);var m=p.getState(n);m&&(m.wrapMode=a?c.WrapMode.Loop:c.WrapMode.Normal),p.once(i.EventType.FINISHED,(function(){s&&s(),r&&v&&f.instance.putNode(v)}))};v?m():d.loadModelRes(e).then((function(e){(v=f.instance.getNode(e,u.ndParent)).setScale(new t(l,l,l)),v.setWorldPosition(o),m()}))},R.removeEffect=function(e,n){void 0===n&&(n=this.ndParent);var t=n.getChildByName(e);t&&(t.getComponentsInChildren(i).forEach((function(e){e.stop()})),(null==t?void 0:t.getComponentsInChildren(a)).forEach((function(e){null==e||e.clear(),null==e||e.stop()})),f.instance.putNode(t))},R.playParticle=function(e,n,o,i,r,l,c){var s=this;void 0===o&&(o=0),void 0===i&&(i=1),void 0===c&&(c=!1),d.loadEffectRes(e).then((function(e){var u=f.instance.getNode(e,s.ndParent);u.setScale(new t(i,i,i)),u.setWorldPosition(n),r&&(u.eulerAngles=r);var d=0;u.getComponentsInChildren(a).forEach((function(e){e.simulationSpeed=m.gameSpeed,null==e||e.clear(),null==e||e.stop(),null==e||e.play(),e.loop=c;var n=e.duration;d=n>d?n:d})),setTimeout((function(){u.parent&&(l&&l(),f.instance.putNode(u))}),1e3*(o&&o>0?o:d)/m.gameSpeed)}))},R.playEffect=function(e,n,o,r,l,c,s,u,p){void 0===o&&(o=!0),void 0===r&&(r=!0),void 0===l&&(l=0),void 0===c&&(c=1),void 0===s&&(s=new t),e.parent&&d.loadEffectRes(n).then((function(n){var d=f.instance.getNode(n,e);d.setScale(new t(c,c,c)),d.setPosition(s),u&&(d.eulerAngles=u);var v=0;o&&d.getComponentsInChildren(i).forEach((function(e,n,t){var o;null==e||e.play();var i=null==e||null===(o=e.defaultClip)||void 0===o?void 0:o.name;if(i){var a=e.getState(i);if(a){var r=a.duration;v=r>v?r:v,a.speed=m.gameSpeed}}}));r&&d.getComponentsInChildren(a).forEach((function(e,n,t){e.simulationSpeed=m.gameSpeed,null==e||e.clear(),null==e||e.stop(),null==e||e.play();var o=e.duration;v=o>v?o:v}));setTimeout((function(){d.parent&&(p&&p(),f.instance.putNode(d))}),1e3*(l&&l>0?l:v)/m.gameSpeed)}))},R.showFlyReward=function(e,n){void 0===n&&(n=function(){}),d.createUI("common/flyReward",(function(t,o){var i;if(t)n&&n();else{o.getComponent(r).priority=u.ZORDER.REWARD;var a=o.getComponent(v),c=null===(i=l("gameManager"))||void 0===i?void 0:i.getComponent(m);a.createReward(e,n,c)}}))},R.playLevelUpStar=function(e){d.loadEffectRes("levelUpStar/levelUpStar").then((function(n){var t=f.instance.getNode(n,e);t.getComponentsInChildren(a).forEach((function(e){e.simulationSpeed=m.gameSpeed,null==e||e.clear(),null==e||e.stop(),null==e||e.play()})),setTimeout((function(){t.parent&&f.instance.putNode(t)}),500)}))},R.playHitEffect=function(e,n,o){var i=this;void 0===o&&(o=new t),d.loadEffectRes("hit/hit").then((function(r){var l=f.instance.getNode(r,i.ndParent),c=e.worldPosition.clone(),s=n.worldPosition.clone(),d=new t(c.x+o.x,.5*(c.y+s.y)+o.y,.5*(c.z+s.z)+o.z);l.setWorldPosition(d),l.lookAt(m.scriptGameCamera.node.worldPosition.clone()),l.getComponentsInChildren(a).forEach((function(e){e.simulationSpeed=1,null==e||e.clear(),null==e||e.stop(),null==e||e.play()})),p.instance.playSound(u.AUDIO_SOUND.ATTACK[Math.floor(Math.random()*u.AUDIO_SOUND.ATTACK.length)]),setTimeout((function(){l.destroy()}),1500)}))},R.playFightBoomEffect=function(e,n,o){var i=this;void 0===o&&(o=new t),d.loadEffectRes("fightBoom/fightBoom").then((function(r){var l=f.instance.getNode(r,i.ndParent),c=e.worldPosition.clone(),s=n.worldPosition.clone(),u=new t(c.x+o.x,.5*(c.y+c.y)+o.y,.5*(c.z+s.z)+o.z);l.setWorldPosition(u),l.lookAt(m.scriptGameCamera.node.worldPosition.clone()),l.setScale(E),l.getComponentsInChildren(a).forEach((function(e){e.simulationSpeed=1,null==e||e.clear(),null==e||e.stop(),null==e||e.play()})),setTimeout((function(){l.destroy()}),1500)}))},R.playFlyLightEffect=function(e,n){void 0===n&&(n=new t),d.loadEffectRes("flyLight/flyLight").then((function(t){var o=f.instance.getNode(t,e);o.setPosition(n),o.setScale(P),o.lookAt(m.scriptGameCamera.node.worldPosition.clone()),o.getComponentsInChildren(a).forEach((function(e){e.simulationSpeed=4,null==e||e.clear(),null==e||e.stop(),null==e||e.play(),e.loop=!0}))}))},g=s,y=[{key:"instance",get:function(){return this._instance||(this._instance=new s),this._instance}}],(h=[{key:"ndParent",get:function(){return this._ndParent||(this._ndParent=l("effectManager")),this._ndParent}}])&&C(g.prototype,h),y&&C(g,y),s}(s),S(h,"_instance",void 0),g=y))||g);n._RF.pop()}}}));

System.register("chunks:///_virtual/storageManager.ts",["cc","./util.ts"],(function(t){"use strict";var a,e,n,s,i;return{setters:[function(t){a=t.cclegacy,e=t._decorator,n=t.sys,s=t.log},function(t){i=t.util}],execute:function(){var r,o,c;function u(t,a){for(var e=0;e<a.length;e++){var n=a[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function h(t,a,e){return a in t?Object.defineProperty(t,a,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[a]=e,t}a._RF.push({},"5689348bSJGyYo12WGa6eeJ","storageManager",void 0);var l=e.ccclass;e.property,t("StorageManager",l("StorageManager")((c=o=function(){function t(){h(this,"jsonData",null),h(this,"path",null),h(this,"KEY_CONFIG","gangConfig"),h(this,"markSave",!1),h(this,"saveTimer",-1)}var a,e,r,o=t.prototype;return o.start=function(){var t,a=this;(this.jsonData={userId:""},this.path=this.getConfigPath(),n.isNative)?t=jsb.fileUtils.getValueMapFromFile(this.path)[this.KEY_CONFIG]:t=n.localStorage.getItem(this.KEY_CONFIG);if(t&&t.length){t.startsWith("@")&&(t=t.substring(1),t=i.decrypt(t));try{var e=JSON.parse(t);this.jsonData=e}catch(t){}}this.saveTimer=setInterval((function(){a.scheduleSave()}),5e3)},o.setConfigDataWithoutSave=function(t,a){var e=this.jsonData.userId;this.jsonData[e]?this.jsonData[e][t]=a:console.error("no account can not save")},o.setConfigData=function(t,a){this.setConfigDataWithoutSave(t,a),this.markSave=!0},o.getConfigData=function(t){var a=this.jsonData.userId;if(this.jsonData[a]){var e=this.jsonData[a][t];return e||""}return s("no account can not load"),""},o.setGlobalData=function(t,a){this.jsonData[t]=a,this.save()},o.getGlobalData=function(t){return this.jsonData[t]},o.setUserId=function(t){this.jsonData.userId=t,this.jsonData[t]||(this.jsonData[t]={}),this.save()},o.getUserId=function(){return this.jsonData.userId},o.scheduleSave=function(){this.markSave&&this.save()},o.markModified=function(){this.markSave=!0},o.save=function(){var t=JSON.stringify(this.jsonData),a="@"+i.encrypt(t);if(this.markSave=!1,n.isNative){var e={};e[this.KEY_CONFIG]=a,jsb.fileUtils.writeToFile(e,this.path)}else{n.localStorage.setItem(this.KEY_CONFIG,a)}},o.getConfigPath=function(){var t=n.platform,a="";return t===n.OS_WINDOWS?a="src/conf":t===n.OS_LINUX?a="./conf":n.isNative?(a=jsb.fileUtils.getWritablePath(),a+="conf"):a="src/conf",a},a=t,r=[{key:"instance",get:function(){return this._instance||(this._instance=new t,this._instance.start()),this._instance}}],(e=null)&&u(a.prototype,e),r&&u(a,r),t}(),h(o,"_instance",void 0),r=c))||r);a._RF.pop()}}}));

System.register("chunks:///_virtual/diamond.ts",["cc","./constant.ts","./clientEvent.ts","./util.ts","./playerData.ts","./gameManager.ts"],(function(i){"use strict";var t,n,e,a,r,o,u,c,l;return{setters:[function(i){t=i.cclegacy,n=i._decorator,e=i.LabelComponent,a=i.Component},function(i){r=i.constant},function(i){o=i.clientEvent},function(i){u=i.util},function(i){c=i.playerData},function(i){l=i.GameManager}],execute:function(){var s,m,d,f,h;function _(i,t,n,e){n&&Object.defineProperty(i,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(e):void 0})}function b(i){if(void 0===i)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function p(i,t,n){return t in i?Object.defineProperty(i,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):i[t]=n,i}t._RF.push({},"57f7dJs4OFFjqvuLSBXCPms","diamond",void 0);var D=n.ccclass,v=n.property;i("Diamond",(s=D("Diamond"),m=v(e),s((h=function(i,t,n,e,a){var r={};return Object.keys(e).forEach((function(i){r[i]=e[i]})),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=n.slice().reverse().reduce((function(n,e){return e(i,t,n)||n}),r),a&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(a):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(i,t,r),r=null),r}((f=function(i){var t,n;function e(){for(var t,n=arguments.length,e=new Array(n),a=0;a<n;a++)e[a]=arguments[a];return _(b(t=i.call.apply(i,[this].concat(e))||this),"lbDiamondNum",h,b(t)),p(b(t),"_curDiamondNum",0),p(b(t),"_targetDiamondNum",0),p(b(t),"_interval",0),p(b(t),"_ratio",0),p(b(t),"_callback",(function(){})),t}n=i,(t=e).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a=e.prototype;return a.onEnable=function(){o.on(r.EVENT_TYPE.REFRESH_DIAMOND,this._refreshDiamond,this)},a.onDisable=function(){o.off(r.EVENT_TYPE.REFRESH_DIAMOND,this._refreshDiamond,this)},a.start=function(){this._refreshDiamond()},a.startRaise=function(i,t,n,e){void 0===t&&(t=.1),void 0===n&&(n=.25),void 0===e&&(e=function(){}),this._curDiamondNum=0,this._targetDiamondNum=i,this._interval=t,this._ratio=n,this._callback=e,this.schedule(this._numRaise,t)},a._numRaise=function(){this._curDiamondNum=u.lerp(this._targetDiamondNum,this._curDiamondNum,this._ratio),this.lbDiamondNum.string=u.formatMoney(c.instance.playerInfo.diamond+Math.ceil(this._curDiamondNum)),Math.ceil(this._curDiamondNum)===this._targetDiamondNum&&(this.unschedule(this._numRaise),l.addDiamond(this._targetDiamondNum),this._callback&&this._callback())},a._refreshDiamond=function(){this.lbDiamondNum.string=u.formatMoney(c.instance.playerInfo.diamond)},e}(a)).prototype,"lbDiamondNum",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=f))||d));t._RF.pop()}}}));

System.register("chunks:///_virtual/gameManager.ts",["cc","./constant.ts","./clientEvent.ts","./resourceUtil.ts","./localConfig.ts","./playerData.ts","./poolManager.ts","./gameCamera.ts","./audioManager.ts","./uiManager.ts","./fightMap.ts","./player.ts"],(function(e){"use strict";var n,t,i,o,a,r,s,l,c,u,E,d,h,p,f,_,m,P,y,g,v;return{setters:[function(e){n=e.cclegacy,t=e.Vec3,i=e._decorator,o=e.Node,a=e.CameraComponent,r=e.AnimationComponent,s=e.SkeletalAnimationComponent,l=e.ParticleSystemComponent,c=e.Quat,u=e.Component},function(e){E=e.constant},function(e){d=e.clientEvent},function(e){h=e.resourceUtil},function(e){p=e.localConfig},function(e){f=e.playerData},function(e){_=e.poolManager},function(e){m=e.GameCamera},function(e){P=e.AudioManager},function(e){y=e.uiManager},function(e){g=e.FightMap},function(e){v=e.Player}],execute:function(){var T,S,I,k,w,M,N,b,A,G,V,L,O,W,R;function C(e,n,t,i){t&&Object.defineProperty(e,n,{enumerable:t.enumerable,configurable:t.configurable,writable:t.writable,value:t.initializer?t.initializer.call(i):void 0})}function Y(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function B(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function D(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function H(e,n,t,i,o){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=t.slice().reverse().reduce((function(t,i){return i(e,n,t)||t}),a),o&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(o):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,n,a),a=null),a}n._RF.push({},"5d284TJIoJED67OcSTKXsrV","gameManager",void 0);var z=new t,F=new t,x=new t,U=i.ccclass,K=i.property;e("GameManager",(T=U("GameManager"),S=K(m),I=K({type:g}),k=K(o),w=K(o),M=K(o),T((R=W=function(e){var n,i;function o(){for(var n,t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];return C(B(n=e.call.apply(e,[this].concat(i))||this),"camera",A,B(n)),C(B(n),"scriptMapManager",G,B(n)),C(B(n),"ndSkyBox",V,B(n)),C(B(n),"ndWater",L,B(n)),C(B(n),"ndLight",O,B(n)),D(B(n),"mapInfo",null),D(B(n),"hitFlyEnemyPower",0),D(B(n),"basePower",5),D(B(n),"people",0),D(B(n),"multiple",0),D(B(n),"diamond",0),D(B(n),"_testInterval",0),D(B(n),"_kickPowerItemInfo",null),D(B(n),"_handPowerItemInfo",null),D(B(n),"_kickPowerValue",0),D(B(n),"_handPowerValue",0),D(B(n),"_aniComSkyBox",null),D(B(n),"_skyBoxQuat",new c),D(B(n),"_oriWaterWorPos",null),D(B(n),"_oriSkyBoxWorPos",null),D(B(n),"_oriMainLightWorPos",null),n}i=e,(n=o).prototype=Object.create(i.prototype),n.prototype.constructor=n,n.__proto__=i;var u,T,S,I=o.prototype;return I.onEnable=function(){d.on(E.EVENT_TYPE.ON_INIT_GAME,this._onInitGame,this),d.on(E.EVENT_TYPE.ON_GAME_OVER,this._onGameOver,this),d.on(E.EVENT_TYPE.ON_REVIVE,this._onRevive,this),d.on(E.EVENT_TYPE.REFRESH_LEVEL,this._refreshLevel,this),d.on(E.EVENT_TYPE.CHECK_LEVEL_UNLOCK_HAT_SKIN,this._checkLevelUnlockHatSkin,this),d.on(E.EVENT_TYPE.HIT_FLY_ENEMY,this._hitFlyEnemy,this)},I.onDisable=function(){d.off(E.EVENT_TYPE.ON_INIT_GAME,this._onInitGame,this),d.off(E.EVENT_TYPE.ON_GAME_OVER,this._onGameOver,this),d.off(E.EVENT_TYPE.ON_REVIVE,this._onRevive,this),d.off(E.EVENT_TYPE.REFRESH_LEVEL,this._refreshLevel,this),d.off(E.EVENT_TYPE.CHECK_LEVEL_UNLOCK_HAT_SKIN,this._checkLevelUnlockHatSkin,this),d.off(E.EVENT_TYPE.HIT_FLY_ENEMY,this._hitFlyEnemy,this)},I.start=function(){var e,n;o.mainCamera=null===(e=this.camera)||void 0===e?void 0:e.getComponent(a),o.scriptGameCamera=null===(n=this.camera)||void 0===n?void 0:n.getComponent(m),o.ndGameManager=this.node,this._oriWaterWorPos=this.ndWater.worldPosition.clone(),this._oriSkyBoxWorPos=this.ndSkyBox.worldPosition.clone(),this._oriMainLightWorPos=this.ndLight.worldPosition.clone()},I._onInitGame=function(){var e;y.instance.showDialog("loading/loadingPanel"),o.isGameStart=!1,o.isGamePause=!1,o.isGameOver=!1,o.gameSpeed=1,o.gameStatus=E.GAME_STATUS.RUN,o.scriptGameCamera.resetCamera(),o.isWin=!1,o.isRevive=!1,o.isArriveEndLine=!1,null===(e=o.ndPlayer)||void 0===e||e.destroy(),o.ndPlayer=null,this.diamond=0,this.people=0,this.multiple=0,this.hitFlyEnemyPower=0,this.ndWater.setWorldPosition(this._oriWaterWorPos),this.ndSkyBox.setWorldPosition(this._oriSkyBoxWorPos),f.instance.addFightTimes(),this._refreshLevel()},I._refreshLevel=function(){var e=this;console.log("###refreshLevel"),this.scriptMapManager.recycle(),this._loadMap((function(){e._createPlayer()}))},I._loadMap=function(e){void 0===e&&(e=function(){}),console.log("###loadMap");var n=f.instance.playerInfo.level;this.mapInfo=p.instance.queryByID("map",n),o.gameType=Number(this.mapInfo.type),this.scriptMapManager.buildMap(this.mapInfo.mapName,(function(){}),(function(){e&&e()}))},I._onGameOver=function(){var e=this;o.isGameOver||(console.log("game over!","isWin ?",o.isWin),o.isGameOver=!0,setTimeout((function(){if(o.isWin){y.instance.hideDialog("parkour/parkourPanel");var n=f.instance.playerInfo.level+1;n=n>p.instance.getTableArr("map").length?1:n,f.instance.playerInfo.level=n,y.instance.showDialog("settlement/settlementSuccessPanel",[e])}else y.instance.showDialog("settlement/settlementFailPanel",[e])}),1e3))},I._onRevive=function(){P.instance.playSound(E.AUDIO_SOUND.REVIVE),o.gameSpeed=1,o.isRevive=!0,o.gameStatus===E.GAME_STATUS.RUN?d.dispatchEvent(E.EVENT_TYPE.REDUCE_OBSTACLE):o.gameStatus===E.GAME_STATUS.FIGHT&&(o.isGameOver=!1,o.gameType===E.GAME_TYPE.NORMAL?g.scriptEnemy.scriptManModel.playAni(E.ANI_TYPE.IDLE,!0):o.gameType===E.GAME_TYPE.BOSS&&g.scriptBoss.playAni(E.BOSS_ANI_TYPE.BOSS_FIGHT_IDLE,!0))},I._createPlayer=function(){var e=this;console.log("###createPlayer"),h.loadModelRes("man/player").then((function(n){var t,i;o.ndPlayer=_.instance.getNode(n,e.node),(null===(t=o.mainCamera)||void 0===t?void 0:t.node.getComponent(m)).ndFollowTarget=o.ndPlayer;var a=null===(i=o.ndPlayer)||void 0===i?void 0:i.getComponent(v);o.scriptPlayer=a,null==a||a.initPlayer(),d.dispatchEvent(E.EVENT_TYPE.HIDE_LOADING_PANEL)}))},o.refreshEffectSpeed=function(e,n){e&&(e.getComponentsInChildren(r).forEach((function(e){e.clips.forEach((function(t){var i=null==t?void 0:t.name;e.getState(i).speed=n}))})),e.getComponentsInChildren(s).forEach((function(e){e.clips.forEach((function(t){var i=null==t?void 0:t.name;e.getState(i).speed=n}))})),e.getComponentsInChildren(l).forEach((function(e){e.simulationSpeed=n})))},o.addDiamond=function(e){void 0===e&&(e=1),f.instance.updatePlayerInfo("diamond",Math.ceil(e)),d.dispatchEvent(E.EVENT_TYPE.REFRESH_DIAMOND)},o.addKey=function(e){void 0===e&&(e=1),f.instance.updatePlayerInfo("key",e),d.dispatchEvent(E.EVENT_TYPE.REFRESH_KEY)},o.resetAniState=function(e,n){e.play(n)},I._checkLevelUnlockHatSkin=function(){var e=f.instance.getSetting(E.SETTINGS_KEY.LEVEL_HAT_PROGRESS),n=f.instance.getHatStatus(e.ID);f.instance.isLevelHatUnlockOver()||100!==e.progress?d.dispatchEvent(E.EVENT_TYPE.ON_INIT_GAME):y.instance.showDialog("skin/skinPanel",[E.SKIN_HAT_CHANEL.LEVEL,E.SKIN_TYPE.HAT,n,function(){f.instance.refreshHatProgress(),d.dispatchEvent(E.EVENT_TYPE.ON_INIT_GAME)}])},I._hitFlyEnemy=function(){var e=1+this.kickPowerValue;this.multiple=.2*Math.ceil(e/.5)+1,g.scriptEnemy.hitFly(e),console.log("敌人被击飞距离",e,"目标倍数",this.multiple)},I.update=function(e){if(o.scriptPlayer&&o.scriptPlayer.node&&!o.isGameOver){var n=o.scriptPlayer.node.worldPosition.clone();t.subtract(z,n,this._oriSkyBoxWorPos),this.ndSkyBox.setWorldPosition(this._oriSkyBoxWorPos.clone().add3f(0,0,z.z)),t.subtract(F,n,this._oriWaterWorPos),this.ndWater.setWorldPosition(this._oriWaterWorPos.clone().add3f(0,0,F.z)),t.subtract(x,n,this._oriMainLightWorPos),this.ndLight.setWorldPosition(this._oriMainLightWorPos.clone().add3f(0,0,x.z+2))}if(c.fromEuler(this._skyBoxQuat,0,.5*e,0),this.ndSkyBox.rotate(this._skyBoxQuat),o.isArriveEndLine&&!o.scriptPlayer.isArriveEnd){var i=0,a=0;o.gameType===E.GAME_TYPE.NORMAL?(i=.35+.14*(v.scaleRatio-1),a=o.scriptPlayer.node.worldPosition.z-g.ndEnemy.worldPosition.z):o.gameType===E.GAME_TYPE.REWARD?(i=.35+.14*(v.scaleRatio-1),a=o.scriptPlayer.node.worldPosition.z-g.ndBox.worldPosition.z):o.gameType===E.GAME_TYPE.BOSS&&(i=.55+.14*(v.scaleRatio-1),a=o.scriptPlayer.node.worldPosition.z-g.ndBoss.worldPosition.z),a<=i&&!o.scriptPlayer.isStopMove&&(d.dispatchEvent(E.EVENT_TYPE.ARRIVE_END),o.gameStatus=E.GAME_STATUS.FIGHT)}},u=o,S=[{key:"isWin",set:function(e){this._isWin=e,o.isGameStart&&d.dispatchEvent(E.EVENT_TYPE.ON_GAME_OVER)},get:function(){return this._isWin}},{key:"gameSpeed",set:function(e){this._gameSpeed!==e&&(this._gameSpeed=e,console.log("gameSpeed",e),o.refreshEffectSpeed(o.ndGameManager,this._gameSpeed),o.refreshEffectSpeed(g.ndEnemy,this._gameSpeed),o.refreshEffectSpeed(g.ndBoss,this._gameSpeed))},get:function(){return this._gameSpeed}}],(T=[{key:"kickPowerItemInfo",get:function(){return this._kickPowerItemInfo=p.instance.queryByID("power",String(f.instance.playerInfo.kickPowerLevel)),this._kickPowerItemInfo}},{key:"handPowerItemInfo",get:function(){return this._handPowerItemInfo=p.instance.queryByID("power",String(f.instance.playerInfo.handPowerLevel)),this._handPowerItemInfo}},{key:"kickPowerValue",get:function(){return this._kickPowerValue=this.kickPowerItemInfo.kickPowerValue}},{key:"handPowerValue",get:function(){return this._handPowerValue=this.handPowerItemInfo.handPowerValue}}])&&Y(u.prototype,T),S&&Y(u,S),o}(u),D(W,"mainCamera",null),D(W,"isGameStart",!1),D(W,"isGamePause",!1),D(W,"isGameOver",!1),D(W,"scriptPlayer",void 0),D(W,"scriptGameCamera",void 0),D(W,"ndPlayer",void 0),D(W,"gameType",1),D(W,"gameStatus",""),D(W,"ndGameManager",void 0),D(W,"isRevive",!1),D(W,"isArriveEndLine",!1),D(W,"peopleInvincibleMaterial",null),D(W,"oriPlayerWorPos",new t(0,1,-1)),D(W,"_gameSpeed",1),D(W,"_isWin",!1),A=H((b=R).prototype,"camera",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=H(b.prototype,"scriptMapManager",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=H(b.prototype,"ndSkyBox",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=H(b.prototype,"ndWater",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=H(b.prototype,"ndLight",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=b))||N));n._RF.pop()}}}));

System.register("chunks:///_virtual/fightTip.ts",["cc","./constant.ts","./poolManager.ts"],(function(t){"use strict";var e,n,i,o,s,a,r,c,h,l;return{setters:[function(t){e=t.cclegacy,n=t.Vec3,i=t._decorator,o=t.LabelComponent,s=t.UITransformComponent,a=t.view,r=t.tween,c=t.Component},function(t){h=t.constant},function(t){l=t.poolManager}],execute:function(){var p;function u(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function d(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}e._RF.push({},"5d312XjEjZE3o6DKbhOTSd3","fightTip",void 0);var v=new n,g=new n(.7,.7,.7),f=new n,T=new n(1,1,1),w=i.ccclass;i.property,t("FightTip",w("FightTip")(p=function(t){var e,n;function i(){for(var e,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return d(u(e=t.call.apply(t,[this].concat(i))||this),"tweenTip",null),d(u(e),"costTime",1.5),e}n=t,(e=i).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n;var c=i.prototype;return c.start=function(){},c.show=function(t,e,n){var i,c,p,u,d=this;this._closeTweenTip(),this.node.eulerAngles=v,this.node.setScale(g),this.node.children.forEach((function(t){t.active=!1}));var w=null;t===h.FIGHT_TIP_INDEX.SCORE_ADD?w=this.node.getChildByName("add"):t===h.FIGHT_TIP_INDEX.SCORE_MINUS&&(w=this.node.getChildByName("minus")),w.active=!0,(u=null===(i=w.getChildByName("num"))||void 0===i?void 0:i.getComponent(o))&&(u.string=e);var m=this.node.getPosition(),_=null===(c=w.getComponent(s))||void 0===c?void 0:c.width,y=null===(p=w.getComponent(s))||void 0===p?void 0:p.height;if(Math.abs(m.x)+_/2>a.getCanvasSize().width/2){var C=a.getCanvasSize().width/2-_/2;m.x=m.x>0?C:-C}if(Math.abs(m.y)+y/2>a.getCanvasSize().height/2){var b=a.getCanvasSize().height/2-y/2;m.y=m.y>0?b:-b}this.node.setPosition(m),this.tweenTip=r(this.node).to(.4*this.costTime,{scale:T},{easing:"backOutIn"}).to(.2*this.costTime,{scale:f}).call((function(){d._closeTweenTip(),l.instance.putNode(d.node),n&&n()})).start()},c._closeTweenTip=function(){this.tweenTip&&(this.tweenTip.stop(),this.tweenTip=null)},i}(c))||p);e._RF.pop()}}}));

System.register("chunks:///_virtual/audioManager.ts",["cc","./util.ts","./resourceUtil.ts","./storageManager.ts"],(function(i){"use strict";var t,s,o,n,u,e;return{setters:[function(i){t=i.cclegacy,s=i._decorator,o=i.AudioClip},function(i){n=i.util},function(i){u=i.resourceUtil},function(i){e=i.StorageManager}],execute:function(){var a,r,c;function l(i,t){for(var s=0;s<t.length;s++){var o=t[s];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(i,o.key,o)}}function d(i,t,s){return t in i?Object.defineProperty(i,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):i[t]=s,i}t._RF.push({},"5e2ecZFEJFEHoCgx6lXVYHB","audioManager",void 0);var h=s.ccclass;s.property,i("AudioManager",h("AudioManager")((c=r=function(){function i(){d(this,"dictWeaponSoundIndex",{}),d(this,"musicVolume",.8),d(this,"soundVolume",1),d(this,"audios",{}),d(this,"arrSound",[])}var t,s,a,r=i.prototype;return r.init=function(){this.musicVolume=this.getAudioSetting(!0)?.8:0,this.soundVolume=this.getAudioSetting(!1)?1:0},r.onAppShow=function(){for(var i in this.audios){var t=this.audios[i];t.loop&&t.clip.play()}},r.getAudioSetting=function(i){var t;return!(t=i?e.instance.getGlobalData("music"):e.instance.getGlobalData("sound"))||"true"===t},r.playMusic=function(i,t){var s=this,n="audio/music/"+i;u.loadRes(n,o,(function(o,n){var u={};u.clip=n,u.loop=t,u.isMusic=!0,s.audios[i]=u,s.playClip(i,!0)}))},r.playSound=function(i,t){var s=this;if(void 0===t&&(t=!1),this.soundVolume){u.loadRes("audio/sound/"+i,o,(function(o,u){var e={};e.clip=u,e.loop=t,e.isMusic=!1,s.arrSound.push(e),t&&(s.audios[i]=e,u.setLoop(t)),u.setVolume(s.soundVolume),u.playOneShot(),u.once("ended",(function(){n.remove(s.arrSound,(function(i){return i.clip===e.clip}))}))}))}},r.playClip=function(i,t){var s=this.audios[i],o=this.musicVolume;t||(o=this.soundVolume);var n=s.clip;n.setVolume(o),n.setLoop(s.loop),n.play()},r.stop=function(i){this.audios.hasOwnProperty(i)&&this.audios[i].clip.stop()},r.stopAll=function(){for(var i in this.audios){if(this.audios.hasOwnProperty(i))this.audios[i].clip.stop()}},r.setMusic=function(i){for(var t in"number"!=typeof i&&(i=i?1:0),this.musicVolume=i,this.audios){if(this.audios.hasOwnProperty(t)&&this.audios[t].isMusic)this.audios[t].clip.setVolume(this.musicVolume)}},r.pauseAll=function(){for(var i in console.log("pause all music!!!"),this.audios){if(this.audios.hasOwnProperty(i))this.audios[i].clip.pause()}},r.resumeAll=function(){for(var i in this.audios){if(this.audios.hasOwnProperty(i))this.audios[i].clip.play()}},r.openMusic=function(){this.setMusic(.8),e.instance.setGlobalData("music","true")},r.closeMusic=function(){this.setMusic(0),e.instance.setGlobalData("music","false")},r.openSound=function(){this.setSound(1),e.instance.setGlobalData("sound","true")},r.closeSound=function(){this.setSound(0),e.instance.setGlobalData("sound","false")},r.setSound=function(i){for(var t in this.soundVolume=i,this.audios){if(this.audios.hasOwnProperty(t)&&!this.audios[t].isMusic)this.audios[t].clip.setVolume(this.soundVolume)}for(var s=0;s<this.arrSound.length;s++){this.arrSound[s].clip.setVolume(this.soundVolume)}},r.stopSingleSound=function(i){this.audios.hasOwnProperty(i)&&!this.audios[i].isMusic&&this.audios[i].clip.stop()},t=i,a=[{key:"instance",get:function(){return this._instance||(this._instance=new i,this._instance.init()),this._instance}}],(s=null)&&l(t.prototype,s),a&&l(t,a),i}(),d(r,"_instance",void 0),a=c))||a);t._RF.pop()}}}));

System.register("chunks:///_virtual/boxItem.ts",["cc","./constant.ts","./resourceUtil.ts","./localConfig.ts","./audioManager.ts","./gameLogic.ts","./effectManager.ts"],(function(e){"use strict";var i,n,t,o,a,r,l,c,u,s,d,p,b,m;return{setters:[function(e){i=e.cclegacy,n=e._decorator,t=e.AnimationComponent,o=e.LabelComponent,a=e.SpriteComponent,r=e.Node,l=e.Prefab,c=e.Component},function(e){u=e.constant},function(e){s=e.resourceUtil},function(e){d=e.localConfig},function(e){p=e.AudioManager},function(e){b=e.GameLogic},function(e){m=e.EffectManager}],execute:function(){var f,h,g,_,y,v,B,x,D,S,w,R,O,C,E,L,A,I,z;function P(e,i,n,t){n&&Object.defineProperty(e,i,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(t):void 0})}function N(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k(e,i,n){return i in e?Object.defineProperty(e,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[i]=n,e}function T(e,i,n,t,o){var a={};return Object.keys(t).forEach((function(e){a[e]=t[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=n.slice().reverse().reduce((function(n,t){return t(e,i,n)||n}),a),o&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(o):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,i,a),a=null),a}i._RF.push({},"5e807x2rMNFBasY6LsgYONi","boxItem",void 0);var j=n.ccclass,M=n.property;e("BoxItem",(f=j("BoxItem"),h=M(t),g=M(o),_=M(a),y=M(r),v=M(r),B=M(l),x=M(r),D=M(t),f((R=T((w=function(e){var i,n;function o(){for(var i,n=arguments.length,t=new Array(n),o=0;o<n;o++)t[o]=arguments[o];return P(N(i=e.call.apply(e,[this].concat(t))||this),"aniComLight",R,N(i)),P(N(i),"lbDiamond",O,N(i)),P(N(i),"spSkin",C,N(i)),P(N(i),"ndDiamond",E,N(i)),P(N(i),"ndSkin",L,N(i)),P(N(i),"pbBox",A,N(i)),P(N(i),"ndBoxReward",I,N(i)),P(N(i),"aniComBox",z,N(i)),k(N(i),"_isOpen",!1),k(N(i),"_rewardType",u.REWARD_TYPE.DIAMOND),k(N(i),"_diamond",0),k(N(i),"_scriptBoxPanel",null),k(N(i),"_isBestReward",!1),i}n=e,(i=o).prototype=Object.create(n.prototype),i.prototype.constructor=i,i.__proto__=n;var a=o.prototype;return a.start=function(){},a.init=function(e,i,n,t){void 0===t&&(t=100),this._rewardType=e,this._scriptBoxPanel=i,this._diamond=t,this._isOpen=!1,this.aniComLight.node.active=!1,this.aniComLight.getState("doubleLight02").time=0,this.aniComLight.getState("doubleLight02").sample(),this.aniComBox.getState("boxOpen").time=0,this.aniComBox.getState("boxOpen").sample(),this.ndDiamond.active=!1,this.ndSkin.active=!1,this._isBestReward=n,this.ndBoxReward.active=!0,this.lbDiamond.string=String(t),e===u.REWARD_TYPE.DIAMOND&&n&&(this.lbDiamond.string=i.objBestReward.num)},a.onBoxItemClick=function(){var e=this;!this._isOpen&&this._scriptBoxPanel.keyNum>0&&(b.vibrateShort(),this._isOpen=!0,this.aniComLight.node.active=!0,this.aniComLight.play("doubleLight01"),this.aniComLight.on(t.EventType.FINISHED,(function(){e.aniComLight.play("doubleLight02")})),this.scheduleOnce((function(){p.instance.playSound(u.AUDIO_SOUND.REWARD_SMALL_BOX),e.aniComBox.play("boxOpen"),m.instance.playEffect(e.ndBoxReward,"box/boxOpen01",!0,!0,5,1)}),.5),this.aniComBox.once(t.EventType.FINISHED,(function(){if(e.scheduleOnce((function(){e.ndBoxReward.active=!1,e.unscheduleAllCallbacks()}),.5),e._rewardType===u.REWARD_TYPE.DIAMOND)e.ndDiamond.active=!0,e.ndSkin.active=!1,e._isBestReward&&(e._diamond=e._scriptBoxPanel.objBestReward.num,e.lbDiamond.string=String(e._diamond),p.instance.playSound(u.AUDIO_SOUND.BEST_REWARD)),e._scriptBoxPanel.diamondNum+=e._diamond;else if(e._rewardType===u.REWARD_TYPE.SKIN){p.instance.playSound(u.AUDIO_SOUND.BEST_REWARD),e.ndDiamond.active=!1,e.ndSkin.active=!0;var i=e._scriptBoxPanel.objBestReward.obj,n="texture/icon/hats/"+d.instance.queryByID("shop",i.ID).iconName;s.setSpriteFrame(n,e.spSkin,(function(){})),e._scriptBoxPanel.isOpenHatSkin=!0}})),this._scriptBoxPanel.useKey())},o}(c)).prototype,"aniComLight",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=T(w.prototype,"lbDiamond",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=T(w.prototype,"spSkin",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=T(w.prototype,"ndDiamond",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=T(w.prototype,"ndSkin",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=T(w.prototype,"pbBox",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=T(w.prototype,"ndBoxReward",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=T(w.prototype,"aniComBox",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=w))||S));i._RF.pop()}}}));

System.register("chunks:///_virtual/player.ts",["cc","./constant.ts","./clientEvent.ts","./resourceUtil.ts","./localConfig.ts","./playerData.ts","./poolManager.ts","./audioManager.ts","./uiManager.ts","./effectManager.ts","./manModel.ts","./fightMap.ts","./colliderItem.ts","./gameManager.ts"],(function(e){"use strict";var i,t,n,a,s,o,r,l,u,h,c,_,E,p,m,d,P,I,f,T,y,L,b,v,M;return{setters:[function(e){i=e.cclegacy,t=e.Vec3,n=e._decorator,a=e.Node,s=e.Material,o=e.RigidBodyComponent,r=e.Texture2D,l=e.MeshRenderer,u=e.find,h=e.tween,c=e.clamp,_=e.Component},function(e){E=e.constant},function(e){p=e.clientEvent},function(e){m=e.resourceUtil},function(e){d=e.localConfig},function(e){P=e.playerData},function(e){I=e.poolManager},function(e){f=e.AudioManager},function(e){T=e.uiManager},function(e){y=e.EffectManager},function(e){L=e.ManModel},function(e){b=e.FightMap},function(e){v=e.ColliderItem},function(e){M=e.GameManager}],execute:function(){var g,O,N,S,A,R,C,D,w,B,G,U,Y,k,x,j,V,H,z,F,W,J,K,q,Q,X,Z,$,ee,ie,te;function ne(e,i,t,n){t&&Object.defineProperty(e,i,{enumerable:t.enumerable,configurable:t.configurable,writable:t.writable,value:t.initializer?t.initializer.call(n):void 0})}function ae(e,i){for(var t=0;t<i.length;t++){var n=i[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function se(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function oe(e,i,t){return i in e?Object.defineProperty(e,i,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[i]=t,e}function re(e,i,t,n,a){var s={};return Object.keys(n).forEach((function(e){s[e]=n[e]})),s.enumerable=!!s.enumerable,s.configurable=!!s.configurable,("value"in s||s.initializer)&&(s.writable=!0),s=t.slice().reverse().reduce((function(t,n){return n(e,i,t)||t}),s),a&&void 0!==s.initializer&&(s.value=s.initializer?s.initializer.call(a):void 0,s.initializer=void 0),void 0===s.initializer&&(Object.defineProperty(e,i,s),s=null),s}i._RF.push({},"5f3d1oywPtCZb6flNH0hvK4","player",void 0);var le=new t(0,.5,0),ue=new t,he=n.ccclass,ce=n.property;e("Player",(g=he("Player"),O=ce(a),N=ce(s),S=ce(s),A=ce(s),R=ce(s),C=ce(s),D=ce(s),w=ce(s),B=ce(s),G=ce(o),U=ce({type:L}),Y=ce([r]),k=ce([r]),g((te=ie=function(e){var i,n;function a(){for(var i,n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return ne(se(i=e.call.apply(e,[this].concat(a))||this),"ndCharacter",V,se(i)),ne(se(i),"matGreen01",H,se(i)),ne(se(i),"matGreen02",z,se(i)),ne(se(i),"matRed01",F,se(i)),ne(se(i),"matRed02",W,se(i)),ne(se(i),"matYellow01",J,se(i)),ne(se(i),"matYellow02",K,se(i)),ne(se(i),"matInvincible",q,se(i)),ne(se(i),"matGray",Q,se(i)),ne(se(i),"rigidBodyComPlayer",X,se(i)),ne(se(i),"scriptManModel",Z,se(i)),ne(se(i),"arrTextureHat",$,se(i)),ne(se(i),"arrTextureShoes",ee,se(i)),oe(se(i),"isJumping",!1),oe(se(i),"jumpPos",new t),oe(se(i),"hp",0),oe(se(i),"volume",0),oe(se(i),"isInvincible",!1),oe(se(i),"moveInterval",0),oe(se(i),"isEnableMoveLeftOrRight",!1),oe(se(i),"isArriveEnd",!1),oe(se(i),"preJumpPos",new t),oe(se(i),"isDie",!1),oe(se(i),"energyMax",62.5),oe(se(i),"isStopMove",!1),oe(se(i),"reviveInvincibleTime",0),oe(se(i),"_skinType",0),oe(se(i),"_timerPeopleLight",void 0),oe(se(i),"_lightMaterial",null),oe(se(i),"_oriMaterial",null),oe(se(i),"_bubbleType",""),oe(se(i),"_energy",0),oe(se(i),"_energyInterval",.2),oe(se(i),"_endCenterPos",new t),oe(se(i),"_arrJumpPos",[]),oe(se(i),"_jumpIndex",0),oe(se(i),"_jumpTime",2),oe(se(i),"_oppositeSidePos",new t),oe(se(i),"_minVolume",11),oe(se(i),"_maxVolume",35),oe(se(i),"_oriVolume",11),oe(se(i),"_rewardVolume",20),oe(se(i),"_targetScale",0),oe(se(i),"_isNeedChangeScale",!1),oe(se(i),"_damageValue",10),oe(se(i),"_baseScale",.2),oe(se(i),"_maxScale",.4),oe(se(i),"_nextSkinType",0),oe(se(i),"_isInit",!1),oe(se(i),"_isHitBig",!1),i}n=e,(i=a).prototype=Object.create(n.prototype),i.prototype.constructor=i,i.__proto__=n;var s,r,_,L=a.prototype;return L.onLoad=function(){},L.onEnable=function(){p.on(E.EVENT_TYPE.CHANGE_SKIN,this._changeSkin,this),p.on(E.EVENT_TYPE.ARRIVE_END,this._arriveEnd,this),p.on(E.EVENT_TYPE.REFRESH_ATTACK_WOR_POS,this._refreshAttackWorPos,this),p.on(E.EVENT_TYPE.SHOW_INVINCIBLE,this._showInvincible,this),p.on(E.EVENT_TYPE.ON_REVIVE,this._onRevive,this),p.on(E.EVENT_TYPE.EQUIPMENT_HAT,this._equipmentHat,this),p.on(E.EVENT_TYPE.EQUIPMENT_SHOES,this._equipmentShoes,this)},L.onDisable=function(){p.off(E.EVENT_TYPE.CHANGE_SKIN,this._changeSkin,this),p.off(E.EVENT_TYPE.ARRIVE_END,this._arriveEnd,this),p.off(E.EVENT_TYPE.REFRESH_ATTACK_WOR_POS,this._refreshAttackWorPos,this),p.off(E.EVENT_TYPE.SHOW_INVINCIBLE,this._showInvincible,this),p.off(E.EVENT_TYPE.ON_REVIVE,this._onRevive,this),p.off(E.EVENT_TYPE.EQUIPMENT_HAT,this._equipmentHat,this),p.off(E.EVENT_TYPE.EQUIPMENT_SHOES,this._equipmentShoes,this)},L.start=function(){},L.initPlayer=function(){this.node.setWorldPosition(M.oriPlayerWorPos),this.node.eulerAngles=new t(0,0,0),this._oriMaterial=this.matGreen01,this._lightMaterial=this.matGreen02,this.isEnableMoveLeftOrRight=!0,this.isArriveEnd=!1,this.isStopMove=!1,this._changeSkin(v.COLLIDER_NAME.COLOR_LIGHT_GREEN),this.scriptManModel.playAni(E.ANI_TYPE.IDLE,!0),this._arrJumpPos=[],this._jumpIndex=0,this._nextSkinType=0,this._isInit=!1,this.isDie=!1,this.energy=0,M.gameType===E.GAME_TYPE.REWARD?this.updateVolume(this._rewardVolume-this.volume):this.updateVolume(this._oriVolume-this.volume),this._equipmentHat(),this._equipmentShoes()},L._onRevive=function(){var e=this;if(this.isDie=!1,this.volume<15&&M.gameStatus===E.GAME_STATUS.RUN&&this.updateVolume(15),this.reviveInvincibleTime=E.REVIVE_INVINCIBLE_TIME,this.rigidBodyComPlayer.useGravity&&(this.rigidBodyComPlayer.useGravity=!1),M.gameStatus===E.GAME_STATUS.RUN)this.isStopMove=!1,this.scriptManModel.playAni(E.ANI_TYPE.LIFE,!1,(function(){M.isGameOver=!1,e.scriptManModel.playAni(E.ANI_TYPE.RUN,!0)}));else if(M.gameStatus===E.GAME_STATUS.FIGHT){var i,n;this.isStopMove=!0,this.scriptManModel.playAni(E.ANI_TYPE.LIFE,!1,(function(){e.scriptManModel.playAni(E.ANI_TYPE.FIGHT_IDLE,!0,(function(){}),1)}));var a=this.node.worldPosition.clone();if(M.gameType===E.GAME_TYPE.NORMAL){var s=.5*(b.ndEnemy.worldPosition.clone().z-a.z),o=a.clone().add3f(2.2,.9,s),r=a.clone().add3f(0,.4,s);M.scriptGameCamera.moveCamera(o,r,(function(){e.scriptManModel.playAni(E.ANI_TYPE.KICK)}))}else if(M.gameType===E.GAME_TYPE.BOSS){var l=0,u=0;switch(this._jumpIndex){case 0:l=0,u=1.3;break;case 1:l=1.3,u=0;break;case 2:l=0,u=-1.3;break;case 3:l=-1.3,u=0}i=new t(this.jumpPos.x+l,this.jumpPos.y+1,this.jumpPos.z+u),n=new t(this.jumpPos.x,this.jumpPos.y+.5,this.jumpPos.z),M.scriptGameCamera.moveCamera(i,n,(function(){e.scriptManModel.playAni(E.ANI_TYPE.KICK)}),2,!0)}}},L._showInvincible=function(){var e=this;console.log("触发无敌效果"),f.instance.playSound(E.AUDIO_SOUND.INVINCIBLE);var i=this.ndCharacter.getComponent(l);null==i||i.setMaterial(this.matInvincible,0),M.peopleInvincibleMaterial=this._oriMaterial,p.dispatchEvent(E.EVENT_TYPE.PEOPLE_BECOME_SAME_SKIN),this._timerPeopleLight&&(clearTimeout(this._timerPeopleLight),this._timerPeopleLight=null),y.instance.playEffect(this.node,"levelUp/levelUp",!0,!0,2,1.5),setTimeout((function(){y.instance.playFlyLightEffect(e.node,new t(0,.3,0))}),500),this.scriptManModel.ndSocketHead.children.forEach((function(e){I.instance.putNode(e)})),m.getHat("crown").then((function(i){I.instance.getNode(i,e.scriptManModel.ndSocketHead)}))},L._changeSkin=function(e){var i=this.ndCharacter.getComponent(l);if(e||(e=0),e!==v.COLLIDER_NAME.DIAMOND&&e!==v.COLLIDER_NAME.KEY)if(this.isInvincible){switch(this._skinType){case v.COLLIDER_NAME.PEOPLE_RED:y.instance.playEffect(this.node,"bubble/"+E.BUBBLE.BUBBLE_RED,!0,!0,1,1.5,le);break;case v.COLLIDER_NAME.PEOPLE_YELLOW:y.instance.playEffect(this.node,"bubble/"+E.BUBBLE.BUBBLE_YELLOW,!0,!0,1,1.5,le);break;case v.COLLIDER_NAME.PEOPLE_GREEN:y.instance.playEffect(this.node,"bubble/"+E.BUBBLE.BUBBLE_GREEN,!0,!0,1,1.5,le)}switch(e){case v.COLLIDER_NAME.COLOR_LIGHT_RED:this._nextSkinType=v.COLLIDER_NAME.COLOR_LIGHT_RED;break;case v.COLLIDER_NAME.COLOR_LIGHT_YELLOW:this._nextSkinType=v.COLLIDER_NAME.COLOR_LIGHT_YELLOW;break;case v.COLLIDER_NAME.COLOR_LIGHT_GREEN:this._nextSkinType=v.COLLIDER_NAME.COLOR_LIGHT_GREEN}}else switch(e){case v.COLLIDER_NAME.COLOR_LIGHT_RED:null==i||i.setMaterial(this.matRed01,0),this._oriMaterial=this.matRed01,this._lightMaterial=this.matRed02,this._skinType=v.COLLIDER_NAME.PEOPLE_RED,this._bubbleType=E.BUBBLE.BUBBLE_RED;break;case v.COLLIDER_NAME.PEOPLE_RED:this._bubbleType===E.BUBBLE.BUBBLE_RED?(y.instance.playEffect(this.node,"bubble/"+this._bubbleType,!0,!0,.5,1.5,le),null==i||i.setMaterial(this._lightMaterial,0)):null==i||i.setMaterial(this.matGray,0),this._hidePeopleLight(i,this._oriMaterial);break;case v.COLLIDER_NAME.COLOR_LIGHT_YELLOW:null==i||i.setMaterial(this.matYellow01,0),this._oriMaterial=this.matYellow01,this._lightMaterial=this.matYellow02,this._skinType=v.COLLIDER_NAME.PEOPLE_YELLOW,this._bubbleType=E.BUBBLE.BUBBLE_YELLOW;break;case v.COLLIDER_NAME.PEOPLE_YELLOW:this._bubbleType===E.BUBBLE.BUBBLE_YELLOW?(y.instance.playEffect(this.node,"bubble/"+this._bubbleType,!0,!0,.5,1.5,le),null==i||i.setMaterial(this._lightMaterial,0)):null==i||i.setMaterial(this.matGray,0),this._hidePeopleLight(i,this._oriMaterial);break;case v.COLLIDER_NAME.COLOR_LIGHT_GREEN:null==i||i.setMaterial(this.matGreen01,0),this._oriMaterial=this.matGreen01,this._lightMaterial=this.matGreen02,this._skinType=v.COLLIDER_NAME.PEOPLE_GREEN,this._bubbleType=E.BUBBLE.BUBBLE_GREEN;break;case v.COLLIDER_NAME.PEOPLE_GREEN:this._bubbleType===E.BUBBLE.BUBBLE_GREEN?(y.instance.playEffect(this.node,"bubble/"+this._bubbleType,!0,!0,.5,1.5,le),null==i||i.setMaterial(this._lightMaterial,0)):null==i||i.setMaterial(this.matGray,0),this._hidePeopleLight(i,this._oriMaterial);break;case v.COLLIDER_NAME.DIAMOND:null==i||i.setMaterial(this._lightMaterial,0),this._hidePeopleLight(i,this._oriMaterial),M.gameType===E.GAME_TYPE.REWARD&&(this.energy+=1);break;case v.COLLIDER_NAME.KEY:null==i||i.setMaterial(this._lightMaterial,0),this._hidePeopleLight(i,this._oriMaterial);break;default:this._skinType=0}},L._hidePeopleLight=function(e,i){this._timerPeopleLight&&(clearTimeout(this._timerPeopleLight),this._timerPeopleLight=null),this._timerPeopleLight=setTimeout((function(){null==e||e.setMaterial(i,0)}),100)},L.hitPeople=function(e){var i,t=this.scriptManModel.ndSocketHead.worldPosition.clone().add3f(0,.1,0),n=null===(i=M.mainCamera)||void 0===i?void 0:i.convertToUINode(t,u("Canvas"));this._skinType===e||this.isInvincible?(f.instance.playSound(E.AUDIO_SOUND.COLLECT_PEOPLE_RIGHT),T.instance.showFightTips(E.FIGHT_TIP_INDEX.SCORE_ADD,"1",n),this.isInvincible||(this.updateVolume(1,E.UPDATE_VOLUME_TYPE.EAT_PEOPLE),this.energy+=1),p.dispatchEvent(E.EVENT_TYPE.REFRESH_PEOPLE)):(f.instance.playSound(E.AUDIO_SOUND.COLLECT_PEOPLE_WRONG),T.instance.showFightTips(E.FIGHT_TIP_INDEX.SCORE_MINUS,"1",n),this.isInvincible||(this.updateVolume(-1,E.UPDATE_VOLUME_TYPE.EAT_PEOPLE),this.energy-=2))},L.walkOnSpineRoad=function(){var e,i=d.instance.queryByID("module","1301");this.updateVolume(-i.reduceVolume,E.UPDATE_VOLUME_TYPE.HIT_BY_COLLIDER);var t=this.scriptManModel.ndSocketHead.worldPosition.clone(),n=null===(e=M.mainCamera)||void 0===e?void 0:e.convertToUINode(t,u("Canvas"));f.instance.playSound(E.AUDIO_SOUND.COLLECT_PEOPLE_WRONG),T.instance.showFightTips(E.FIGHT_TIP_INDEX.SCORE_MINUS,"1",n)},L.stopMove=function(){this.rigidBodyComPlayer.clearState(),this.scriptManModel.playAni(E.ANI_TYPE.FIGHT_IDLE,!0,(function(){}),2),this.isStopMove=!0},L.triggerDie=function(){this.rigidBodyComPlayer.clearState(),this.isDie=!0,this.isStopMove=!0},L._arriveEnd=function(){this.isArriveEnd||(this.stopMove(),M.gameType===E.GAME_TYPE.BOSS&&this.calculateJumpPos(),this.energy=0)},L.jump=function(e,i){var n=this;if(!this.isJumping&&!this._isHitBig){this.isJumping=!0,this.preJumpPos=this._arrJumpPos[this._jumpIndex],f.instance.playSound(E.AUDIO_SOUND.DODGE),e?this.scriptManModel.playAni(E.ANI_TYPE.DODGE_LEFT,!1,(function(){n.isDie||n.scriptManModel.playAni(E.ANI_TYPE.FIGHT_IDLE,!0,(function(){}),4)})):this.scriptManModel.playAni(E.ANI_TYPE.DODGE_RIGHT,!1,(function(){n.isDie||n.scriptManModel.playAni(E.ANI_TYPE.FIGHT_IDLE,!0,(function(){}),3)}));var a=90;e?(this._jumpIndex-=1,this._jumpIndex=this._jumpIndex<0?3:this._jumpIndex,a=-90):(this._jumpIndex+=1,this._jumpIndex=this._jumpIndex>3?0:this._jumpIndex),this.jumpPos=this._arrJumpPos[this._jumpIndex];var s=0,r=0;switch(this._jumpIndex){case 0:s=0,r=2;break;case 1:s=2,r=0;break;case 2:s=0,r=-2;break;case 3:s=-2,r=0}var l=new t(this.jumpPos.x+1.5*s,this.jumpPos.y+1.7,this.jumpPos.z+1.5*r),u=new t(this.jumpPos.x-.45*s,this.jumpPos.y,this.jumpPos.z-.45*r),c=new t(this.jumpPos.x+.85*s,this.jumpPos.y+1,this.jumpPos.z+.85*r),_=new t(this.jumpPos.x,this.jumpPos.y+.5,this.jumpPos.z);M.scriptGameCamera.moveCamera(l,u,(function(){M.scriptGameCamera.moveCamera(c,_,(function(){n.isJumping=!1,n.scriptManModel.playAni(E.ANI_TYPE.FIGHT_IDLE,!0,(function(){}),5)}),.3*n._jumpTime,e),i&&i()}),.9*this._jumpTime,e),this.node.getComponent(o).clearState();var p=new t(0,this.node.eulerAngles.y+a,0);h(this.node).to(.5*this._jumpTime,{worldPosition:this.jumpPos,eulerAngles:p}).call((function(){})).start()}},L.calculateJumpPos=function(){var e=b.ndBoss.worldPosition.clone(),i=this.node.worldPosition.clone(),n=e.clone().subtract(i).length();this._arrJumpPos[0]=new t(i.x,.99,i.z),this._arrJumpPos[1]=new t(e.x+n,.99,e.z),this._arrJumpPos[2]=new t(e.x,.99,e.z-n),this._arrJumpPos[3]=new t(e.x-n,.99,e.z),this.preJumpPos=this._arrJumpPos[0],this.jumpPos=this._arrJumpPos[0],console.log("arrJumpPos",this._arrJumpPos),this._endCenterPos=b.ndBoss.worldPosition.clone()},L.hitFlyPlayer=function(e){this.scriptManModel.playAni(E.ANI_TYPE.DIE,!1,(function(){f.instance.playSound(E.AUDIO_SOUND.FALL_DOWN_ON_GROUND),e()}));var i=0,n=0;switch(this._jumpIndex){case 0:i=.5,n=2;break;case 1:i=2,n=-.5;break;case 2:i=-.5,n=-2;break;case 3:i=-2,n=.5}this.jumpPos=this._arrJumpPos[this._jumpIndex];var a=new t(this.jumpPos.x+.8*i,this.jumpPos.y+.8,this.jumpPos.z+.8*n),s=new t(this.jumpPos.x,this.jumpPos.y+.3,this.jumpPos.z),o=new t(this.jumpPos.x+i,this.jumpPos.y+1.6,this.jumpPos.z+n),r=new t(this.jumpPos.x,this.jumpPos.y+.3,this.jumpPos.z);M.scriptGameCamera.moveCamera(a,s,(function(){M.scriptGameCamera.moveCamera(o,r,(function(){}),2)}),3)},L.getOriLookAtPos=function(){return this._arrJumpPos[2].clone()},L._refreshAttackWorPos=function(){this.preJumpPos=this.jumpPos.clone()},L.cameraMoveAttackBoss=function(){var e=this.jumpPos.clone(),i=.5*this.node.worldPosition.clone().subtract(b.ndBoss.worldPosition.clone()).length(),n=0,a=0;switch(this._jumpIndex){case 0:n=1,a=1.5,e.z-=i;break;case 1:n=1.5,a=-1,e.x-=i;break;case 2:n=-1,a=-1.5,e.z+=i;break;case 3:n=-1.5,a=1,e.x+=i}var s=new t(e.x+n,e.y+.8,e.z+a),o=new t(e.x,e.y+.2,e.z);M.scriptGameCamera.moveCamera(s,o)},L.cameraMoveHitFlyBoss=function(){var e=this.jumpPos.clone(),i=.5*this.node.worldPosition.clone().subtract(b.ndBoss.worldPosition.clone()).length(),n=0,a=0,s=0,o=0;switch(this._jumpIndex){case 0:n=-.7,a=1.5,s=0,o=-i;break;case 1:n=1.5,a=.7,s=-i,o=0;break;case 2:n=.7,a=-1.5,s=0,o=i;break;case 3:n=-1.5,a=-.7,s=i,o=0}var r=new t(s,.5,o);e.add(r);var l=new t(e.x+n,e.y+.6,e.z+a),u=new t(e.x,e.y,e.z);M.scriptGameCamera.moveCamera(l,u,(function(){}),2,!0)},L.showFireworks=function(){var e=.5*this.node.worldPosition.clone().subtract(b.ndBoss.worldPosition.clone()).length(),i=0,t=0,n=0,a=0;switch(this._jumpIndex){case 0:i=-.3,t=0,n=0,a=-e;break;case 1:i=0,t=.3,n=-e,a=0;break;case 2:i=.3,t=0,n=0,a=e;break;case 3:i=0,t=-.3,n=e,a=0}var s=this.node.worldPosition.clone();y.instance.playParticle("colorBar/colorBar",s.clone().add3f(n,0,a).add3f(i,0,t),5,1,null,null,!0),y.instance.playParticle("colorBar/colorBar",s.clone().add3f(n,0,a).add3f(0,0,0),5,1,null,null,!0),y.instance.playParticle("colorBar/colorBar",s.clone().add3f(n,0,a).add3f(-i,0,-t),5,1,null,null,!0),f.instance.playSound(E.AUDIO_SOUND.FIRE)},L.hitWall=function(){var e=d.instance.queryByID("module","9001");this.volume-e.reduceVolume-10>0||this.isInvincible?f.instance.playSound(E.AUDIO_SOUND.WALL_THOUGH_SUCCESS):f.instance.playSound(E.AUDIO_SOUND.WALL_THOUGH_FAIL),this.rigidBodyComPlayer.useGravity=!0,this.updateVolume(-e.reduceVolume,E.UPDATE_VOLUME_TYPE.HIT_BY_COLLIDER)},L._equipmentHat=function(){var e=this,i=P.instance.playerInfo.hat.find((function(e){return e.status===E.SHOP_ITEM_STATUS.EQUIPMENT}));this.scriptManModel.ndSocketHead.children.forEach((function(e){I.instance.putNode(e)})),i&&m.getHat("cowBoyHat").then((function(t){var n=I.instance.getNode(t,e.scriptManModel.ndSocketHead).getComponentInChildren(l),a=null==n?void 0:n.materials[0],s=null==a||a.getProperty("mainTexture"),o=Number(i.ID)-1001;s=e.arrTextureHat[o],null==a||a.setProperty("mainTexture",s)}))},L._equipmentShoes=function(){var e=this,i=P.instance.playerInfo.shoes.find((function(e){return e.status===E.SHOP_ITEM_STATUS.EQUIPMENT})),t=function(t,n){t.children.forEach((function(e){I.instance.putNode(e)}));var a=I.instance.getNode(n,t).getComponentInChildren(l),s=null==a?void 0:a.materials[0],o=null==s||s.getProperty("mainTexture"),r=Number(i.ID)-2001;o=e.arrTextureShoes[r],null==s||s.setProperty("mainTexture",o)};i&&(m.getShoes("shoesL").then((function(i){t(e.scriptManModel.ndSocketLeftFoot,i)})),m.getShoes("shoesR").then((function(i){t(e.scriptManModel.ndSocketRightFoot,i)})))},L.updateVolume=function(e,i){var n=this.volume,s=this._targetScale,o=(this._maxScale-this._baseScale)/(this._maxVolume-this._minVolume),r=this.volume+e;this.volume=c(r,this._minVolume,this._maxVolume),this._targetScale=this._baseScale+(this.volume-this._minVolume)*o,i===E.UPDATE_VOLUME_TYPE.EAT_PEOPLE?this.hp=this.volume-10:i===E.UPDATE_VOLUME_TYPE.HIT_BY_COLLIDER?(this.hp=r-10,this.hp<=0&&(this.volume=n,this.hp=this.volume-10,this._targetScale=s,f.instance.playSound(E.AUDIO_SOUND.FALL_DOWN_ON_GROUND),M.scriptPlayer.scriptManModel.playAni(E.ANI_TYPE.DIE,!1,(function(){})),M.isWin=!1)):this.hp=this.volume-10,this._isInit?this._isNeedChangeScale=this._targetScale!==this.node.getScale().x:(this._isInit=!0,this.node.setScale(new t(this._targetScale,this._targetScale,this._targetScale)),a.curScale=this._targetScale,a.scaleRatio=a.curScale/.2)},L.playAniHitBig=function(e){var i=this;this._isHitBig=!0,this.scriptManModel.playAni(E.ANI_TYPE.HIT_BIG,!1,(function(){i._isHitBig=!1,e&&e()}))},L.update=function(){this._isNeedChangeScale&&(a.curScale=a.curScale+.1*(this._targetScale-a.curScale),this.node.setScale(new t(a.curScale,a.curScale,a.curScale)),a.scaleRatio=a.curScale/.2,Number(a.curScale.toFixed(2))===Number(this._targetScale.toFixed(2))&&(this._isNeedChangeScale=!1))},L.lateUpdate=function(e){if(M.isGameStart&&!M.isGameOver&&!M.isGamePause){if(!this.isStopMove&&!this.isEnableMoveLeftOrRight){var i=this.node.worldPosition.clone();ue.set(0,i.y,i.z);var t=i.lerp(ue,.05);this.node.setWorldPosition(t)}this.isInvincible&&(this._energyInterval+=e,this._energyInterval>=.2&&(this.energy-=1,this._energyInterval=0)),this.reviveInvincibleTime>0&&(this.reviveInvincibleTime-=e)}},s=a,(r=[{key:"energy",set:function(e){this._energy=c(e,0,this.energyMax),this._energy>=E.INVINCIBLE_ENERGY?this.isInvincible||(this.isInvincible=!0,this._energyInterval=0,p.dispatchEvent(E.EVENT_TYPE.SHOW_INVINCIBLE),p.dispatchEvent(E.EVENT_TYPE.CHECK_EFFECTIVE),p.dispatchEvent(E.EVENT_TYPE.CHANGE_TO_INVINCIBLE_SPEED)):this._energy<=0&&this.isInvincible&&(this.isInvincible=!1,this._nextSkinType&&(this._skinType=this._nextSkinType,this._nextSkinType=0),this._changeSkin(this._skinType),this._equipmentHat(),this._equipmentShoes(),p.dispatchEvent(E.EVENT_TYPE.PEOPLE_RECOVERY_ORI_SKIN),p.dispatchEvent(E.EVENT_TYPE.RECOVERY_ORI_SPEED),p.dispatchEvent(E.EVENT_TYPE.RESET_PB_ENERGY),y.instance.removeEffect("flyLight",this.node))},get:function(){return this._energy}},{key:"oppositeSidePos",get:function(){var e;return e=0===this._jumpIndex?2:1===this._jumpIndex?3:2===this._jumpIndex?0:3===this._jumpIndex?1:0,this._arrJumpPos[e]}},{key:"damageValue",get:function(){var e=d.instance.queryByID("power",String(P.instance.playerInfo.handPowerLevel));return(this.volume+20)*e.handPowerValue}}])&&ae(s.prototype,r),_&&ae(s,_),a}(_),oe(ie,"scaleRatio",1),oe(ie,"curScale",0),V=re((j=te).prototype,"ndCharacter",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=re(j.prototype,"matGreen01",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=re(j.prototype,"matGreen02",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=re(j.prototype,"matRed01",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=re(j.prototype,"matRed02",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=re(j.prototype,"matYellow01",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=re(j.prototype,"matYellow02",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=re(j.prototype,"matInvincible",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=re(j.prototype,"matGray",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=re(j.prototype,"rigidBodyComPlayer",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=re(j.prototype,"scriptManModel",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=re(j.prototype,"arrTextureHat",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ee=re(j.prototype,"arrTextureShoes",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),x=j))||x));i._RF.pop()}}}));

System.register("chunks:///_virtual/settlementFailPanel.ts",["cc","./constant.ts","./clientEvent.ts","./audioManager.ts","./uiManager.ts","./gameLogic.ts","./gameManager.ts"],(function(e){"use strict";var t,n,i,a,r,o,l,u,c,s,p,E,h,f;return{setters:[function(e){t=e.cclegacy,n=e._decorator,i=e.Node,a=e.LabelComponent,r=e.SpriteComponent,o=e.UITransformComponent,l=e.Size,u=e.Component},function(e){c=e.constant},function(e){s=e.clientEvent},function(e){p=e.AudioManager},function(e){E=e.uiManager},function(e){h=e.GameLogic},function(e){f=e.GameManager}],execute:function(){var _,b,m,v,g,d,y,I,M,S,w,T,D,k,A,N,B;function R(e,t,n,i){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}function O(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function P(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function H(e,t,n,i,a){var r={};return Object.keys(i).forEach((function(e){r[e]=i[e]})),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=n.slice().reverse().reduce((function(n,i){return i(e,t,n)||n}),r),a&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(a):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}t._RF.push({},"67b9253xMJEprAqmuNKFkBO","settlementFailPanel",void 0);var z=n.ccclass,F=n.property;e("SettlementFailPanel",(_=z("SettlementFailPanel"),b=F(i),m=F(a),v=F(r),g=F(r),d=F(i),y=F(i),I=F(i),_((w=H((S=function(e){var t,n;function i(){for(var t,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return R(P(t=e.call.apply(e,[this].concat(i))||this),"ndHeart",w,P(t)),R(P(t),"lbCountDown",T,P(t)),R(P(t),"spIconRevive",D,P(t)),R(P(t),"spIconBeatEnemy",k,P(t)),R(P(t),"ndBtnRevive",A,P(t)),R(P(t),"ndBtnBeatEnemy",N,P(t)),R(P(t),"ndMask",B,P(t)),C(P(t),"_scriptGameManager",null),C(P(t),"_countDown",10),C(P(t),"_maxMaskHeight",260),C(P(t),"_curMaskHeight",0),t}n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a,r,u,_=i.prototype;return _.start=function(){},_.show=function(e){p.instance.playSound(c.AUDIO_SOUND.FAIL),this._scriptGameManager=e,this._countDown=10,this._curMaskHeight=0,f.gameStatus===c.GAME_STATUS.FIGHT?(this.ndBtnBeatEnemy.active=!0,this.ndBtnRevive.active=!1,h.updatePayIcon(c.SHARE_ID.SETTLEMENT_FAIL_BEAT_ENEMY,this.spIconBeatEnemy)):f.gameStatus===c.GAME_STATUS.RUN&&(this.ndBtnBeatEnemy.active=!1,this.ndBtnRevive.active=!0,h.updatePayIcon(c.SHARE_ID.SETTLEMENT_FAIL_REVIVE,this.spIconRevive))},_.onBtnSkipClick=function(){p.instance.playSound(c.AUDIO_SOUND.CLICK),h.vibrateShort(),E.instance.hideDialog("settlement/settlementFailPanel"),s.dispatchEvent(c.EVENT_TYPE.ON_INIT_GAME),E.instance.showDialog("parkour/parkourPanel")},_.onBtnReviveClick=function(){p.instance.playSound(c.AUDIO_SOUND.CLICK),h.vibrateShort(),h.pay(c.SHARE_ID.SETTLEMENT_FAIL_REVIVE,(function(e){e||(E.instance.hideDialog("settlement/settlementFailPanel"),s.dispatchEvent(c.EVENT_TYPE.ON_REVIVE))}))},_.onBtnBeatEnemyClick=function(){p.instance.playSound(c.AUDIO_SOUND.CLICK),h.vibrateShort(),h.pay(c.SHARE_ID.SETTLEMENT_FAIL_BEAT_ENEMY,(function(e){e||(E.instance.hideDialog("settlement/settlementFailPanel"),s.dispatchEvent(c.EVENT_TYPE.ON_REVIVE))}))},_.update=function(e){this.countDown>0&&!h.isWatchVideoAd&&(this.countDown-=e)},a=i,(r=[{key:"countDown",set:function(e){var t;this._countDown=e,this.lbCountDown.string=String(Math.floor(this._countDown)),this._curMaskHeight+=this._maxMaskHeight/(120*this._countDown),this._curMaskHeight=this._curMaskHeight>=this._maxMaskHeight?this._maxMaskHeight:this._curMaskHeight,null===(t=this.ndMask.getComponent(o))||void 0===t||t.setContentSize(new l(300,this._curMaskHeight)),e<0&&(E.instance.hideDialog("settlement/settlementFailPanel"),s.dispatchEvent(c.EVENT_TYPE.ON_INIT_GAME))},get:function(){return this._countDown}}])&&O(a.prototype,r),u&&O(a,u),i}(u)).prototype,"ndHeart",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=H(S.prototype,"lbCountDown",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=H(S.prototype,"spIconRevive",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=H(S.prototype,"spIconBeatEnemy",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=H(S.prototype,"ndBtnRevive",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=H(S.prototype,"ndBtnBeatEnemy",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=H(S.prototype,"ndMask",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=S))||M));t._RF.pop()}}}));

System.register("chunks:///_virtual/parkourPanel.ts",["cc","./constant.ts","./clientEvent.ts","./localConfig.ts","./playerData.ts","./audioManager.ts","./uiManager.ts","./gameLogic.ts","./effectManager.ts","./enemy.ts","./fightMap.ts","./gameManager.ts","./playerRigidController.ts","./homePanel.ts"],(function(i){"use strict";var e,t,n,r,o,s,a,l,c,p,u,h,d,m,y,f,g,_,E,b,T,v,P,A,C,S;return{setters:[function(i){e=i.cclegacy,t=i._decorator,n=i.LabelComponent,r=i.ProgressBarComponent,o=i.Node,s=i.AnimationComponent,a=i.SpriteFrame,l=i.SpriteComponent,c=i.find,p=i.clamp,u=i.view,h=i.Vec3,d=i.Component},function(i){m=i.constant},function(i){y=i.clientEvent},function(i){f=i.localConfig},function(i){g=i.playerData},function(i){_=i.AudioManager},function(i){E=i.uiManager},function(i){b=i.GameLogic},function(i){T=i.EffectManager},function(i){v=i.Enemy},function(i){P=i.FightMap},function(i){A=i.GameManager},function(i){C=i.PlayerRigidController},function(i){S=i.HomePanel}],execute:function(){var M,B,k,I,N,w,D,R,O,F,z,H,G,Y,L,V,U,K,W,j,J,x,Z,q,X,Q,$,ii,ei,ti,ni,ri,oi,si,ai,li,ci,pi,ui,hi,di,mi,yi,fi,gi,_i,Ei,bi,Ti,vi,Pi,Ai,Ci,Si,Mi,Bi,ki;function Ii(i,e,t,n){t&&Object.defineProperty(i,e,{enumerable:t.enumerable,configurable:t.configurable,writable:t.writable,value:t.initializer?t.initializer.call(n):void 0})}function Ni(i){if(void 0===i)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function wi(i,e,t){return e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function Di(i,e,t,n,r){var o={};return Object.keys(n).forEach((function(i){o[i]=n[i]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=t.slice().reverse().reduce((function(t,n){return n(i,e,t)||t}),o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(i,e,o),o=null),o}e._RF.push({},"71fabzF3opEC7aflYS0bVvC","parkourPanel",void 0);var Ri=t.ccclass,Oi=t.property;i("ParkourPanel",(M=Ri("ParkourPanel"),B=Oi(n),k=Oi(n),I=Oi(n),N=Oi(n),w=Oi(r),D=Oi(o),R=Oi(o),O=Oi(o),F=Oi(o),z=Oi(o),H=Oi(r),G=Oi(r),Y=Oi(r),L=Oi(o),V=Oi(r),U=Oi(r),K=Oi(o),W=Oi(o),j=Oi(n),J=Oi(s),x=Oi(o),Z=Oi(r),q=Oi(a),X=Oi(a),Q=Oi(l),$=Oi(o),ii=Oi(o),M((ni=Di((ti=function(i){var e,t;function n(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Ii(Ni(e=i.call.apply(i,[this].concat(n))||this),"lbLevel",ni,Ni(e)),Ii(Ni(e),"lbPeople",ri,Ni(e)),Ii(Ni(e),"lbDiamond",oi,Ni(e)),Ii(Ni(e),"lbKey",si,Ni(e)),Ii(Ni(e),"progressBarCountdown",ai,Ni(e)),Ii(Ni(e),"ndCountDown",li,Ni(e)),Ii(Ni(e),"ndInfo",ci,Ni(e)),Ii(Ni(e),"ndPeople",pi,Ni(e)),Ii(Ni(e),"ndContinueClick",ui,Ni(e)),Ii(Ni(e),"ndFightNormal",hi,Ni(e)),Ii(Ni(e),"pbNormalPlayerBlood",di,Ni(e)),Ii(Ni(e),"pbNormalEnemyBlood",mi,Ni(e)),Ii(Ni(e),"pbNormalCrazyClick",yi,Ni(e)),Ii(Ni(e),"ndFightBoss",fi,Ni(e)),Ii(Ni(e),"pbPlayerBlood",gi,Ni(e)),Ii(Ni(e),"pbBossBlood",_i,Ni(e)),Ii(Ni(e),"ndArrow",Ei,Ni(e)),Ii(Ni(e),"ndScoreLight",bi,Ni(e)),Ii(Ni(e),"lbScoreNum",Ti,Ni(e)),Ii(Ni(e),"aniScore",vi,Ni(e)),Ii(Ni(e),"ndEnergyProgress",Pi,Ni(e)),Ii(Ni(e),"pbEnergy",Ai,Ni(e)),Ii(Ni(e),"sfEnergyNormal",Ci,Ni(e)),Ii(Ni(e),"sfEnergyColorful",Si,Ni(e)),Ii(Ni(e),"spEnergyBar",Mi,Ni(e)),Ii(Ni(e),"ndHomePanel",Bi,Ni(e)),Ii(Ni(e),"ndContainer",ki,Ni(e)),wi(Ni(e),"bossStatus",m.BOSS_STATUS.HIDE),wi(Ni(e),"_progressCrazyClick",1),wi(Ni(e),"_countDownTime",0),wi(Ni(e),"_intervalCrazyClick",0),wi(Ni(e),"_mapInfo",null),wi(Ni(e),"_attackInterval",1),wi(Ni(e),"_bossAttackTimes",0),wi(Ni(e),"_bossComaTime",0),wi(Ni(e),"_bossFightDuration",0),wi(Ni(e),"_scriptGameManager",null),wi(Ni(e),"_clickTimes",0),wi(Ni(e),"_scriptPlayerRigidController",null),wi(Ni(e),"_debugClickTimes",0),e}t=i,(e=n).prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t;var r=n.prototype;return r.onEnable=function(){this.node.on(o.EventType.TOUCH_START,this._onTouchStart,this),this.node.on(o.EventType.TOUCH_MOVE,this._onTouchMove,this),this.node.on(o.EventType.TOUCH_END,this._onTouchEnd,this),this.node.on(o.EventType.TOUCH_CANCEL,this._onTouchCancel,this),y.on(m.EVENT_TYPE.REFRESH_DIAMOND,this._refreshDiamond,this),y.on(m.EVENT_TYPE.REFRESH_PEOPLE,this._refreshPeople,this),y.on(m.EVENT_TYPE.REFRESH_KEY,this._refreshKey,this),y.on(m.EVENT_TYPE.RESET_PB_ENERGY,this._resetPbEnergy,this),y.on(m.EVENT_TYPE.ARRIVE_END,this._arriveEnd,this),y.on(m.EVENT_TYPE.WEAPON_HIT_PLAYER,this._weaponHitPlayer,this),y.on(m.EVENT_TYPE.ON_REVIVE,this._onRevive,this),y.on(m.EVENT_TYPE.SHOW_INVINCIBLE,this._showInvincible,this)},r.onDisable=function(){this.node.off(o.EventType.TOUCH_START,this._onTouchStart,this),this.node.off(o.EventType.TOUCH_MOVE,this._onTouchMove,this),this.node.off(o.EventType.TOUCH_END,this._onTouchEnd,this),this.node.off(o.EventType.TOUCH_CANCEL,this._onTouchCancel,this),y.off(m.EVENT_TYPE.REFRESH_DIAMOND,this._refreshDiamond,this),y.off(m.EVENT_TYPE.REFRESH_PEOPLE,this._refreshPeople,this),y.off(m.EVENT_TYPE.REFRESH_KEY,this._refreshKey,this),y.off(m.EVENT_TYPE.RESET_PB_ENERGY,this._resetPbEnergy,this),y.off(m.EVENT_TYPE.ARRIVE_END,this._arriveEnd,this),y.off(m.EVENT_TYPE.WEAPON_HIT_PLAYER,this._weaponHitPlayer,this),y.off(m.EVENT_TYPE.ON_REVIVE,this._onRevive,this),y.off(m.EVENT_TYPE.SHOW_INVINCIBLE,this._showInvincible,this)},r.start=function(){this.lbDiamond.string="0",this.lbPeople.string="0",this.lbKey.string="0"},r.show=function(){var i,e;this._scriptGameManager=null===(i=c("gameManager"))||void 0===i?void 0:i.getComponent(A),this._progressCrazyClick=0,this._clickTimes=0,this._intervalCrazyClick=m.INTERVAL_CRAZY_CLICK,this._debugClickTimes=0,this.ndHomePanel.active=!0,null===(e=this.ndHomePanel.getComponent(S))||void 0===e||e.show(),this.ndContainer.active=!1,this.spEnergyBar.spriteFrame=this.sfEnergyNormal},r._showInvincible=function(){this.spEnergyBar.spriteFrame=this.sfEnergyColorful},r._onTouchStart=function(i){if(this.ndHomePanel.active){this.ndContainer.active=!0,this.ndHomePanel.active=!1,y.dispatchEvent(m.EVENT_TYPE.CHANGE_OFFSET),A.isGameStart=!0,A.scriptPlayer.scriptManModel.playAni(m.ANI_TYPE.RUN,!0),this.ndInfo.active=!0,this.ndEnergyProgress.active=!0,this.ndContinueClick.active=!1,this.ndFightBoss.active=!1,this.ndCountDown.active=!1,this.ndFightNormal.active=!1,this.ndScoreLight.active=!1;var e=g.instance.playerInfo.level;this.lbLevel.string="第"+e+"关",this._mapInfo=f.instance.queryByID("map",e),this.ndPeople.active=!0,A.gameType===m.GAME_TYPE.BOSS?this.bossStatus=m.BOSS_STATUS.HIDE:A.gameType===m.GAME_TYPE.REWARD&&(this.ndPeople.active=!1),this._scriptPlayerRigidController=A.scriptPlayer.node.getComponent(C),b.customEventStatistics("事件统计-开始游戏")}this._scriptPlayerRigidController.touchStart(i)},r._onTouchMove=function(i){A.isGameOver||A.isGamePause||A.gameStatus===m.GAME_STATUS.RUN&&A.isGameStart&&this._scriptPlayerRigidController.touchMove(i)},r._onTouchEnd=function(i){var e=this;if(!A.isGameOver)if(this._scriptPlayerRigidController.touchEnd(i),A.gameStatus===m.GAME_STATUS.RUN);else if(A.gameStatus===m.GAME_STATUS.FIGHT)if(A.gameType===m.GAME_TYPE.NORMAL)A.scriptPlayer.isArriveEnd&&this.pbNormalEnemyBlood.progress>0&&this.ndFightNormal.active&&!P.scriptEnemy.scriptManModel.isKicking&&!P.scriptEnemy.scriptManModel.isAttacking&&(this._progressCrazyClick=p(this._progressCrazyClick+.15,0,1),this.pbNormalCrazyClick.progress=this._progressCrazyClick,A.scriptPlayer.scriptManModel.playAniAttack((function(){var i=A.scriptPlayer.damageValue/e._mapInfo.enemyHp,t=e.pbNormalEnemyBlood.progress-i;e.pbNormalEnemyBlood.progress=t<=0?0:t,e.pbNormalEnemyBlood.progress<=0?(e.ndFightNormal.active=!1,e.ndContinueClick.active=!1,P.scriptEnemy.scriptManModel.isKicking||A.scriptPlayer.scriptManModel.playAni(m.ANI_TYPE.KICK,!1)):P.scriptEnemy.scriptManModel.isKicking||P.scriptEnemy.scriptManModel.playAni(m.ANI_TYPE.HIT_SMALL,!1,(function(){P.scriptEnemy.scriptManModel.isKicking||P.scriptEnemy.scriptManModel.playAni(m.ANI_TYPE.FIGHT_IDLE,!0,(function(){}),6)}))})));else if(A.gameType===m.GAME_TYPE.REWARD)A.scriptPlayer.isArriveEnd&&this.ndCountDown.active&&(this.ndScoreLight.active||(this.ndScoreLight.active=!0),this._clickTimes+=1,A.scriptPlayer.scriptManModel.playAniAttack(),this._refreshMultiple());else if(A.gameType===m.GAME_TYPE.BOSS&&A.scriptPlayer.isArriveEnd&&!A.isGameOver)if(this.bossStatus===m.BOSS_STATUS.HIDE){if(this.ndArrow.active){var t=i.getLocationX()<.5*u.getCanvasSize().x;A.scriptPlayer.jump(t,(function(){e.ndArrow.active=!1}))}}else if(this.bossStatus===m.BOSS_STATUS.FIGHT){if(this.ndContinueClick.active){console.log("boss眩晕，玩家攻击"),A.scriptPlayer.scriptManModel.playAniAttack((function(){e.bossStatus!==m.BOSS_STATUS.FIGHT||P.scriptBoss.isAngry||P.scriptBoss.isAttacking||P.scriptBoss.isComa||P.scriptBoss.playAni(m.BOSS_ANI_TYPE.BOSS_HIT,!1,(function(){e.bossStatus!==m.BOSS_STATUS.FIGHT||P.scriptBoss.isAngry||P.scriptBoss.isAttacking||P.scriptBoss.isComa||P.scriptBoss.playAni(m.BOSS_ANI_TYPE.BOSS_FIGHT_IDLE,!0)})),A.scriptPlayer.isDie||A.scriptPlayer.isJumping||A.scriptPlayer.scriptManModel.isKicking||A.scriptPlayer.scriptManModel.playAni(m.ANI_TYPE.FIGHT_IDLE,!0)}));var n=A.scriptPlayer.damageValue/this._mapInfo.enemyHp,r=Number((this.pbBossBlood.progress-n).toFixed(2));this.pbBossBlood.progress=r<=0?0:r,this.pbBossBlood.progress<=0&&this.ndFightBoss.active&&(this.ndFightBoss.active=!1,this.ndCountDown.active=!0,this.progressBarCountdown.progress=1,this._countDownTime=this._mapInfo.bossComaTime,this.bossStatus=m.BOSS_STATUS.COMA,P.scriptBoss.showAniComa(),A.scriptPlayer.cameraMoveAttackBoss())}}else this.bossStatus===m.BOSS_STATUS.COMA&&this.ndCountDown.active&&(this.ndScoreLight.active||(this.ndScoreLight.active=!0),console.log("boss昏迷，玩家攻击"),this._clickTimes+=1,A.scriptPlayer.scriptManModel.playAniAttack(),this._refreshMultiple())},r._onTouchCancel=function(i){this._scriptPlayerRigidController.touchCancel(i)},r._refreshDiamond=function(i){void 0===i&&(i=1),this._scriptGameManager.diamond+=i,this.lbDiamond.string=String(this._scriptGameManager.diamond),A.gameType!==m.GAME_TYPE.REWARD||A.scriptPlayer.isInvincible||(A.scriptPlayer.energy+=1)},r._refreshPeople=function(i){void 0===i&&(i=1),this._scriptGameManager.people+=i,this.lbPeople.string=String(this._scriptGameManager.people)},r._refreshKey=function(){this.lbKey.string=g.instance.playerInfo.key},r._resetPbEnergy=function(){this.pbEnergy.progress=0,this.spEnergyBar.spriteFrame=this.sfEnergyNormal},r._refreshMultiple=function(){var i=this._scriptGameManager.kickPowerItemInfo.kickPowerValue,e=Math.ceil(.2*this._clickTimes*i);this.lbScoreNum.string=String(e),this._scriptGameManager.multiple=e,this.aniScore.stop(),this.aniScore.play()},r._arriveEnd=function(){var i=this,e=A.scriptPlayer.node.worldPosition.clone(),t=new h,n=new h;if(this.ndInfo.active=!1,this.ndEnergyProgress.active=!1,this._clickTimes=0,A.gameType==m.GAME_TYPE.NORMAL){var r=P.ndEnemy.worldPosition.clone(),o=A.scriptPlayer.node.worldPosition.clone(),s=.5*(r.z-o.z);t=o.clone().add3f(2.2,1,s),n=o.clone().add3f(0,.4,s),A.scriptGameCamera.moveCamera(t,n,(function(){i.ndFightBoss.active=!1,i.ndCountDown.active=!1,i.ndFightNormal.active=!0,i.pbNormalEnemyBlood.progress=1,i.pbNormalPlayerBlood.progress=1,i.pbNormalCrazyClick.progress=0,i.ndContinueClick.active=!0,A.scriptPlayer.isArriveEnd=!0}),2,!1)}else A.gameType==m.GAME_TYPE.REWARD?(t=e.clone().add3f(2.5,.9,.45),n=e.clone().add3f(0,.3,-.25),A.scriptGameCamera.moveCamera(t,n,(function(){i.ndFightBoss.active=!1,i.ndCountDown.active=!0,i.ndFightNormal.active=!1,i.ndContinueClick.active=!0,i._countDownTime=m.COUNTDOWN_REWARD,A.scriptPlayer.isArriveEnd=!0}),2,!1)):A.gameType==m.GAME_TYPE.BOSS&&(A.scriptPlayer.isArriveEnd||(t=e.clone().add3f(0,1,2),n=e.clone().add3f(0,.4,0),A.scriptGameCamera.moveCamera(t,n,(function(){i.ndFightBoss.active=!0,i.ndCountDown.active=!1,i.ndFightNormal.active=!1,i.ndArrow.active=!1,i.pbPlayerBlood.progress=1,i.pbBossBlood.progress=1,i._attackInterval=0,i._bossAttackTimes=i._mapInfo.bossAttackTimes,i._bossFightDuration=i._mapInfo.bossFightDuration,i._bossComaTime=0,P.scriptBoss.bossAttackTimes=i._bossAttackTimes,A.scriptPlayer.isArriveEnd=!0}),1,!0)))},r._weaponHitPlayer=function(){var i=this;if(!A.scriptPlayer.isJumping){var e;b.vibrateShort(),_.instance.playSound("bossWeaponHit"),A.scriptPlayer.playAniHitBig((function(){i.pbPlayerBlood.progress>0&&A.scriptPlayer.scriptManModel.playAni(m.ANI_TYPE.FIGHT_IDLE,!0,(function(){}),7)}));var t=this._mapInfo.enemyDamage/A.scriptPlayer.hp,n=this.pbPlayerBlood.progress-t;this.pbPlayerBlood.progress=n<=0?0:n,this.pbPlayerBlood.progress<=0&&(A.gameSpeed=.2,A.scriptPlayer.hitFlyPlayer((function(){var e;null===(e=P.scriptBoss)||void 0===e||e.playAni(m.BOSS_ANI_TYPE.BOSS_WIN,!0),T.instance.removeEffect("attackSmoke"),A.isWin=!1,i.ndFightBoss.active=!1}))),A.scriptPlayer.scriptManModel.playHitHeadEffect(),null===(e=P.scriptBoss)||void 0===e||e.refreshAniAttackSpeed()}},r._onRevive=function(){A.gameStatus===m.GAME_STATUS.RUN||A.gameStatus===m.GAME_STATUS.FIGHT&&(this.ndInfo.active=!0)},r.onBtnDebugClick=function(){this._debugClickTimes+=1,this._debugClickTimes>=5&&(this._debugClickTimes=0,E.instance.showDialog("debug/debugPanel"))},r.update=function(i){var e=this;if(!A.isGameOver)if(A.gameStatus===m.GAME_STATUS.RUN)this.pbEnergy.progress=A.scriptPlayer.energy/A.scriptPlayer.energyMax,this.pbEnergy.progress<=0&&(this.spEnergyBar.spriteFrame=this.sfEnergyNormal);else if(A.gameStatus===m.GAME_STATUS.FIGHT){var t;if(A.gameType==m.GAME_TYPE.NORMAL){if(this._intervalCrazyClick-=i,this._intervalCrazyClick<=0&&(this._intervalCrazyClick=m.INTERVAL_CRAZY_CLICK,this._progressCrazyClick=this._progressCrazyClick-.01<=0?0:this._progressCrazyClick-.01,this.pbNormalCrazyClick.progress=this._progressCrazyClick),!A.scriptPlayer.scriptManModel.isAttacking&&this.ndFightNormal.active&&this.pbNormalEnemyBlood.progress>0&&!A.isRevive&&(this._attackInterval-=i),this._attackInterval<=0&&!A.scriptPlayer.scriptManModel.isAttacking&&this.ndFightNormal.active&&!A.scriptPlayer.scriptManModel.isKicking)null===(t=P.scriptEnemy.scriptManModel)||void 0===t||t.playAniAttack((function(){P.scriptEnemy.scriptManModel.playAni(m.ANI_TYPE.FIGHT_IDLE,!0,(function(){}),8);var i=e._mapInfo.enemyDamage/A.scriptPlayer.hp,t=e.pbNormalPlayerBlood.progress-i;if(e.pbNormalPlayerBlood.progress=t<=0?0:t,e.pbNormalPlayerBlood.progress<=0){e.ndFightNormal.active=!1,e.ndContinueClick.active=!1;var n,r=A.scriptPlayer.node.worldPosition.clone(),o=r.clone().add3f(2.2,1.3,-1),s=r.clone().add3f(0,.3,0);if(A.scriptGameCamera.moveCamera(o,s,(function(){})),!A.scriptPlayer.scriptManModel.isKicking)null===(n=P.ndEnemy.getComponent(v))||void 0===n||n.scriptManModel.playAni(m.ANI_TYPE.KICK)}else A.scriptPlayer.scriptManModel.isKicking||A.scriptPlayer.scriptManModel.playAni(m.ANI_TYPE.HIT_SMALL,!1,(function(){A.scriptPlayer.scriptManModel.isKicking||A.scriptPlayer.scriptManModel.playAni(m.ANI_TYPE.FIGHT_IDLE,!0,(function(){}),9)}))})),this._attackInterval=this._mapInfo.attackInterval}else if(A.gameType==m.GAME_TYPE.REWARD){if(this._countDownTime>0){this._countDownTime-=i;var n=this._countDownTime/m.COUNTDOWN_REWARD;this.progressBarCountdown.progress=p(n,0,1),this._countDownTime<=0&&(this.ndContinueClick.active=!1,this.ndCountDown.active=!1,A.scriptPlayer.scriptManModel.playAni(m.ANI_TYPE.KICK,!1,(function(){})))}}else if(A.gameType===m.GAME_TYPE.BOSS){if(!A.scriptPlayer.isArriveEnd||A.isRevive)return;if(this.bossStatus===m.BOSS_STATUS.HIDE){var r,o;if((null===(r=P.scriptBoss)||void 0===r?void 0:r.isAttacking)||A.scriptPlayer.scriptManModel.notIdleAniPlaying())return;if(this._bossAttackTimes>0)if(this._attackInterval<=0&&(this._attackInterval=this._mapInfo.attackInterval,T.instance.playAni("circleRed/circleRed","circleRed01",A.scriptPlayer.preJumpPos.clone().add3f(0,.02,0),!0,!1,1,(function(){})),this.ndArrow.active=!0),this._attackInterval-=i,this._attackInterval<=0)null===(o=P.scriptBoss)||void 0===o||o.playAniAttack((function(){T.instance.playParticle("smoke/attackSmoke",A.scriptPlayer.preJumpPos,1),T.instance.playAni("circleRed/circleRed","circleRed02",A.scriptPlayer.preJumpPos.clone().add3f(0,.02,0),!1,!1,1,(function(){})),e.ndArrow.active=!1,P.scriptBoss.isLookAtPlayer=!0,e._bossAttackTimes-=1,P.scriptBoss.bossAttackTimes-=1,e._bossAttackTimes<=0&&(e.bossStatus=m.BOSS_STATUS.FIGHT)}))}else if(this.bossStatus===m.BOSS_STATUS.FIGHT){var s,a,l,c,u;if((null===(s=P.scriptBoss)||void 0===s?void 0:s.isAngry)||A.scriptPlayer.isDie)return;if(!(null===(a=P.scriptBoss)||void 0===a?void 0:a.isVertigo)&&!P.scriptBoss.isAttacking)null===(c=P.scriptBoss)||void 0===c||c.showAniVertigo(),this.ndContinueClick.active=!0;if(null===(l=P.scriptBoss)||void 0===l?void 0:l.isVertigo)if(this._bossFightDuration-=i,this._bossFightDuration<=0)null===(u=P.scriptBoss)||void 0===u||u.playAniAngry((function(){e.bossStatus!==m.BOSS_STATUS.COMA&&(e.bossStatus=m.BOSS_STATUS.HIDE,e._attackInterval=0,e._bossAttackTimes=e._mapInfo.bossAttackTimes,e._bossFightDuration=e._mapInfo.bossFightDuration,P.scriptBoss.bossAttackTimes=e._bossAttackTimes)})),this.ndContinueClick.active=!1,this.ndArrow.active=!1}else if(this.bossStatus===m.BOSS_STATUS.COMA&&this._countDownTime>0){this._countDownTime-=i;var h=this._countDownTime/this._mapInfo.bossComaTime;this.progressBarCountdown.progress=p(h,0,1),this._countDownTime<=0&&this.ndCountDown.active&&(this.ndContinueClick.active=!1,this.ndCountDown.active=!1,A.scriptPlayer.scriptManModel.playAni(m.ANI_TYPE.KICK,!1,(function(){})),A.scriptPlayer.cameraMoveHitFlyBoss())}}}},n}(d)).prototype,"lbLevel",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ri=Di(ti.prototype,"lbPeople",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),oi=Di(ti.prototype,"lbDiamond",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),si=Di(ti.prototype,"lbKey",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ai=Di(ti.prototype,"progressBarCountdown",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),li=Di(ti.prototype,"ndCountDown",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ci=Di(ti.prototype,"ndInfo",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),pi=Di(ti.prototype,"ndPeople",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ui=Di(ti.prototype,"ndContinueClick",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),hi=Di(ti.prototype,"ndFightNormal",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),di=Di(ti.prototype,"pbNormalPlayerBlood",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),mi=Di(ti.prototype,"pbNormalEnemyBlood",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),yi=Di(ti.prototype,"pbNormalCrazyClick",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),fi=Di(ti.prototype,"ndFightBoss",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),gi=Di(ti.prototype,"pbPlayerBlood",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_i=Di(ti.prototype,"pbBossBlood",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ei=Di(ti.prototype,"ndArrow",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),bi=Di(ti.prototype,"ndScoreLight",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ti=Di(ti.prototype,"lbScoreNum",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),vi=Di(ti.prototype,"aniScore",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Pi=Di(ti.prototype,"ndEnergyProgress",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ai=Di(ti.prototype,"pbEnergy",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ci=Di(ti.prototype,"sfEnergyNormal",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Si=Di(ti.prototype,"sfEnergyColorful",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Mi=Di(ti.prototype,"spEnergyBar",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Bi=Di(ti.prototype,"ndHomePanel",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ki=Di(ti.prototype,"ndContainer",[ii],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ei=ti))||ei));e._RF.pop()}}}));

System.register("chunks:///_virtual/invinciblePanel.ts",["cc","./constant.ts","./audioManager.ts","./uiManager.ts","./gameLogic.ts","./gameManager.ts"],(function(e){"use strict";var n,i,t,r,a,o,c,l,u;return{setters:[function(e){n=e.cclegacy,i=e._decorator,t=e.SpriteComponent,r=e.Component},function(e){a=e.constant},function(e){o=e.AudioManager},function(e){c=e.uiManager},function(e){l=e.GameLogic},function(e){u=e.GameManager}],execute:function(){var s,p,f,b,v;function y(e,n,i,t){i&&Object.defineProperty(e,n,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(t):void 0})}function I(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}n._RF.push({},"76c31k440ZLm4iiwTKR4lGu","invinciblePanel",void 0);var g=i.ccclass,d=i.property;e("InvinciblePanel",(s=g("InvinciblePanel"),p=d(t),s((v=function(e,n,i,t,r){var a={};return Object.keys(t).forEach((function(e){a[e]=t[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=i.slice().reverse().reduce((function(i,t){return t(e,n,i)||i}),a),r&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(r):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,n,a),a=null),a}((b=function(e){var n,i;function t(){for(var n,i=arguments.length,t=new Array(i),r=0;r<i;r++)t[r]=arguments[r];return y(I(n=e.call.apply(e,[this].concat(t))||this),"spPayIcon",v,I(n)),n}i=e,(n=t).prototype=Object.create(i.prototype),n.prototype.constructor=n,n.__proto__=i;var r=t.prototype;return r.start=function(){},r.show=function(){l.updatePayIcon(a.SHARE_ID.INVINCIBLE,this.spPayIcon)},r.onBtnInvincibleClick=function(){var e=this;o.instance.playSound(a.AUDIO_SOUND.CLICK),l.vibrateShort(),u.scriptPlayer.energy!==a.INVINCIBLE_ENERGY&&l.pay(a.SHARE_ID.INVINCIBLE,(function(n){n||(u.scriptPlayer.energy=a.INVINCIBLE_ENERGY,u.scriptPlayer.updateVolume(50),e._close())}))},r.onBtnCloseClick=function(){o.instance.playSound(a.AUDIO_SOUND.CLICK),l.vibrateShort(),this._close()},r._close=function(){c.instance.hideDialog("invincible/invinciblePanel")},t}(r)).prototype,"spPayIcon",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=b))||f));n._RF.pop()}}}));

System.register("chunks:///_virtual/resourceUtil.ts",["cc"],(function(e){"use strict";var r,t,o,n,a,i,s,c,l,f,u,d;return{setters:[function(e){r=e.cclegacy,t=e._decorator,o=e.resources,n=e.error,a=e.Prefab,i=e.SpriteFrame,s=e.Texture2D,c=e.isValid,l=e.instantiate,f=e.find,u=e.SpriteComponent,d=e.Color}],execute:function(){var m;r._RF.push({},"7844e1bOwZK+7JMYjENQU5v","resourceUtil",void 0);var p=t.ccclass;e("resourceUtil",p("resourceUtil")(m=function(){function e(){}return e.loadRes=function(e,r,t){o.load(e,(function(e,r){if(e)return n(e.message||e),void t(e,r);t(null,r)}))},e.loadEffectRes=function(e){var r=this;return new Promise((function(t,o){r.loadRes("prefab/effect/"+e,a,(function(r,n){if(r)return console.error("effect load failed",e),void(o&&o());t&&t(n)}))}))},e.loadModelRes=function(e){var r=this;return new Promise((function(t,o){r.loadRes("prefab/model/"+e,a,(function(r,n){if(r)return console.error("model load failed",e),void(o&&o());t&&t(n)}))}))},e.loadMapModelRes=function(e){var r=this;return new Promise((function(t,o){r.loadRes("map/"+e,a,(function(r,n){if(r)return console.error("map model load failed",e),void(o&&o());t&&t(n)}))}))},e.loadModelResArr=function(e,r,t,o){void 0===t&&(t=function(){}),void 0===o&&(o=function(){});var n=r.map((function(r){return e+"/"+r}));cc.loader.loadResArray(n,a,t,o)},e.loadSpriteFrameRes=function(e){var r=this;return new Promise((function(t,o){r.loadRes(e,i,(function(r,n){if(r)return console.error("spriteFrame load failed!",e,r),void(o&&o());var a=new s;a.image=n;var c=new i;c.texture=a,t&&t(c)}))}))},e.setAvatarIcon=function(e,r,t){this.loadSpriteFrameRes("textures/avatar/"+e).then((function(e){r&&c(r)?(r.spriteFrame=e,t&&t()):console.log("sprite is null")}))},e.getMap=function(e,r){var t="map";t+=e>=100?e:e>=10?"0"+e:"00"+e,this.loadRes("map/config/"+t,null,(function(e,t){if(e)r(e,t);else{var o="";if(t._file){window.LZString&&(o=window.LZString.decompressFromEncodedURIComponent(t._file));var n=JSON.parse(o);r(null,n)}else if(t.text){window.LZString&&(o=window.LZString.decompressFromEncodedURIComponent(t.text));n=JSON.parse(o);r(null,n)}else t.json?r(null,t.json):r("failed")}}))},e.getMapObj=function(e,r,t,o){for(var n=[],i=0;i<r.length;i++)n.push("map/"+e+"/"+r[i]);cc.loader.loadResArray(n,a,t,o)},e.getUIPrefabRes=function(e,r){this.loadRes("prefab/ui/"+e,a,r)},e.createUI=function(e,r,t){this.getUIPrefabRes(e,(function(e,o){if(!e){var n=l(o);n.setPosition(0,0,0),t||(t=f("Canvas")),t.addChild(n),r&&r(null,n)}}))},e.getCarsBatch=function(e,r,t){for(var o=[],n=0;n<e.length;n++)o.push("prefab/car/car"+e[n]);cc.loader.loadResArray(o,a,r,t)},e.getUICar=function(e,r){this.loadRes("prefab/ui/car/uiCar"+e,a,r)},e.getCar=function(e,r){this.loadRes("prefab/car/car"+e,a,r)},e.setCarIcon=function(e,r,t,o){var n="gamePackage/texture/car/car"+e;t&&(n+="Black"),this.setSpriteFrame(n,r,o)},e.getJsonData=function(e,r){cc.loader.loadRes("datas/"+e,(function(e,t){e?cc.error(e.message||e):t.json?r(e,t.json):r("failed!!!")}))},e.getData=function(e,r){cc.loader.loadRes("datas/"+e,(function(e,t){if(e)cc.error(e.message||e);else{var o=t.text;o?r(e,o):cc.loader.load(t.nativeUrl,(function(e,t){r(e,o=t)}))}}))},e.setSpriteFrame=function(e,r,t){r.node.active=!1,this.loadRes(e+"/spriteFrame",i,(function(o,n){if(o)return console.error("set sprite frame failed! err:",e,o),void t(o);r&&c(r)&&(r.spriteFrame=n,r.node.active=!0,t(null))}))},e.setRemoteImage=function(e,r,t){if(e&&e.startsWith("http")){cc.loader.load({url:e,type:"png"},(function(r,o){if(r)return console.error("set avatar failed! err:",e,r),void t(r);var n=new s;n.image=o;var a=new i;a.texture=n,t&&t(null,a)}))}},e.setGameIcon=function(e,r,t){e.startsWith("http")?this.setRemoteImage(e,r,t):this.setSpriteFrame("gamePackage/textures/icons/games/"+e,r,t)},e.getCustomer=function(e,r){this.loadRes("gamePackage/map/customer/customer"+e,a,r)},e.setCustomerIcon=function(e,r,t){var o="gamePackage/texture/head/head"+e;this.setSpriteFrame(o,r,t)},e.getEffect=function(e,r){this.loadRes("prefab/effect/"+e,a,r)},e.setGray=function(e,r){for(var t=e.getComponentsInChildren(u),o=0;o<t.length;++o){var n=t[o];n.color=r?new d(255,255,255,255):new d(124,124,124,255)}},e.getHat=function(e){var r=this;return new Promise((function(t,o){r.loadRes("prefab/model/hat/"+e,a,(function(r,n){if(r)return console.error("model load failed",e),void(o&&o());t&&t(n)}))}))},e.getShoes=function(e){var r=this;return new Promise((function(t,o){r.loadRes("prefab/model/shoes/"+e,a,(function(r,n){if(r)return console.error("model load failed",e),void(o&&o());t&&t(n)}))}))},e}())||m);r._RF.pop()}}}));

System.register("chunks:///_virtual/settingPanel.ts",["cc","./constant.ts","./storageManager.ts","./audioManager.ts","./uiManager.ts","./gameLogic.ts"],(function(t){"use strict";var e,i,n,a,r,o,s,c,u,l,b,p,g;return{setters:[function(t){e=t.cclegacy,i=t._decorator,n=t.Vec3,a=t.SpriteFrame,r=t.Node,o=t.SpriteComponent,s=t.profiler,c=t.Component},function(t){u=t.constant},function(t){l=t.StorageManager},function(t){b=t.AudioManager},function(t){p=t.uiManager},function(t){g=t.GameLogic}],execute:function(){var h,f,d,_,O,S,v,D,y,m,M,B,C;function z(t,e,i,n){i&&Object.defineProperty(t,e,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(n):void 0})}function w(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function V(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function U(t,e,i,n,a){var r={};return Object.keys(n).forEach((function(t){r[t]=n[t]})),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=i.slice().reverse().reduce((function(i,n){return n(t,e,i)||i}),r),a&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(a):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(t,e,r),r=null),r}e._RF.push({},"814c58vALJGOo1zLcj79+/9","settingPanel",void 0);var P=i.ccclass,A=i.property,I=new n;t("SettingPanel",(h=P("SettingPanel"),f=A(a),d=A(a),_=A(r),O=A(r),S=A(r),h((y=U((D=function(t){var e,i;function n(){for(var e,i=arguments.length,n=new Array(i),a=0;a<i;a++)n[a]=arguments[a];return z(w(e=t.call.apply(t,[this].concat(n))||this),"sfSelect",y,w(e)),z(w(e),"sfUnSelect",m,w(e)),z(w(e),"ndBtnVibration",M,w(e)),z(w(e),"ndBtnMusic",B,w(e)),z(w(e),"ndBtnDebug",C,w(e)),V(w(e),"_isMusicOpen",!1),V(w(e),"_isVibrationOpen",!1),V(w(e),"_isDebugOpen",!1),e}i=t,(e=n).prototype=Object.create(i.prototype),e.prototype.constructor=e,e.__proto__=i;var a=n.prototype;return a.start=function(){},a.show=function(){var t,e;this._isMusicOpen=b.instance.getAudioSetting(!0),this._changeState(this.ndBtnMusic,this._isMusicOpen),this._isVibrationOpen=null===(t=l.instance.getGlobalData("vibration"))||void 0===t||t,this._changeState(this.ndBtnVibration,this._isVibrationOpen),this._isDebugOpen=null!==(e=l.instance.getGlobalData("debug"))&&void 0!==e&&e,this._changeState(this.ndBtnDebug,this._isDebugOpen)},a._changeState=function(t,e){var i=t.getComponent(o),n=t.getChildByName("dot"),a=n.position.clone();e?(i.spriteFrame=this.sfSelect,I.set(24,a.y,a.z),n.setPosition(I)):(i.spriteFrame=this.sfUnSelect,I.set(-24,a.y,a.z),n.setPosition(I))},a.onBtnVibrationClick=function(){b.instance.playSound(u.AUDIO_SOUND.CLICK),g.vibrateShort(),this._isVibrationOpen=!this._isVibrationOpen,this._changeState(this.ndBtnVibration,this._isVibrationOpen),l.instance.setGlobalData("vibration",this._isVibrationOpen)},a.onBtnMusicClick=function(){b.instance.playSound(u.AUDIO_SOUND.CLICK),g.vibrateShort(),this._isMusicOpen=!this._isMusicOpen,this._changeState(this.ndBtnMusic,this._isMusicOpen),this._isMusicOpen?(b.instance.openMusic(),b.instance.openSound()):(b.instance.closeMusic(),b.instance.closeSound())},a.onBtnDebugClick=function(){b.instance.playSound(u.AUDIO_SOUND.CLICK),g.vibrateShort(),this._isDebugOpen=!this._isDebugOpen,this._changeState(this.ndBtnDebug,this._isDebugOpen),l.instance.setGlobalData("debug",this._isDebugOpen),!0===this._isDebugOpen?s.showStats():s.hideStats()},a.onBtnCloseClick=function(){b.instance.playSound(u.AUDIO_SOUND.CLICK),g.vibrateShort(),p.instance.hideDialog("setting/settingPanel")},n}(c)).prototype,"sfSelect",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=U(D.prototype,"sfUnSelect",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=U(D.prototype,"ndBtnVibration",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=U(D.prototype,"ndBtnMusic",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=U(D.prototype,"ndBtnDebug",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=D))||v));e._RF.pop()}}}));

System.register("chunks:///_virtual/skinPanel.ts",["cc","./constant.ts","./clientEvent.ts","./resourceUtil.ts","./localConfig.ts","./playerData.ts","./audioManager.ts","./uiManager.ts","./gameLogic.ts"],(function(t){"use strict";var n,e,i,a,r,c,o,l,s,u,_,p,f;return{setters:[function(t){n=t.cclegacy,e=t._decorator,i=t.Node,a=t.SpriteComponent,r=t.Component},function(t){c=t.constant},function(t){o=t.clientEvent},function(t){l=t.resourceUtil},function(t){s=t.localConfig},function(t){u=t.playerData},function(t){_=t.AudioManager},function(t){p=t.uiManager},function(t){f=t.GameLogic}],execute:function(){var S,E,h,b,v,d,T,y,N,k,g;function H(t,n,e,i){e&&Object.defineProperty(t,n,{enumerable:e.enumerable,configurable:e.configurable,writable:e.writable,value:e.initializer?e.initializer.call(i):void 0})}function I(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function A(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}function P(t,n,e,i,a){var r={};return Object.keys(i).forEach((function(t){r[t]=i[t]})),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=e.slice().reverse().reduce((function(e,i){return i(t,n,e)||e}),r),a&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(a):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(t,n,r),r=null),r}n._RF.push({},"81756vXJblHj5HwG4gVni0O","skinPanel",void 0);var L=e.ccclass,m=e.property;t("SkinPanel",(S=L("SkinPanel"),E=m(i),h=m(i),b=m(a),v=m(a),S((y=P((T=function(t){var n,e;function i(){for(var n,e=arguments.length,i=new Array(e),a=0;a<e;a++)i[a]=arguments[a];return H(I(n=t.call.apply(t,[this].concat(i))||this),"ndBtnReceive",y,I(n)),H(I(n),"ndBtnSkip",N,I(n)),H(I(n),"spPay",k,I(n)),H(I(n),"spSkin",g,I(n)),A(I(n),"_chanel",c.SKIN_HAT_CHANEL.LEVEL),A(I(n),"_skinType",c.SKIN_TYPE.HAT),A(I(n),"_skinStatus",void 0),A(I(n),"_callback",(function(){})),n}e=t,(n=i).prototype=Object.create(e.prototype),n.prototype.constructor=n,n.__proto__=e;var a=i.prototype;return a.start=function(){},a.show=function(t,n,e,i){this._chanel=t,this._skinType=n,this._skinStatus=e,this._callback=i,t===c.SKIN_HAT_CHANEL.LEVEL?(this.spPay.node.active=!0,this.ndBtnSkip.active=!0,f.updatePayIcon(c.SHARE_ID.SKIN,this.spPay)):(t===c.SKIN_HAT_CHANEL.BOX||t===c.SKIN_HAT_CHANEL.BOX_SETTLEMENT)&&(this.spPay.node.active=!1,this.ndBtnSkip.active=!1);var a="",r=s.instance.queryByID("shop",String(e.ID));n===c.SKIN_TYPE.HAT?a="texture/icon/hats/"+r.iconName:n===c.SKIN_TYPE.SHOES&&(a="texture/icon/shoes/"+r.iconName),l.setSpriteFrame(a,this.spSkin,(function(t){}))},a.onBtnReceiveClick=function(){var t=this;_.instance.playSound(c.AUDIO_SOUND.GET_SKIN),f.vibrateShort(),this._chanel===c.SKIN_HAT_CHANEL.LEVEL?f.pay(c.SHARE_ID.SKIN,(function(n){n||t._getReward()})):(this._chanel===c.SKIN_HAT_CHANEL.BOX||this._chanel===c.SKIN_HAT_CHANEL.BOX_SETTLEMENT)&&this._getReward()},a._getReward=function(){this._skinStatus.status=c.SHOP_ITEM_STATUS.EQUIPMENT,o.dispatchEvent(c.EVENT_TYPE.HIDE_HAT_EQUIPMENT),o.dispatchEvent(c.EVENT_TYPE.REFRESH_HAT_ITEM,this._skinStatus),u.instance.updateHatStatus(this._skinStatus),this._close()},a.onBtnSkipClick=function(){_.instance.playSound(c.AUDIO_SOUND.CLICK),f.vibrateShort(),this._close()},a._close=function(){p.instance.hideDialog("skin/skinPanel"),this._callback&&this._callback()},i}(r)).prototype,"ndBtnReceive",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=P(T.prototype,"ndBtnSkip",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=P(T.prototype,"spPay",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=P(T.prototype,"spSkin",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=T))||d));n._RF.pop()}}}));

System.register("chunks:///_virtual/fightMap.ts",["cc","./constant.ts","./clientEvent.ts","./resourceUtil.ts","./localConfig.ts","./poolManager.ts","./boss.ts","./enemy.ts","./colliderItem.ts","./gameManager.ts"],(function(e){"use strict";var t,n,i,r,o,a,l,s,c,d,u,E,f,p,m,h,_,v,y;return{setters:[function(e){t=e.cclegacy,n=e._decorator,i=e.Material,r=e.Vec3,o=e.MeshRenderer,a=e.Color,l=e.Node,s=e.AnimationComponent,c=e.RigidBodyComponent,d=e.Component},function(e){u=e.constant},function(e){E=e.clientEvent},function(e){f=e.resourceUtil},function(e){p=e.localConfig},function(e){m=e.poolManager},function(e){h=e.Boss},function(e){_=e.Enemy},function(e){v=e.ColliderItem},function(e){y=e.GameManager}],execute:function(){var M,g,b,C,w,P,B;function N(e,t,n,i){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}function T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t._RF.push({},"876a6MZuqRM3JfSTFkqsS3z","fightMap",void 0);var L=n.ccclass,D=n.property;e("FightMap",(M=L("FightMap"),g=D([i]),M((B=P=function(e){var t,n;function i(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return N(T(t=e.call.apply(e,[this].concat(i))||this),"arrNumItemMaterial",w,T(t)),O(T(t),"_dictModuleType",void 0),O(T(t),"arrModuleData",{}),O(T(t),"_arrItem",[]),O(T(t),"_arrMap",[]),O(T(t),"_completeListener",(function(){})),O(T(t),"_arrBoard",[]),O(T(t),"_ndScoreLine",null),O(T(t),"_loadResLength",20),O(T(t),"_arrColor",[(new a).fromHEX("#250DD6"),(new a).fromHEX("#350DD6"),(new a).fromHEX("#650DD6"),(new a).fromHEX("#9E0DD6"),(new a).fromHEX("#CC0F4A"),(new a).fromHEX("#E21B2B"),(new a).fromHEX("#E2331B"),(new a).fromHEX("#E25B1B"),(new a).fromHEX("#E2821B"),(new a).fromHEX("#E2AA1B"),(new a).fromHEX("#92E21B"),(new a).fromHEX("#4BE21B"),(new a).fromHEX("#1BE23B"),(new a).fromHEX("#1BE28A"),(new a).fromHEX("#129BDB"),(new a).fromHEX("#0F4BCC"),(new a).fromHEX("#0F2DCC"),(new a).fromHEX("#0F1ECC"),(new a).fromHEX("#1E0FCC"),(new a).fromHEX("#250DD6"),(new a).fromHEX("#350DD6"),(new a).fromHEX("#650DD6"),(new a).fromHEX("#CC0F4A"),(new a).fromHEX("#E21B2B"),(new a).fromHEX("#E2331B")]),t}n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var d=i.prototype;return d.onEnable=function(){E.on(u.EVENT_TYPE.REDUCE_OBSTACLE,this._reduceObstacle,this),E.on(u.EVENT_TYPE.CHECK_EFFECTIVE,this._checkEffective,this),E.on(u.EVENT_TYPE.SHOW_SCORE_LINE,this._showScoreLine,this),E.on(u.EVENT_TYPE.ARRIVE_END_LINE,this._arriveEndLine,this)},d.onDisable=function(){E.off(u.EVENT_TYPE.REDUCE_OBSTACLE,this._reduceObstacle,this),E.off(u.EVENT_TYPE.CHECK_EFFECTIVE,this._checkEffective,this),E.off(u.EVENT_TYPE.SHOW_SCORE_LINE,this._showScoreLine,this),E.on(u.EVENT_TYPE.ARRIVE_END_LINE,this._arriveEndLine,this)},d.start=function(){},d.buildMap=function(e,t,n){var i=this;this._completeListener=n,this._dictModuleType={},this._arrItem=[],this._arrMap=[],p.instance.getTableArr("module").forEach((function(e){i._dictModuleType.hasOwnProperty(e.type)||(i._dictModuleType[e.type]=[])})),this._arrMap=p.instance.getTableArr(e).concat(),this._buildRoad((function(){i._arrMap=i._arrMap.sort((function(e,t){var n=Number(e.position.split(",")[2]);return Number(t.position.split(",")[2])-n}));for(var e=i._arrMap.length-1;e>=0;e--){var t=i._arrMap[e];if(Number(t.position.split(",")[2])>y.oriPlayerWorPos.z-i._loadResLength){var n=p.instance.queryByID("module",t.name);i._dictModuleType[n.type].push(t),i._arrMap.splice(e,1)}}var r=[];for(var o in i._dictModuleType){i._dictModuleType[o].length&&r.push(i._buildModel(o))}Promise.all(r).then((function(){i._completeListener&&i._completeListener()})).catch((function(e){console.log("load item module err",e)}))}))},d._buildRoad=function(e){for(var t=this._arrMap.length-1;t>=0;t--){var n=this._arrMap[t];"road"===p.instance.queryByID("module",n.name).type&&(this._dictModuleType.road.push(n),this._arrMap.splice(t,1))}this._buildModel("road").then((function(){e&&e()})).catch((function(e){console.log("load road module err",e)}))},d._buildModel=function(e){var t=this;return new Promise((function(n,o){var a=[],d=t._dictModuleType[e];t._dictModuleType[e]=[];for(var E=function(o){var E=d[o],y=p.instance.queryByID("module",E.name),M=e+"/"+y.name,g=f.loadMapModelRes(M).then((function(o){var a=e+"Group",d=t.node.getChildByName(a);d||((d=new l(a)).parent=t.node);var f=m.instance.getNode(o,d),p=E.position?E.position.split(","):y.position.split(","),M=E.scale?E.scale.split(","):y.scale.split(",");if(f.setPosition(new r(Number(p[0]),Number(p[1]),Number(p[2]))),f.setScale(new r(Number(M[0]),Number(M[1]),Number(M[2]))),E.name==u.MODULE_TYPE.ROAD_11)i.ndRoadEnd=f,i.ndRoadEnd.getChildByName("fireGroup").active=!1;else if(E.name==u.MODULE_TYPE.PEOPLE_ENEMY)i.ndEnemy=f,i.scriptEnemy=f.getComponent(_),i.scriptEnemy.init();else if(E.name==u.MODULE_TYPE.PEOPLE_BOSS)i.ndBoss=f,i.scriptBoss=f.getComponent(h),i.scriptBoss.init();else if(E.name==u.MODULE_TYPE.BOX){var g;i.ndBox=f;var b=null===(g=f.getChildByName("box"))||void 0===g?void 0:g.getComponent(s);b.getState("boxOpen").time=0,b.getState("boxHit").time=0,b.getState("boxOpen").sample(),b.getState("boxHit").sample()}else if(E.name==u.MODULE_TYPE.ROAD_13)i.ndRoadScore=f,f.active=!1;else if(E.name==u.MODULE_TYPE.WALL){var C,w;i.ndWall=f;var P=null===(C=f.getChildByName("brick01Group"))||void 0===C?void 0:C.getComponentsInChildren(c),B=null===(w=f.getChildByName("brick02Group"))||void 0===w?void 0:w.getComponentsInChildren(c);(null==P?void 0:P.concat(B)).forEach((function(e){e.enabled=!1,e.useGravity=!1,e.sleep()}))}else if(E.name===u.MODULE_TYPE.PEOPLE_GREEN||E.name===u.MODULE_TYPE.PEOPLE_RED||E.name===u.MODULE_TYPE.PEOPLE_YELLOW){f.getComponent(v).init()}"road"!==y.type&&t._arrItem.push(f),n(null)}));a.push(g)},y=0;y<d.length;y++)E(y);Promise.all(a).then((function(){var e=t._arrItem.sort((function(e,t){var n=e.worldPosition.z;return t.worldPosition.z-n}));t._arrItem=e,n(null)})).catch((function(e){console.log("e",e)}))}))},d.recycle=function(){for(var e=0;e<this._arrItem.length;e++){var t=this._arrItem[e];this._recycleModel(t)}this.node.removeAllChildren()},d._recycleModel=function(e){"wall"===e.name?(e.destroy(),console.log("删掉墙")):m.instance.putNode(e)},d._reduceObstacle=function(){var e=p.instance.queryByCondition("module",{isEnableHide:1});if(Object.keys(e).length){var t=[];for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var i=e[n];t.push(i.type)}for(var r=y.scriptPlayer.node.worldPosition.clone(),o=0;o<this.node.children.length;o++){var a=this.node.children[o],l=a.name.split("Group")[0];if(t.includes(l))for(var s=a.children.length-1;s>=0;s--){var c=a.children[s],d=c.worldPosition.clone();d.z>=r.z-5&&d.z<=r.z+2&&this._recycleModel(c)}}}},d._checkEffective=function(){if(!i.arrEffective.length){var e=p.instance.queryByCondition("module",{isEffective:1});if(!Object.keys(e).length)return;for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t)){var n=e[t];i.arrEffective.push(n.ID)}}},d._initScoreLine=function(){var e=this;if(y.gameType===u.GAME_TYPE.NORMAL){var t=i.ndRoadScore.getChildByName("scoreLineColor"),n=null==t?void 0:t.getChildByName("board");null==n||n.children.forEach((function(t,n,i){e._arrBoard.push({idx:n,node:t}),t.active=!1}));var a=null==t?void 0:t.getChildByName("num");a.removeAllChildren(),f.loadModelRes("roadScore/numItem").then((function(t){for(var n=0;n<25;n++){var i=n<=4?Math.ceil((n+1)/4):Math.ceil((n+2)/5),l=m.instance.getNode(t,a);l.setPosition(new r(-.006,1.007,-.242-.5*n)),l.setScale(new r(.01332,.528,.01595));var s=l.getComponent(o);null==s||s.setMaterial(e.arrNumItemMaterial[i],0)}for(var c=0;c<25;c++){var d=Math.round(10*((c+1)/5-Math.floor((c+1)/5))),u=m.instance.getNode(t,a);u.setPosition(new r(.129,1.007,-.242-.5*c)),u.setScale(new r(.01332,.528,.01595));var E=u.getComponent(o);null==E||E.setMaterial(e.arrNumItemMaterial[d],0)}}))}},d._showScoreLine=function(){i.ndRoadScore.active=!0},d._arriveEndLine=function(){i.ndRoadEnd.getChildByName("fireGroup").active=!0,this._initScoreLine()},d.update=function(e){var t;if(!y.isGameOver&&y.gameType===u.GAME_TYPE.NORMAL&&_.isHitFly)for(var n=this._arrBoard.length-1;n>=0;n--){var r=this._arrBoard[n];if(r.node.worldPosition.z>=i.ndEnemy.worldPosition.z-.5){var l;r.node.active=!0;var s=(null===(l=r.node.getChildByName("RootNode"))||void 0===l?void 0:l.getChildByName("board")).getComponent(o).materials[0];null==s||s.setProperty("mainColor",new a(this._arrColor[r.idx])),this._arrBoard.splice(n,1)}}if((null===(t=y.scriptPlayer)||void 0===t?void 0:t.node)&&!y.isArriveEndLine&&!y.scriptPlayer.isDie){if(this._arrMap.length){var c=this._arrMap[0];if(Number(c.position.split(",")[2])>y.scriptPlayer.node.worldPosition.z-this._loadResLength){var d=p.instance.queryByID("module",c.name);this._dictModuleType[d.type].push(c),this._buildModel(d.type),this._arrMap.splice(0,1)}}if(this._arrItem.length){var E=this._arrItem[0];if(E.parent)E.worldPosition.z>y.scriptPlayer.node.worldPosition.z+1.5&&(this._recycleModel(E),this._arrItem.splice(0,1));else null===E.scale?E.destroy():this._recycleModel(E),this._arrItem.splice(0,1)}}},i}(d),O(P,"ndRoadEnd",void 0),O(P,"ndEnemy",void 0),O(P,"ndBoss",void 0),O(P,"ndBox",void 0),O(P,"ndRoadScore",void 0),O(P,"ndWall",void 0),O(P,"scriptBoss",void 0),O(P,"scriptEnemy",void 0),O(P,"arrEffective",[]),w=function(e,t,n,i,r){var o={};return Object.keys(i).forEach((function(e){o[e]=i[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce((function(n,i){return i(e,t,n)||n}),o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}((C=B).prototype,"arrNumItemMaterial",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),b=C))||b));t._RF.pop()}}}));

System.register("chunks:///_virtual/flyReward.ts",["cc","./constant.ts","./poolManager.ts","./audioManager.ts","./gameLogic.ts","./diamond.ts"],(function(e){"use strict";var n,t,r,i,a,o,l,c,u,s,d,f,p,b,m,w;return{setters:[function(e){n=e.cclegacy,t=e._decorator,r=e.Prefab,i=e.SpriteFrame,a=e.Node,o=e.LabelComponent,l=e.SpriteComponent,c=e.Vec3,u=e.tween,s=e.AnimationComponent,d=e.Component},function(e){f=e.constant},function(e){p=e.poolManager},function(e){b=e.AudioManager},function(e){m=e.GameLogic},function(e){w=e.Diamond}],execute:function(){var g,h,v,y,R,_,M,z,D,F,C,P,A,N,O;function S(e,n,t,r){t&&Object.defineProperty(e,n,{enumerable:t.enumerable,configurable:t.configurable,writable:t.writable,value:t.initializer?t.initializer.call(r):void 0})}function j(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function x(e,n,t,r,i){var a={};return Object.keys(r).forEach((function(e){a[e]=r[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=t.slice().reverse().reduce((function(t,r){return r(e,n,t)||t}),a),i&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(i):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,n,a),a=null),a}n._RF.push({},"8ad7aYm7RFFy5Bt7djbc8Ag","flyReward",void 0);var E=t.ccclass,G=t.property;e("FlyReward",(g=E("FlyReward"),h=G(r),v=G(i),y=G(a),R=G(a),_=G(o),g((O=N=function(e){var n,t;function r(){for(var n,t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return S(j(n=e.call.apply(e,[this].concat(r))||this),"pbReward",D,j(n)),S(j(n),"sfDiamond",F,j(n)),S(j(n),"ndRewardParent",C,j(n)),S(j(n),"ndDiamond",P,j(n)),S(j(n),"lbDiamondNum",A,j(n)),k(j(n),"_callback",(function(){})),k(j(n),"_scripGameManager",null),k(j(n),"_maxRewardCount",15),n}t=e,(n=r).prototype=Object.create(t.prototype),n.prototype.constructor=n,n.__proto__=t;var i=r.prototype;return i.start=function(){},i.createReward=function(e,n,t){var i=this;this._callback=n,this._scripGameManager=t;for(var a=this.ndDiamond.position,o=[],d=0,g=0,h=0;h<this._maxRewardCount;h++){var v=new Promise((function(e,n){var t=p.instance.getNode(i.pbReward,i.ndRewardParent);t.getComponent(l).spriteFrame=i.sfDiamond;var o=new c(Math.floor(300*Math.random())-150,Math.floor(300*Math.random()-150),0),w=new c(0,0,0);c.subtract(w,o,new c(0,0,0)).length(),d=w.length()/400;var h=120+Math.floor(60*Math.random());h=1===Math.floor(2*Math.random())?h:-h;var v=new c(0,0,0);c.subtract(v,o,a).length(),g=v.length()/1e3,r.isRewardFlying=!0,u(t).to(d,{position:o}).to(d,{eulerAngles:new c(0,0,h)}).to(2*d/3,{scale:new c(1.5,1.5,1.5)}).to(d/3,{scale:new c(1,1,1)}).union().call((function(){var n;null===(n=t.getComponentInChildren(s))||void 0===n||n.play(),u(t).to(g,{position:a}).call((function(){b.instance.playSound(f.AUDIO_SOUND.NUM_RAISE),m.vibrateShort(),e(null),p.instance.putNode(t)})).start()})).start()}));o.push(v)}this.ndDiamond.getComponent(w).startRaise(e,.1,.25,(function(){Promise.all(o).then((function(){setTimeout((function(){r.isRewardFlying=!1,i._callback&&i._callback(),i.node.destroy()}),1e3)})).catch((function(e){console.log("e",e)}))}))},r}(d),k(N,"isRewardFlying",!1),D=x((z=O).prototype,"pbReward",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=x(z.prototype,"sfDiamond",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=x(z.prototype,"ndRewardParent",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=x(z.prototype,"ndDiamond",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=x(z.prototype,"lbDiamondNum",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=z))||M));n._RF.pop()}}}));

System.register("chunks:///_virtual/gameLogic.ts",["cc","./constant.ts","./util.ts","./localConfig.ts","./storageManager.ts","./playerData.ts","./audioManager.ts","./uiManager.ts"],(function(e){"use strict";var n,o,t,i,a,s,c,r,l,d;return{setters:[function(e){n=e.cclegacy,o=e._decorator,t=e.sys},function(e){i=e.constant},function(e){a=e.util},function(e){s=e.localConfig},function(e){c=e.StorageManager},function(e){r=e.playerData},function(e){l=e.AudioManager},function(e){d=e.uiManager}],execute:function(){var u,f,w;function h(e,n,o){return n in e?Object.defineProperty(e,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[n]=o,e}n._RF.push({},"919eaxdNU5GYIhseMQ0aEsh","gameLogic",void 0);var m=o.ccclass;o.property,e("GameLogic",m("GameLogic")((w=f=function(){function e(){}return e.customEventStatistics=function(e,n){e=e.toString(),n||(n={}),n.isNewBee=r.instance.isNewBee,"wx"===this.platform&&window.wx&&window.wx.aldSendEvent&&window.wx.aldSendEvent(e,n),"cocos"===this.platform&&window.cocosAnalytics&&window.cocosAnalytics.isInited()&&(console.log("###统计",e,n),window.cocosAnalytics.CACustomEvent.onStarted(e,n))},e.vibrateShort=function(){var e;if(null===(e=c.instance.getGlobalData("vibration"))||void 0===e||e){var n=Date.now();n-this.vibratePreTime>=this.vibrateInterval&&(t.isNative?jsb.reflection.callStaticMethod("com/cocos/game/AppActivity","vibrator","()V"):window.wx&&window.wx.vibrateShort({success:function(e){},fail:function(){},complete:function(){}}),this.vibratePreTime=n)}},e.shareGame=function(e,n){window.wx&&(wx.showShareMenu({withShareTicket:!0,complete:function(){}}),wx.aldOnShareAppMessage?wx.aldOnShareAppMessage((function(){return{title:e,imageUrl:n}})):wx.onShareAppMessage((function(){return{title:e,imageUrl:n}})))},e.updatePayIcon=function(e,n,o,t,a){var s=this;if("ios"===this.platform||"wx"===this.platform){if("ios"===this.platform)return;window.bondSDK&&window.bondSDK.getPayType({shareId:e,callback:function(e){switch(console.log("###updatePayIcon.type",e),e){case i.OPEN_REWARD_TYPE.AD:n.node.active=!0,n.spriteFrame=t||s.imgAd;break;case i.OPEN_REWARD_TYPE.SHARE:n.node.active=!0,n.spriteFrame=a||s.imgShare;break;case i.OPEN_REWARD_TYPE.NULL:n.node.active=!1}o&&o(e)}})}else{if("cocosPlay"===this.platform)return;n.node.active=!1,o&&o(i.OPEN_REWARD_TYPE.NULL)}},e.getPayType=function(e,n){window.bondSDK?window.bondSDK.getPayType({shareId:e,callback:function(e){console.log("###getPayType.type",e),n(e)}}):"cocosPlay"===this.platform||n&&n(i.OPEN_REWARD_TYPE.NULL)},e.pay=function(e,n){var o=this;console.log("###gameLogic.pay","shareId",e),l.instance.pauseAll(),this.isWatchVideoAd=!0,"ios"!==this.platform&&"wx"!==this.platform||!window.bondSDK?"cocosPlay"===this.platform||(this.isWatchVideoAd=!1,l.instance.resumeAll(),n&&n(null)):window.bondSDK.pay({shareId:e,success:function(){console.log("###pay.success","shareId",e),l.instance.resumeAll(),o.isWatchVideoAd=!1,n(null)},fail:function(t){console.log("###pay.fail","shareId",e),l.instance.resumeAll(),o.isWatchVideoAd=!1,n("fail",t)}})},e.showBannerAd=function(e){"wx"===this.platform&&window.bondSDK?window.bondSDK.showKeepOutBanner({adPlaceName:e}):"ios"===this.platform&&window.bondSDK?window.bondSDK.showAdBanner({adPlaceName:e}):this.platform},e.hideBannerAd=function(){"wx"===this.platform&&window.bondSDK?window.bondSDK.hideKeepOutBanner():"ios"===this.platform&&window.bondSDK?window.bondSDK.hideAdBanner():this.platform},e.checkShowOfflineReward=function(e,n){var o=r.instance.settings.hideTime;if(o){var t=Date.now()-o,i=a.formatTimeForMillisecond(t),s=60*i.hour*60+60*i.minute+i.second;s=s>=10800?10800:s,console.log("###登录奖励, 距离上次退出有 "+s+" 秒钟"),s<=0||d.instance.showDialog("offlineReward/offlineReward",[e,s])}},e.getTargetUnlockInfo=function(e,n){for(var o=s.instance.getTableArr(e),t=1,i={},a=0;a<o.length;a++){var c=o[a],r=this.parseUnlockItemInfo(c.unlockItem);if(Object.keys(r).length)for(var l in r)i[l]=r[l];if(c.unlockLand&&(t=Number(c.unlockLand)),a===n-1)break}return console.log("解锁"+e+"地块等级",t,"解锁"+e+"物件信息",i),{unlockMaxLand:t,unlockItemInfo:i}},e.parseUnlockItemInfo=function(e){if(!e||0===Object.keys(e).length)return{};var n={};return e.split("#").forEach((function(e){var o=e.split("_")[0];n[o]=e})),n},e}(),h(f,"platform","cocos"),h(f,"imgAd",null),h(f,"imgShare",null),h(f,"isDebugMode",!1),h(f,"onlineInterval",-1),h(f,"isEnableVibrate",!0),h(f,"isCheckOffline",!1),h(f,"isWatchVideoAd",!1),h(f,"isEnableMoving",!1),h(f,"isEnableZoom",!1),h(f,"arrLockDiary",[]),h(f,"isTest",!1),h(f,"vibrateInterval",100),h(f,"vibratePreTime",0),u=w))||u);n._RF.pop()}}}));

System.register("chunks:///_virtual/loadingPanel.ts",["cc","./constant.ts","./clientEvent.ts","./uiManager.ts"],(function(n){"use strict";var i,e,t,o,a,r,c,l;return{setters:[function(n){i=n.cclegacy,e=n._decorator,t=n.UIOpacityComponent,o=n.tween,a=n.Component},function(n){r=n.constant},function(n){c=n.clientEvent},function(n){l=n.uiManager}],execute:function(){var u,s,f,h,p;function d(n,i,e,t){e&&Object.defineProperty(n,i,{enumerable:e.enumerable,configurable:e.configurable,writable:e.writable,value:e.initializer?e.initializer.call(t):void 0})}function g(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}i._RF.push({},"951bd+IBg9Bz438MxpTOrH1","loadingPanel",void 0);var _=e.ccclass,b=e.property;n("LoadingPanel",(u=_("LoadingPanel"),s=b(t),u((p=function(n,i,e,t,o){var a={};return Object.keys(t).forEach((function(n){a[n]=t[n]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=e.slice().reverse().reduce((function(e,t){return t(n,i,e)||e}),a),o&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(o):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(n,i,a),a=null),a}((h=function(n){var i,e;function t(){for(var i,e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];return d(g(i=n.call.apply(n,[this].concat(t))||this),"opacityCom",p,g(i)),i}e=n,(i=t).prototype=Object.create(e.prototype),i.prototype.constructor=i,i.__proto__=e;var a=t.prototype;return a.onEnable=function(){c.on(r.EVENT_TYPE.SHOW_LOADING_PANEL,this._showLoadingPanel,this),c.on(r.EVENT_TYPE.HIDE_LOADING_PANEL,this._hideLoadingPanel,this)},a.onDisable=function(){c.off(r.EVENT_TYPE.SHOW_LOADING_PANEL,this._showLoadingPanel,this),c.off(r.EVENT_TYPE.HIDE_LOADING_PANEL,this._hideLoadingPanel,this)},a.start=function(){},a.show=function(){this._showLoadingPanel()},a._hideLoadingPanel=function(){var n=this;o(this.opacityCom).to(2,{opacity:200},{easing:"smooth"}).to(1,{opacity:50},{easing:"smooth"}).call((function(){l.instance.hideDialog("loading/loadingPanel"),l.instance.showDialog("parkour/parkourPanel",[n])})).start()},a._showLoadingPanel=function(){this.opacityCom.opacity=255},t}(a)).prototype,"opacityCom",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=h))||f));i._RF.pop()}}}));

System.register("chunks:///_virtual/shopPanel.ts",["cc","./constant.ts","./clientEvent.ts","./localConfig.ts","./playerData.ts","./poolManager.ts","./audioManager.ts","./uiManager.ts","./gameLogic.ts","./flyReward.ts","./effectManager.ts","./gameManager.ts","./shoesItem.ts","./hatItem.ts"],(function(e){"use strict";var n,t,i,a,o,r,s,l,c,u,h,d,m,f,p,S,b,_,g,v,I,D,E,y;return{setters:[function(e){n=e.cclegacy,t=e._decorator,i=e.LabelComponent,a=e.SpriteComponent,o=e.SpriteFrame,r=e.Node,s=e.ButtonComponent,l=e.Prefab,c=e.PageViewComponent,u=e.instantiate,h=e.Component},function(e){d=e.constant},function(e){m=e.clientEvent},function(e){f=e.localConfig},function(e){p=e.playerData},function(e){S=e.poolManager},function(e){b=e.AudioManager},function(e){_=e.uiManager},function(e){g=e.GameLogic},function(e){v=e.FlyReward},function(e){I=e.EffectManager},function(e){D=e.GameManager},function(e){E=e.ShoesItem},function(e){y=e.HatItem}],execute:function(){var R,w,H,T,k,P,C,N,O,U,B,M,A,z,V,K,x,F,G,L,Y,j,q,W,Q,X,J,Z,$,ee,ne,te,ie,ae,oe,re,se,le,ce,ue,he;function de(e,n,t,i){t&&Object.defineProperty(e,n,{enumerable:t.enumerable,configurable:t.configurable,writable:t.writable,value:t.initializer?t.initializer.call(i):void 0})}function me(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function fe(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function pe(e,n,t,i,a){var o={};return Object.keys(i).forEach((function(e){o[e]=i[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=t.slice().reverse().reduce((function(t,i){return i(e,n,t)||t}),o),a&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(a):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,n,o),o=null),o}n._RF.push({},"9b6d9eb7SVIbqqa5mUiPcdA","shopPanel",void 0);var Se=t.ccclass,be=t.property;e("ShopPanel",(R=Se("ShopPanel"),w=be(i),H=be(i),T=be(a),k=be(a),P=be(o),C=be(o),N=be(a),O=be(r),U=be(r),B=be(s),M=be(l),A=be(r),z=be(r),V=be(c),K=be(c),x=be(o),F=be(o),G=be(a),L=be(l),R((q=pe((j=function(e){var n,t;function i(){for(var n,t=arguments.length,i=new Array(t),a=0;a<t;a++)i[a]=arguments[a];return de(me(n=e.call.apply(e,[this].concat(i))||this),"lbDiamondRandomSkin",q,me(n)),de(me(n),"lbDiamondReceiveNum",W,me(n)),de(me(n),"spBtnHat",Q,me(n)),de(me(n),"spBtnShoes",X,me(n)),de(me(n),"sfBtnSelect",J,me(n)),de(me(n),"sfBtnUnSelect",Z,me(n)),de(me(n),"spPayIconReceiveDiamond",$,me(n)),de(me(n),"ndPageViewHat",ee,me(n)),de(me(n),"ndPageViewShoes",ne,me(n)),de(me(n),"btnRandomSkin",te,me(n)),de(me(n),"pbPageHat",ie,me(n)),de(me(n),"ndHatContent",ae,me(n)),de(me(n),"ndShoesContent",oe,me(n)),de(me(n),"pageViewComHat",re,me(n)),de(me(n),"pageViewShoes",se,me(n)),de(me(n),"sfRandomSkinBlue",le,me(n)),de(me(n),"sfRandomSkinGray",ce,me(n)),de(me(n),"spRandomSkin",ue,me(n)),de(me(n),"pbShoesItem",he,me(n)),fe(me(n),"_skinType",d.SKIN_TYPE.HAT),fe(me(n),"_pageHatIndex",0),fe(me(n),"_pageShoesIndex",0),fe(me(n),"_maxNumInPage",9),fe(me(n),"_randHatSkinUseTimes",0),fe(me(n),"_oriRandHatSkinDiamondNum",100),fe(me(n),"_receiveDiamondUseTimes",0),fe(me(n),"_oriGetDiamondNum",100),fe(me(n),"_curRandomSkinDiamond",0),fe(me(n),"_curReceiveDiamond",0),n}t=e,(n=i).prototype=Object.create(t.prototype),n.prototype.constructor=n,n.__proto__=t;var a=i.prototype;return a.onEnable=function(){},a.onDisable=function(){},a.start=function(){},a.show=function(){g.updatePayIcon(d.SHARE_ID.SHOP_RECEIVE_DIAMOND,this.spPayIconReceiveDiamond),this._skinType===d.SKIN_TYPE.HAT?this._showHat():this._skinType===d.SKIN_TYPE.SHOES&&this._showShoes(),this._refreshBtnRandomSkin(),this._refreshBtnReceiveDiamond()},a.onBtnCloseClick=function(){b.instance.playSound(d.AUDIO_SOUND.CLICK),g.vibrateShort(),this._close()},a.onBtnReceiveDiamondClick=function(){var e=this;v.isRewardFlying||(b.instance.playSound(d.AUDIO_SOUND.DIAMOND_RECEIVE),g.vibrateShort(),g.pay(d.SHARE_ID.SHOP_RECEIVE_DIAMOND,(function(n){if(!n){var t=Number(e.lbDiamondReceiveNum.string);I.instance.showFlyReward(t,(function(){e._receiveDiamondUseTimes+=1,e._refreshBtnReceiveDiamond(),e._refreshBtnRandomSkin()}))}})))},a.onBtnHatClick=function(){b.instance.playSound(d.AUDIO_SOUND.CLICK),g.vibrateShort(),this._showHat()},a._showHat=function(){this._skinType=d.SKIN_TYPE.HAT,this.spBtnHat.spriteFrame=this.sfBtnSelect,this.spBtnShoes.spriteFrame=this.sfBtnUnSelect,this.ndPageViewHat.active=!0,this.ndPageViewShoes.active=!1,this.btnRandomSkin.node.active=!0;for(var e=f.instance.getTableArr("shop").filter((function(e){return 1===e.type})),n=Math.ceil(e.length/this._maxNumInPage);this.ndHatContent.children.length<n;){var t=u(this.pbPageHat);this.pageViewComHat.addPage(t)}for(;this.ndHatContent.children.length>n;)this.pageViewComHat.removePageAtIndex(this.ndHatContent.children.length-1);var i=[];this.ndHatContent.children.forEach((function(e){i=i.concat(e.children)})),i.forEach((function(n,t,i){var a=e[t];a?(n.active=!0,n.getComponent(y).init(a)):n.active=!1}))},a.onBtnShoesClick=function(){b.instance.playSound(d.AUDIO_SOUND.CLICK),g.vibrateShort(),this._showShoes()},a._showShoes=function(){var e=this;this._skinType=d.SKIN_TYPE.SHOES,this.spBtnHat.spriteFrame=this.sfBtnUnSelect,this.spBtnShoes.spriteFrame=this.sfBtnSelect,this.ndPageViewHat.active=!1,this.ndPageViewShoes.active=!0,this.btnRandomSkin.node.active=!1;var n=this.ndShoesContent.getChildByName("pageShoes"),t=f.instance.getTableArr("shop").filter((function(e){return 2===e.type}));t.forEach((function(i,a,o){(a<n.children.length?n.children[a]:S.instance.getNode(e.pbShoesItem,n)).getComponent(E).init(t[a])})),n.children.splice(t.length)},a.onBtnRandomSkinClick=function(){var e,n=this;b.instance.playSound(d.AUDIO_SOUND.CLICK),g.vibrateShort();var t=p.instance.playerInfo.hat.filter((function(e){return e.status===d.SHOP_ITEM_STATUS.UNLOCKED_NOT_OWNED}));t.length&&(e=t[Math.floor(Math.random()*t.length)],_.instance.showDialog("skin/skinPanel",[d.SKIN_HAT_CHANEL.BOX,this._skinType,e,function(){D.addDiamond(-n._curRandomSkinDiamond),n._randHatSkinUseTimes+=1,n._refreshBtnRandomSkin(),m.dispatchEvent(d.EVENT_TYPE.EQUIPMENT_HAT)}]))},a._refreshBtnRandomSkin=function(){var e=this;if(!this._randHatSkinUseTimes){var n=p.instance.getSetting(d.SETTINGS_KEY.SHOP_RANDOM_SKIN_USE_TIMES);this._randHatSkinUseTimes=n||1}p.instance.setSetting(d.SETTINGS_KEY.SHOP_RANDOM_SKIN_USE_TIMES,this._randHatSkinUseTimes),this._curRandomSkinDiamond=Math.round(this._oriRandHatSkinDiamondNum*Math.pow(1.2,this._randHatSkinUseTimes-1)),this.lbDiamondRandomSkin.string=this._curRandomSkinDiamond+"";var t=p.instance.playerInfo.hat;this.btnRandomSkin.interactable=t.some((function(n){return p.instance.playerInfo.diamond>=e._curRandomSkinDiamond&&n.status===d.SHOP_ITEM_STATUS.UNLOCKED_NOT_OWNED})),this.btnRandomSkin.interactable?this.spRandomSkin.spriteFrame=this.sfRandomSkinBlue:this.spRandomSkin.spriteFrame=this.sfRandomSkinGray},a._refreshBtnReceiveDiamond=function(){if(!this._receiveDiamondUseTimes){var e=p.instance.getSetting(d.SETTINGS_KEY.SHOP_RECEIVE_DIAMOND_USE_TIMES);this._receiveDiamondUseTimes=e||1}p.instance.setSetting(d.SETTINGS_KEY.SHOP_RECEIVE_DIAMOND_USE_TIMES,this._receiveDiamondUseTimes),this._curReceiveDiamond=Math.round(this._oriGetDiamondNum*Math.pow(1.2,this._receiveDiamondUseTimes-1)),this.lbDiamondReceiveNum.string=this._curReceiveDiamond+""},a.onPageViewHatEvent=function(e){console.log("hatEvent",e),this._pageHatIndex=e.getCurrentPageIndex(),console.log("hatIndex",this._pageHatIndex)},a.onPageViewShoesEvent=function(e){console.log("shoesEvent",e),this._pageShoesIndex=e.getCurrentPageIndex(),console.log("shoesIndex",this._pageShoesIndex)},a._close=function(){_.instance.hideDialog("shop/shopPanel")},i}(h)).prototype,"lbDiamondRandomSkin",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=pe(j.prototype,"lbDiamondReceiveNum",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=pe(j.prototype,"spBtnHat",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=pe(j.prototype,"spBtnShoes",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=pe(j.prototype,"sfBtnSelect",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=pe(j.prototype,"sfBtnUnSelect",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=pe(j.prototype,"spPayIconReceiveDiamond",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ee=pe(j.prototype,"ndPageViewHat",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ne=pe(j.prototype,"ndPageViewShoes",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),te=pe(j.prototype,"btnRandomSkin",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ie=pe(j.prototype,"pbPageHat",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ae=pe(j.prototype,"ndHatContent",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),oe=pe(j.prototype,"ndShoesContent",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),re=pe(j.prototype,"pageViewComHat",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),se=pe(j.prototype,"pageViewShoes",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),le=pe(j.prototype,"sfRandomSkinBlue",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ce=pe(j.prototype,"sfRandomSkinGray",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ue=pe(j.prototype,"spRandomSkin",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),he=pe(j.prototype,"pbShoesItem",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=j))||Y));n._RF.pop()}}}));

System.register("chunks:///_virtual/main.ts",["cc","./constant.ts","./clientEvent.ts","./localConfig.ts","./storageManager.ts","./playerData.ts","./audioManager.ts","./uiManager.ts","./gameLogic.ts"],(function(n){"use strict";var t,e,a,i,o,c,s,r,l,u,g,f,p,d;return{setters:[function(n){t=n.cclegacy,e=n._decorator,a=n.game,i=n.PhysicsSystem,o=n.Game,c=n.Component},function(n){s=n.constant},function(n){r=n.clientEvent},function(n){l=n.localConfig},function(n){u=n.StorageManager},function(n){g=n.playerData},function(n){f=n.AudioManager},function(n){p=n.uiManager},function(n){d=n.GameLogic}],execute:function(){var y;t._RF.push({},"9c488okuNlK47jDPrFi5qUV","main",void 0);var h=e.ccclass;e.property,n("Main",h("Main")(y=function(n){var t,e;function c(){return n.apply(this,arguments)||this}e=n,(t=c).prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e;var y=c.prototype;return y.start=function(){var n,t=this,e=null!==(n=u.instance.getGlobalData("frameRate"))&&void 0!==n?n:s.GAME_FRAME;a.setFrameRate(e),i.instance.fixedTimeStep=1/e,window.cocosAnalytics&&window.cocosAnalytics.init({appID:"651231029",version:"1.0.0",storeID:"cocosPlay",engine:"cocos"}),p.instance.showDialog("loading/loadingPanel"),g.instance.loadGlobalCache(),g.instance.userId||(g.instance.generateRandomAccount(),console.log("###生成随机userId",g.instance.userId)),g.instance.loadFromCache(),g.instance.playerInfo&&g.instance.playerInfo.createDate||g.instance.createPlayerInfo(),l.instance.loadConfig((function(){t._loadFinish(),d.shareGame("奔跑吧巨人","")})),f.instance.setMusic(.3),a.on(o.EVENT_HIDE,(function(){g.instance.settings||(g.instance.settings={}),g.instance.settings.hideTime=Date.now(),g.instance.saveAll(),u.instance.save()}))},y._loadFinish=function(){g.instance.refreshSkinStatus(),g.instance.isLoadFinished=!0,r.dispatchEvent(s.EVENT_TYPE.ON_INIT_GAME)},c}(c))||y);t._RF.pop()}}}));

System.register("chunks:///_virtual/oneToMultiListener.ts",["cc"],(function(r){"use strict";var t,e;return{setters:[function(r){t=r.cclegacy,e=r._decorator}],execute:function(){var n,a,i;function o(r,t,e){return t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e,r}t._RF.push({},"a2a3eu3Fw1ANIytH6z2VFsI","oneToMultiListener",void 0);var s=e.ccclass;r("oneToMultiListener",s("oneToMultiListener")((i=a=function(){function r(){}return r.on=function(r,t,e){var n={handler:t,target:e},a=this.handlers[r];a||(a=[],this.handlers[r]=a);for(var i=0;i<a.length;i++)if(!a[i])return a[i]=n,i;return a.push(n),a.length},r.off=function(r,t,e){var n=this.handlers[r];if(n)for(var a=0;a<n.length;a++){var i=n[a];if(i.handler===t&&(!e||e===i.target)){n.splice(a,1);break}}},r.dispatchEvent=function(r){for(var t=arguments.length,e=new Array(t>1?t-1:0),n=1;n<t;n++)e[n-1]=arguments[n];var a,i=this.handlers[r];e=[];for(a=1;a<arguments.length;a++)e.push(arguments[a]);if(i)for(a=0;a<i.length;a++){var o=i[a];o.handler&&o.handler.apply(o.target,e)}},r.setSupportEventList=function(r){if(!(r instanceof Array))return cc.error("supportEvent was not array"),!1;for(var t in this.supportEvent={},r){var e=r[t];this.supportEvent[e]=t}return!0},r}(),o(a,"handlers",void 0),o(a,"supportEvent",void 0),n=i))||n);t._RF.pop()}}}));

System.register("chunks:///_virtual/lodash.ts",["cc"],(function(r){"use strict";var n,t;return{setters:[function(r){n=r.cclegacy,t=r._decorator}],execute:function(){var e,i,u;n._RF.push({},"a40a4pGR6lCqo0coR1W4kAl","lodash",void 0);var o,a,f,c=t.ccclass;r("lodash",c("lodash")((u=i=function(){function r(){}return r.find=function(r,n){var t;if(Array.isArray(r)||(r=this.toArray(r)),(t=r.filter(n)).length)return t[0]},r.forEach=function(r,n){Array.isArray(r)?r.forEach(n):this.toArrayKey(r).forEach((function(t,e,i){var u=t.key,o=t.value;n(o,u,r)}))},r.cloneDeep=function(r){if(null===r||"object"!=typeof r)return r;var n={};for(var t in r.constructor===Array&&(n=[]),r)r.hasOwnProperty(t)&&(n[t]=this.cloneDeep(r[t]));return n},r.map=function(r,n){Array.isArray(r)||(r=this.toArray(r));var t=[];return r.forEach((function(r,e,i){t.push(n(r,e,i))})),t},r.random=function(r,n){var t=Math.random()*(n-r+1)+r;return Math.floor(t)},r.toArrayKey=function(r){var n=[];for(var t in r)r.hasOwnProperty(t)&&n.push({key:t,value:r[t]});return n},r.toArray=function(r){var n=[];for(var t in r)r.hasOwnProperty(t)&&n.push(r[t]);return n},r.filter=function(r,n){return Array.isArray(r)||(r=this.toArray(r)),r.filter(n)},r.isEqual=function(r,n){if(!(r instanceof Object)||!(n instanceof Object))return r===n;if(Object.keys(r).length!==Object.keys(n).length)return!1;for(var t in r){var e=r[t]instanceof Object,i=n[t]instanceof Object;if(e&&i)return this.isEqual(r[t],n[t]);if(r[t]!==n[t])return!1}return!0},r.pullAllWith=function(r,n,t){return n.forEach((function(n){r.filter((function(r){return t(r,n)})).forEach((function(n){var t=r.indexOf(n);-1!==r.indexOf(n)&&r.splice(t,1)}))})),r},r.now=function(){return Date.now()},r.pullAll=function(r,n){return n.forEach((function(n){var t=r.indexOf(n);-1!==r.indexOf(n)&&r.splice(t,1)})),r},r.forEachRight=function(r,n){Array.isArray(r)||(r=this.toArray(r));for(var t=r.length-1;t>=0;t--){if(!n(r[t]))break}},r.startsWith=function(r,n,t){return(r=r.substr(t)).startsWith(n)},r.endsWith=function(r,n,t){return(r=r.substr(t)).endsWith(n)},r.remove=function(r,n){var t=[],e=[];return r.forEach((function(r,i){n(r)&&(t.push(r),e.push(i))})),this.basePullAt(r,e),t},r.basePullAt=function(r,n){for(var t,e=r?n.length:0,i=e-1;e--;){var u=n[e];e!==i&&u===t||(t=u,Array.prototype.splice.call(r,u,1))}return r},r.findIndex=function(r,n,t){var e;if(r=r.slice(t),"function"==typeof n){for(e=0;e<r.length;e++)if(n(r[e]))return e}else if(Array.isArray(n))for(e=0;e<r.length;e++){var i=n[0],u=!0;if(n.length>1&&(u=n[1]),r[e][i]===u)return e}else for(e=0;e<r.length;e++)if(r[e]===n)return e;return-1},r.concat=function(){var r=arguments.length;if(!r)return[];for(var n=arguments[0],t=1;t<r;)n=n.concat(arguments[t]),t++;return n},r.isNumber=function(r){return"number"==typeof r},r.indexOf=function(r,n,t){return(r=r.slice(t)).indexOf(n)},r.join=function(r,n){if(null===r)return"";var t="";return r.forEach((function(r){t+=r+n})),t.substr(0,t.length-1)},r.split=function(r,n,t){return r.split(n,t)},r.max=function(r){if(r&&r.length){for(var n,t=0;t<r.length;t++)0===t?n=r[0]:n<r[t]&&(n=r[t]);return n}},r.drop=function(r,n){return(null===r?0:r.length)?r.slice(n):[]},r.flattenDeep=function(r){return r.reduce((function(r,n){return r.concat(Array.isArray(n)?this.flattenDeep(n):n)}),[])},r.uniq=function(r){var n=[];return r.forEach((function(r){-1===n.indexOf(r)&&n.push(r)})),n},r.isNaN=function(r){return this.isNumber(r)&&r!==+r},r.chunk=function(r,n){if(!(null===r?0:r.length)||n<1)return[];for(var t=[];r.length>n;)t.push(r.slice(0,n)),r=r.slice(n);return t.push(r),t},r.toFinite=function(r){var n=1/0;return r?(r=Number(r))===n||r===-1/0?17976931348623157e292*(r<0?-1:1):r==r?r:0:0===r?r:0},r.baseRange=function(r,n,t,e){for(var i=-1,u=(0,Math.max)((0,Math.ceil)((n-r)/(t||1)),0),o=Array(u);u--;)o[e?u:++i]=r,r+=t;return o},r.isObject=function(r){var n=typeof r;return null!==r&&("object"===n||"function"===n)},r.isLength=function(n){return"number"==typeof n&&n>-1&&n%1==0&&n<=r.MAX_SAFE_INTEGER},r.isArrayLike=function(r){return null!==r&&this.isLength(r.length)},r.eq=function(r,n){return r===n||r!=r&&n!=n},r.isIndex=function(n,t){var e=typeof n;return!!(t=null===t?r.MAX_SAFE_INTEGER:t)&&("number"===e||"symbol"!==e&&/^(?:0|[1-9]\d*)$/.test(n))&&n>-1&&n%1==0&&n<t},r.isIterateeCall=function(r,n,t){if(!this.isObject(t))return!1;var e=typeof n;return!!("number"===e?this.isArrayLike(t)&&this.isIndex(n,t.length):"string"===e&&n in t)&&this.eq(t[n],r)},r.createRange=function(r){return function(n,t,e){return e&&"number"!=typeof e&&this.isIterateeCall(n,t,e)&&(t=e=void 0),n=this.toFinite(n),void 0===t?(t=n,n=0):t=this.toFinite(t),e=void 0===e?n<t?1:-1:this.toFinite(e),this.baseRange(n,t,e,r)}},r.maxBy=function(r,n){if(r&&r.length){for(var t,e,i=0;i<r.length;i++)0===i?(t=n(r[0]),e=r[0]):t<r[i]&&(t=r[i],e=r[i]);return e}},r.minBy=function(r,n){if(r&&r.length){for(var t,e,i=0;i<r.length;i++)0===i?(t=n(r[0]),e=r[0]):t>r[i]&&(t=n(r[i]),e=r[i]);return e}},r.sumBy=function(r,n){var t=0;for(var e in r)t+=n(r[e]);return t},r.countBy=function(r,n){var t={};for(var e in r){var i=r[e];t.hasOwnProperty(i)?t[i]+=1:t[i]=1}return t},r}(),f=9007199254740991,(a="MAX_SAFE_INTEGER")in(o=i)?Object.defineProperty(o,a,{value:f,enumerable:!0,configurable:!0,writable:!0}):o[a]=f,e=u))||e);n._RF.pop()}}}));

System.register("chunks:///_virtual/enemy.ts",["cc","./constant.ts","./util.ts","./audioManager.ts","./effectManager.ts","./manModel.ts","./fightMap.ts","./gameManager.ts"],(function(e){"use strict";var i,n,t,o,r,a,l,c,s,u,d,p,f,m;return{setters:[function(e){i=e.cclegacy,n=e._decorator,t=e.Vec3,o=e.RigidBodyComponent,r=e.BoxColliderComponent,a=e.tween,l=e.Component},function(e){c=e.constant},function(e){s=e.util},function(e){u=e.AudioManager},function(e){d=e.EffectManager},function(e){p=e.ManModel},function(e){f=e.FightMap},function(e){m=e.GameManager}],execute:function(){var y,b,g,h,v,_,M,w,S;function z(e,i,n,t){n&&Object.defineProperty(e,i,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(t):void 0})}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function F(e,i,n){return i in e?Object.defineProperty(e,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[i]=n,e}function C(e,i,n,t,o){var r={};return Object.keys(t).forEach((function(e){r[e]=t[e]})),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=n.slice().reverse().reduce((function(n,t){return t(e,i,n)||n}),r),o&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(o):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,i,r),r=null),r}i._RF.push({},"a8551HLRYlA2ajDiowZE3qA","enemy",void 0);var B=n.ccclass,R=n.property,A=new t,P=new t,O=new t,T=new t;e("Enemy",(y=B("Enemy"),b=R(o),g=R(r),y((S=w=function(e){var i,n;function t(){for(var i,n=arguments.length,t=new Array(n),o=0;o<n;o++)t[o]=arguments[o];return z(E(i=e.call.apply(e,[this].concat(t))||this),"rigidBodyCom",_,E(i)),z(E(i),"colliderCom",M,E(i)),F(E(i),"scriptManModel",null),F(E(i),"_costTime",0),F(E(i),"_isRaiseSpeed",!1),i}n=e,(i=t).prototype=Object.create(n.prototype),i.prototype.constructor=i,i.__proto__=n;var o=t.prototype;return o.onEnable=function(){},o.onDisable=function(){},o.start=function(){},o.init=function(){var e;this.scriptManModel=null===(e=this.node.getChildByName("body"))||void 0===e?void 0:e.getComponent(p),t.isHitFly=!1,this.rigidBodyCom.clearState(),this.scriptManModel.playAni(c.ANI_TYPE.IDLE,!0)},o.hitFly=function(e){var i=this;u.instance.playSound(c.AUDIO_SOUND.ENEMY_HIT_FLY),t.isHitFly=!0,this._isRaiseSpeed=!0;var n=e-.5,o=f.ndRoadScore.worldPosition.clone();this._costTime=.4*n,console.log("飞行消耗时间",this._costTime),A.set(0,1.2,o.z-.7*n),P.set(0,1,o.z-1*n),a(this.node).to(.5*this._costTime,{position:A}).call((function(){d.instance.playEffect(i.node,"smoke/smokeLight01",!1,!0,1.5,2.5),i._isRaiseSpeed=!1,i.scriptManModel.playAni(c.ANI_TYPE.HIT_FLY_03,!1,(function(){var e=i.node.worldPosition.clone();d.instance.playParticle("colorBar/colorBar",e.clone().add3f(-.3,0,-1),3,1.5,null,null,!0),d.instance.playParticle("colorBar/colorBar",e.clone().add3f(0,0,-1),3,1.5,null,null,!0),d.instance.playParticle("colorBar/colorBar",e.clone().add3f(.3,0,-1),3,1.5,null,null,!0),u.instance.playSound(c.AUDIO_SOUND.FIRE)}))})).to(.5*this._costTime,{position:P}).call((function(){m.isWin=!0,t.isHitFly=!1,O.set(.8,2.5,o.z-e+3),T.set(-.3,.5,o.z-e-1),m.scriptGameCamera.moveCamera(O,T,(function(){}),2)})).start()},o.update=function(){t.isHitFly&&(this._isRaiseSpeed?m.gameSpeed=Number(s.lerp(1.4,m.gameSpeed,.3).toFixed(1)):m.gameSpeed=Number(s.lerp(1,m.gameSpeed,.3).toFixed(1)))},t}(l),F(w,"isHitFly",!1),_=C((v=S).prototype,"rigidBodyCom",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=C(v.prototype,"colliderCom",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=v))||h));i._RF.pop()}}}));

System.register("chunks:///_virtual/camera.ts",["cc"],(function(t){"use strict";var e,o,n,i,s,r,a,_,h,c;return{setters:[function(t){e=t.cclegacy,o=t._decorator,n=t.systemEvent,i=t.SystemEvent,s=t.macro,r=t.EventMouse,a=t.Quat,_=t.Node,h=t.Vec3,c=t.Component}],execute:function(){var u;function p(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function E(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}e._RF.push({},"ac6b4vOSxdOpKbzE6jegY3f","camera",void 0);var v=o.ccclass;o.property,t("Camera",v("Camera")(u=function(t){var e,o;function c(){for(var e,o=arguments.length,n=new Array(o),i=0;i<o;i++)n[i]=arguments[i];return E(p(e=t.call.apply(t,[this].concat(n))||this),"lookButtonDown",!1),E(p(e),"_targetPos",new h),E(p(e),"_vertical",0),E(p(e),"_horizontal",0),E(p(e),"_speed",50),E(p(e),"_rotateSpeed",.1),E(p(e),"_panButtonDown",!1),E(p(e),"_ratio",.2),e}o=t,(e=c).prototype=Object.create(o.prototype),e.prototype.constructor=e,e.__proto__=o;var u=c.prototype;return u.onLoad=function(){},u.start=function(){this._targetPos=this.node.position},u.onEnable=function(){this._addEvents()},u.onDisable=function(){this._removeEvents()},u._addEvents=function(){n.on(i.EventType.MOUSE_WHEEL,this._onMouseWheel,this),n.on(i.EventType.MOUSE_MOVE,this._onMouseMove,this),n.on(i.EventType.MOUSE_UP,this._onMouseUp,this),n.on(i.EventType.MOUSE_DOWN,this._onMouseDown,this),n.on(i.EventType.KEY_DOWN,this._onKeyDown,this),n.on(i.EventType.KEY_UP,this._onKeyUp,this)},u._removeEvents=function(){n.off(i.EventType.MOUSE_WHEEL,this._onMouseWheel,this),n.off(i.EventType.MOUSE_MOVE,this._onMouseMove,this),n.off(i.EventType.MOUSE_UP,this._onMouseUp,this),n.off(i.EventType.MOUSE_DOWN,this._onMouseDown,this),n.off(i.EventType.KEY_DOWN,this._onKeyDown,this),n.off(i.EventType.KEY_UP,this._onKeyUp,this)},u._onKeyDown=function(t){t.keyCode==s.KEY.w?this._vertical=-1*this._ratio:t.keyCode==s.KEY.s?this._vertical=1*this._ratio:t.keyCode==s.KEY.a?this._horizontal=-1*this._ratio:t.keyCode==s.KEY.d&&(this._horizontal=1*this._ratio)},u._onKeyUp=function(t){t.keyCode==s.KEY.w&&this._vertical<0||t.keyCode==s.KEY.s&&this._vertical>0?this._vertical=0:(t.keyCode==s.KEY.a&&this._horizontal<0||t.keyCode==s.KEY.d&&this._horizontal>0)&&(this._horizontal=0)},u._onMouseDown=function(t){switch(t.getButton()){case r.BUTTON_LEFT:break;case r.BUTTON_RIGHT:this._panButtonDown=!0}},u._onMouseUp=function(t){switch(t.getButton()){case r.BUTTON_LEFT:break;case r.BUTTON_RIGHT:this._panButtonDown=!1}},u._onMouseMove=function(t){if(this._panButtonDown){var e=t.getDelta();this.node.rotate(a.fromEuler(new a,0,-e.x*this._rotateSpeed,0),_.NodeSpace.WORLD),this.node.rotate(a.fromEuler(new a,e.y*this._rotateSpeed,0,0),_.NodeSpace.LOCAL)}},u._onMouseWheel=function(t){var e=0;t.getScrollY()>0?e=-1*this._ratio:t.getScrollY()<0&&(e=1*this._ratio);var o=new h(0,0,10*e);this.node.translate(o,_.NodeSpace.LOCAL)},u.update=function(t){var e=new h(this._horizontal*t*this._speed,0,this._vertical*t*this._speed);this.node.translate(e,_.NodeSpace.LOCAL)},c}(c))||u);e._RF.pop()}}}));

System.register("chunks:///_virtual/constant.ts",["cc"],(function(E){"use strict";var _;return{setters:[function(E){_=E.cclegacy}],execute:function(){function O(E,_,O){return _ in E?Object.defineProperty(E,_,{value:O,enumerable:!0,configurable:!0,writable:!0}):E[_]=O,E}_._RF.push({},"b08f08kiOlEA7e6qUWa7AnA","constant",void 0);var e=E("constant",(function(){}));O(e,"GAME_NAME","attackOnTitan"),O(e,"GAME_VERSION","1.0.1"),O(e,"GAME_FRAME",60),O(e,"GAME_INIT_FRAME",60),O(e,"LOCAL_CACHE",{PLAYER:"player",SETTINGS:"settings",DATA_VERSION:"dataVersion",ACCOUNT:"account",HISTORY:"history",BAG:"bag"}),O(e,"SETTINGS_KEY",{SHOP_RANDOM_SKIN_USE_TIMES:"shopRandomSkinUseTimes",SHOP_RECEIVE_DIAMOND_USE_TIMES:"shopReceiveDiamondUseTimes",LEVEL_HAT_PROGRESS:"levelHatProgress",FIGHT_TIMES:"fightTimes"}),O(e,"ZORDER",{NORMAL:10,DIALOG:100,REWARD:900,WAITING:998,TIPS:999,TIPS_1:1e3}),O(e,"MAX_LEVEL",20),O(e,"AUDIO_SOUND",{BACKGROUND:"background",ATTACK:["attack1","attack1","attack1","attack1"],BEST_REWARD:"bestReward",BOSS_ANGRY:"bossAngry",BOSS_ATTACK_GROUND:["bossAttackGround1","bossAttackGround2","bossAttackGround3","bossAttackGround4"],BOSS_VERTIGO:"bossVertigo",BOSS_WEAPON_HIT:"bossWeaponHit",BOSS_WEAPON_WAVING:["bossWeaponWaving1","bossWeaponWaving2","bossWeaponWaving3"],CHANGE_COLOR:"changeColor",CLICK:"click",COLLECT_KEY:"collectKey",COLLECT_PEOPLE_RIGHT:"collectPeopleRight",COLLECT_PEOPLE_WRONG:"collectPeopleWrong",DIAMOND_COLLECT:"diamondCollect",DIAMOND_RECEIVE:"diamondReceive",DODGE:"dodge",ENEMY_HIT_FLY:"enemyHitFly",FAIL:"fail",FALL_DOWN_ON_GROUND:"fallDownOnGround",FIRE:"fire",FOOT_STEP:["footstep1","footstep2","footstep3","footstep4","footstep5"],GET_SKIN:"getSkin",INVINCIBLE:"invincible",LEVEL_UP:"levelUp",NUM_RAISE:"numRaise",REVIVE:"revive",REWARD_BIG_BOX:"rewardBigBox",REWARD_SMALL_BOX:"rewardSmallBox",WALL_THOUGH_FAIL:"wallThoughFail",WALL_THOUGH_SUCCESS:"wallThoughSuccess",WIN:"win",JUMP_LAND_GROUND:"jumpLandingGround"}),O(e,"NORMAL_SHOW_TIME",3),O(e,"NEWBEE_LEVEL",2),O(e,"REWARD_TYPE",{DIAMOND:1,KEY:2,SKIN:3}),O(e,"SHARE_ID",{OFFLINE_REWARD:1,SETTLEMENT_SUCCESS_DOUBLE:2,SETTLEMENT_FAIL_REVIVE:3,SETTLEMENT_FAIL_BEAT_ENEMY:4,SHOP_RECEIVE_DIAMOND:5,SHOP_SHOES:6,SKIN:7,BOX_RECEIVE_KEY:8,BOX_RECEIVE_DOUBLE:9,INVINCIBLE:10,HOME_POWER_HAND:11,HOME_POWER_KICK:12}),O(e,"OPEN_REWARD_TYPE",{AD:0,SHARE:1,NULL:2}),O(e,"LOTTERY",{MONEY:2e3,EXCHANGE:500}),O(e,"PLATFORM",{WX:"wx",COCOSPLAY:"cocosplay",ANDROID:"android",APPSTORE:"appstore"}),O(e,"TIP_TYPE",{GOLD:"gold",HEART:"heart",TXT:"txt"}),O(e,"FIGHT_TIP_INDEX",{SCORE_ADD:0,SCORE_MINUS:1,REWARD_SCALE:2}),O(e,"GROUP_TYPE",{DEFAULT:1,PLAYER:2,COLLIDER_ITEM:4}),O(e,"ANI_TYPE",{IDLE:"idle",RUN:"run",RUN_HIT:"runHit",FIGHT_IDLE:"fightIdle",ATTACK_LEFT:"attackLeft",ATTACK_RIGHT:"attackRight",HIT_BIG:"hitBig",HIT_SMALL:"hitSmall",KICK:"kick",DODGE_LEFT:"dodgeLeft",DIE:"die",LIFE:"life",WIN:"win",DODGE_RIGHT:"dodgeRight",HIT_FLY_01:"hitFly01",HIT_FLY_02:"hitFly02",HIT_FLY_03:"hitFly03"}),O(e,"BOSS_ANI_TYPE",{BOSS_FIGHT_IDLE:"bossFightIdle",BOSS_ANGRY:"bossAngry",BOSS_ATTACK:"bossAttack",BOSS_SWOON:"bossSwoon",BOSS_LOSE:"bossLose",BOSS_DIE:"bossDie",BOSS_WIN:"bossWin",BOSS_HIT:"bossHit"}),O(e,"GAME_TYPE",{NORMAL:1,REWARD:2,BOSS:3}),O(e,"GAME_STATUS",{RUN:"run",FIGHT:"fight"}),O(e,"COUNTDOWN_REWARD",5),O(e,"INTERVAL_CRAZY_CLICK",.03),O(e,"BOSS_STATUS",{FIGHT:"fight",HIDE:"hide",COMA:"coma"}),O(e,"SKIN_TYPE",{HAT:1,SHOES:2}),O(e,"SHOP_ITEM_STATUS",{LOCK:0,UNLOCKED_NOT_OWNED:1,OWNED:2,EQUIPMENT:3}),O(e,"OWN_TYPE",{UNLOCK_BY_VIDEO:"unlockByVideo",BOX:"box",SHOP:"shop"}),O(e,"SKIN_HAT_CHANEL",{LEVEL:1,BOX:2,BOX_SETTLEMENT:3}),O(e,"unlockHatSkinProgress",25),O(e,"BUBBLE",{BUBBLE_RED:"bubbleRed",BUBBLE_GREEN:"bubbleGreen",BUBBLE_YELLOW:"bubbleYellow"}),O(e,"INVINCIBLE_ENERGY",50),O(e,"UPDATE_VOLUME_TYPE",{EAT_PEOPLE:"eatPeople",HIT_BY_COLLIDER:"hitByCollider"}),O(e,"REVIVE_INVINCIBLE_TIME",.5),O(e,"MODULE_TYPE",{ROAD_01:1001,ROAD_02:1002,ROAD_03:1003,ROAD_04:1004,ROAD_05:1005,ROAD_06:1006,ROAD_07:1007,ROAD_08:1008,ROAD_09:1009,ROAD_10:1010,ROAD_11:1011,ROAD_12:1012,ROAD_13:1013,COLOR_LIGHT_GREEN:2001,COLOR_LIGHT_RED:2002,COLOR_LIGHT_YELLOW:2003,PEOPLE_GREEN:3001,PEOPLE_RED:3002,PEOPLE_YELLOW:3003,PEOPLE_ENEMY:3004,PEOPLE_BOSS:3005,ORGAN_DOOR:4001,MACE_SECTOR:5001,KEY:6001,BOX:7001,DIAMOND:8001,WALL:9001,ROTATING_BLADE:1101,ROTATING_RING:1201,SPINE_ROAD:1301}),O(e,"EVENT_TYPE",{ARRIVE_END:"arriveEnd",ARRIVE_END_LINE:"arriveEndLine",CHANGE_SKIN:"changeSkin",CHANGE_TO_SPINE_SPEED:"changeToSpineSpeed",CHANGE_TO_INVINCIBLE_SPEED:"changeToInvincibleSpeed",CHECK_EFFECTIVE:"checkEffective",CHECK_LEVEL_UNLOCK_HAT_SKIN:"checkLevelUnlockHatSkin",CHANGE_OFFSET:"changeOffset",EQUIPMENT_SHOES:"equipmentShoes",EQUIPMENT_HAT:"equipmentHat",HIDE_LOADING_PANEL:"hideLoadingPanel",HIT_FLY_ENEMY:"hitFlyEnemy",HIDE_HAT_EQUIPMENT:"hideHatEquipment",HIDE_SHOES_EQUIPMENT:"hideShoesEquipment",ON_INIT_GAME:"onInitGame",ON_GAME_OVER:"onGameOver",ON_BOX_OPEN:"onBoxOpen",ON_BOX_HIT:"onBoxHit",ON_REVIVE:"onRevive",PEOPLE_RECOVERY_ORI_SKIN:"peopleRecoveryOriSkin",PEOPLE_BECOME_SAME_SKIN:"peopleBecomeSameSkin",REFRESH_ATTACK_WOR_POS:"refreshAttackWorPos",REFRESH_DIAMOND:"refreshDiamond",REFRESH_KEY:"refreshKey",RECOVERY_ORI_SPEED:"recoveryOriSpeed",REDUCE_OBSTACLE:"reduceObstacle",REFRESH_PEOPLE:"refreshPeople",REFRESH_HAT_ITEM:"refreshHatItem",REFRESH_SHOES_ITEM:"refreshShoesItem",REFRESH_LEVEL:"refreshLevel",RESET_PB_ENERGY:"_refreshPbEnergy",SHOW_INVINCIBLE:"showInvincible",SHOW_SCORE_LINE:"showScoreLine",SHOW_LOADING_PANEL:"hideLoadingPanel",WEAPON_HIT_PLAYER:"weaponHitPlayer",INIT_SCORE_LINE:"initScoreLine",SHOW_ROAD_END_FIRE:"showRoadEndFire"}),_._RF.pop()}}}));

System.register("chunks:///_virtual/gameCamera.ts",["cc","./constant.ts","./clientEvent.ts","./gameManager.ts"],(function(t){"use strict";var e,i,o,s,n,r,a,l,h,f;return{setters:[function(t){e=t.cclegacy,i=t._decorator,o=t.Quat,s=t.Vec3,n=t.tween,r=t.isValid,a=t.Component},function(t){l=t.constant},function(t){h=t.clientEvent},function(t){f=t.GameManager}],execute:function(){var u,c,d,_,g,m,w,v,P,O,b;function y(t,e,i,o){i&&Object.defineProperty(t,e,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(o):void 0})}function p(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function C(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function A(t,e,i,o,s){var n={};return Object.keys(o).forEach((function(t){n[t]=o[t]})),n.enumerable=!!n.enumerable,n.configurable=!!n.configurable,("value"in n||n.initializer)&&(n.writable=!0),n=i.slice().reverse().reduce((function(i,o){return o(t,e,i)||i}),n),s&&void 0!==n.initializer&&(n.value=n.initializer?n.initializer.call(s):void 0,n.initializer=void 0),void 0===n.initializer&&(Object.defineProperty(t,e,n),n=null),n}e._RF.push({},"b3b8f8MvnZBabYcFYlL29Be","gameCamera",void 0);var k=i.ccclass,F=i.property,T=new o,L=new s,M=new s(0,1,0),z=new s,E=new s,Y=new s,R=new s,S=new s,x=new o;t("GameCamera",(u=k("GameCamera"),c=F(s),d=F(s),_=F(s),g=F(s),u((v=A((w=function(t){var e,i;function a(){var e;return y(p(e=t.call(this)||this),"oriLookAtOffset",v,p(e)),y(p(e),"oriPosOffset",P,p(e)),y(p(e),"minPosOffset",O,p(e)),y(p(e),"minLookAtOffset",b,p(e)),C(p(e),"ndFollowTarget",null),C(p(e),"isPutUpHeight",!1),C(p(e),"isMovingCamera",!1),C(p(e),"moveLookAtPos",new s),C(p(e),"curLookAtPos",new s),C(p(e),"_oriPosTarget",new s),C(p(e),"_oriEuler",null),C(p(e),"_oriRotationCamera",new o),C(p(e),"_addY",0),C(p(e),"_addZ",0),C(p(e),"_isMovingCameraFollowTarget",!1),C(p(e),"_isInit",!1),C(p(e),"_isCameraReady",!1),C(p(e),"_curLookAtOffSet",new s),C(p(e),"_curPosOffset",new s),C(p(e),"_isChangeOffset",!1),C(p(e),"_targetPosOffset",new s),C(p(e),"_targetLookAtOffset",new s),C(p(e),"_curCameraWorPos",null),C(p(e),"_tempPos",null),e}i=t,(e=a).prototype=Object.create(i.prototype),e.prototype.constructor=e,e.__proto__=i;var u=a.prototype;return u.onLoad=function(){this.resetCamera()},u.onEnable=function(){h.on(l.EVENT_TYPE.CHANGE_OFFSET,this._changeOffset,this)},u.onDisable=function(){h.on(l.EVENT_TYPE.CHANGE_OFFSET,this._changeOffset,this)},u.start=function(){},u._changeOffset=function(){this._isChangeOffset=!0,this._targetPosOffset=this.minPosOffset.clone(),this._targetLookAtOffset=this.minLookAtOffset.clone()},u.resetCamera=function(){this._curLookAtOffSet=this.oriLookAtOffset.clone(),this._curPosOffset=this.oriPosOffset.clone(),this._isChangeOffset=!1,this.isMovingCamera=!1,this._addY=0,this._addZ=0,this._isMovingCameraFollowTarget=!1,this._curCameraWorPos=null},u.moveCamera=function(t,e,i,r,a){void 0===i&&(i=function(){}),void 0===r&&(r=2),void 0===a&&(a=!1),this.moveLookAtPos=e,s.subtract(L,t,e),s.normalize(L,L),o.fromViewUp(T,L,M),this.isMovingCamera=!0,this._isMovingCameraFollowTarget=!1;var l=T.getEulerAngles(new s);l.y=l.y<0?l.y+360:l.y;var h=this.node.eulerAngles.clone().y;h=h<0?h+360:h;var f=0,u=0,c=0;Math.round(h)%360==0?(u=Math.abs(0-l.y),c=Math.abs(360-l.y)):Math.round(l.y)%360==0?(u=Math.abs(0-h),c=Math.abs(360-h)):(u=Math.abs(l.y-h),c=l.y>=h?h+360-l.y:l.y+360-h),f=u<c?u:c,f=a?-f:f;var d=this.node.eulerAngles.clone();0!==f&&(-180===Math.round(d.y)&&a?(d.y=180,this.node.eulerAngles=new s(d.x,180,d.z)):180!==Math.round(d.y)||a||(d.y=-180,this.node.eulerAngles=new s(d.x,-180,d.z)),d.y=d.y+f),z.set(l.x,d.y,l.z),n(this.node).to(r,{worldPosition:t,eulerAngles:z},{easing:"smooth"}).call((function(){i&&i()})).start()},u.moveCameraFollowTarget=function(t){this._isMovingCameraFollowTarget=!0,this.isMovingCamera=!1,this.ndFollowTarget=t},u.lateUpdate=function(t){var e;this._isChangeOffset&&(this.isPutUpHeight=!0,this._addY>0&&(this._addY-=t),this._curPosOffset=this._curPosOffset.lerp(this._targetPosOffset,.08),this._curLookAtOffSet=this._curLookAtOffSet.lerp(this._targetLookAtOffset,.08),this._curPosOffset.clone().subtract(this._targetPosOffset.clone()).length()<=.01&&(this._isChangeOffset=!1));if(this._isInit){if(!this.isPutUpHeight&&f.isGameStart||this._addZ>0&&(this._addZ-=t),!this.isMovingCamera){if(this._isMovingCameraFollowTarget){var i;this._curCameraWorPos||(this._curCameraWorPos=this.node.worldPosition.clone());var o=null===(i=this.ndFollowTarget)||void 0===i?void 0:i.worldPosition.clone();S.set(.5,this._curCameraWorPos.y+.3,o.z+2.5);var s=this.node.worldPosition.clone();return s.lerp(S,.2*f.gameSpeed),this.node.setWorldPosition(s),R.set(0,.7,o.z-1),this.curLookAtPos.lerp(R,.3*f.gameSpeed),void this.node.lookAt(this.curLookAtPos,M)}if(r(this.ndFollowTarget)&&r(this.node)){var n,a=this.ndFollowTarget.getRotation();if(this._isCameraReady){var l=Number(a.x.toFixed(3));if(Math.abs(l)>=.01)if(l>0&&l>this._oriRotationCamera.x){var h=this.node.getRotation().clone();x.set(-l,h.y,h.z,h.w),this.node.setRotation(x),this._addY+=Math.abs(l)*t*5,this._addY=this._addY>=3?3:this._addY}else l<=0&&(this._addY-=.002-.07*l,this._addY=this._addY<=0?0:this._addY,this._targetPosOffset=this.minPosOffset,this._targetLookAtOffset=this.minLookAtOffset,this._isChangeOffset||(this._isChangeOffset=!0))}if(this._tempPos=this._tempPos.lerp(this.ndFollowTarget.worldPosition.clone(),.1),E.set(this._tempPos.x+this._curPosOffset.x,this.ndFollowTarget.worldPosition.y+this._curPosOffset.y+this._addY,this.ndFollowTarget.worldPosition.z+this._curPosOffset.z+this._addZ),this.node.setWorldPosition(E),Y.set(this._curLookAtOffSet.x,this.ndFollowTarget.worldPosition.y+this._curLookAtOffSet.y,this.ndFollowTarget.worldPosition.z+this._curLookAtOffSet.z),this.node.lookAt(Y,M),this.curLookAtPos=Y,!this._oriEuler)this._oriEuler=null===(n=this.node)||void 0===n?void 0:n.eulerAngles.clone();var u=this.node.eulerAngles.clone();u.y=this._oriEuler.y,this.node.eulerAngles=u,this._isCameraReady||(this._isCameraReady=!0,this._oriRotationCamera=this.node.getRotation())}}}else this.ndFollowTarget&&(this._isInit=!0,this._oriPosTarget=null===(e=this.ndFollowTarget)||void 0===e?void 0:e.worldPosition.clone(),this._tempPos=this.ndFollowTarget.worldPosition.clone())},a}(a)).prototype,"oriLookAtOffset",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new s(.05,.3,0)}}),P=A(w.prototype,"oriPosOffset",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new s(.2,.7,1.5)}}),O=A(w.prototype,"minPosOffset",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new s(.2,1.1,2)}}),b=A(w.prototype,"minLookAtOffset",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new s(.05,.5,0)}}),m=w))||m));e._RF.pop()}}}));

System.register("chunks:///_virtual/manModel.ts",["cc","./constant.ts","./clientEvent.ts","./audioManager.ts","./gameLogic.ts","./effectManager.ts","./fightMap.ts","./player.ts","./gameManager.ts"],(function(e){"use strict";var i,t,n,a,o,r,s,l,c,p,E,y,T,f,d,A;return{setters:[function(e){i=e.cclegacy,t=e.Vec3,n=e._decorator,a=e.SkeletalAnimationComponent,o=e.Node,r=e.AnimationClip,s=e.tween,l=e.Component},function(e){c=e.constant},function(e){p=e.clientEvent},function(e){E=e.AudioManager},function(e){y=e.GameLogic},function(e){T=e.EffectManager},function(e){f=e.FightMap},function(e){d=e.Player},function(e){A=e.GameManager}],execute:function(){var u,h,_,P,g,m,S,N,I,M,O,Y,v,F,k,b;function D(e,i,t,n){t&&Object.defineProperty(e,i,{enumerable:t.enumerable,configurable:t.configurable,writable:t.writable,value:t.initializer?t.initializer.call(n):void 0})}function R(e,i){for(var t=0;t<i.length;t++){var n=i[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function L(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function C(e,i,t){return i in e?Object.defineProperty(e,i,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[i]=t,e}function K(e,i,t,n,a){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=t.slice().reverse().reduce((function(t,n){return n(e,i,t)||t}),o),a&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(a):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,i,o),o=null),o}i._RF.push({},"b5c0duurqVK/5KonAmAxa+H","manModel",void 0);var G=new t,w=new t(0,0,-.1),H=new t(0,0,.1),U=new t(0,.1,0),B=new t(0,.4,0),W=new t(0,0,-.1),z=new t(0,0,.1),V=new t(0,.1,0),j=new t(0,.4,0),x=new t(0,0,-.1),X=new t(0,-.2,.2),J=new t(0,.3,0),q=n.ccclass,Q=n.property;e("ManModel",(u=q("ManModel"),h=Q(a),_=Q(o),P=Q(o),g=Q(o),m=Q(o),S=Q(o),u((M=K((I=function(e){var i,t;function n(){for(var i,t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return D(L(i=e.call.apply(e,[this].concat(n))||this),"isPlayer",M,L(i)),D(L(i),"aniComPlayer",O,L(i)),D(L(i),"ndSocketHead",Y,L(i)),D(L(i),"ndSocketLeftFinger",v,L(i)),D(L(i),"ndSocketRightFinger",F,L(i)),D(L(i),"ndSocketLeftFoot",k,L(i)),D(L(i),"ndSocketRightFoot",b,L(i)),C(L(i),"aniType",""),C(L(i),"isAniPlaying",!1),C(L(i),"isKicking",!0),C(L(i),"_aniState",null),C(L(i),"_isAttackLeft",!0),i}t=e,(i=n).prototype=Object.create(t.prototype),i.prototype.constructor=i,i.__proto__=t;var o,l,u,h=n.prototype;return h.onEnable=function(){p.on(c.EVENT_TYPE.ARRIVE_END_LINE,this._arriveEndLine,this)},h.onDisable=function(){p.off(c.EVENT_TYPE.ARRIVE_END_LINE,this._arriveEndLine,this)},h.start=function(){this._isAttackLeft=!0,this.isKicking=!1},h._arriveEndLine=function(){A.gameType===c.GAME_TYPE.NORMAL&&(this.isPlayer||this.playAni(c.ANI_TYPE.FIGHT_IDLE,!0,(function(){}),0)),this.isPlayer&&(A.scriptPlayer.isEnableMoveLeftOrRight=!1)},h.playAni=function(e,i,t,n){var o,s,l=this;if(void 0===i&&(i=!1),this.aniType=e,this.aniComPlayer||(this.aniComPlayer=this.node.getComponent(a)),null===(o=this.aniComPlayer)||void 0===o||o.play(e),this.isAniPlaying=!0,this.isKicking=!1,this._aniState=null===(s=this.aniComPlayer)||void 0===s?void 0:s.getState(e),this._aniState)switch(this._aniState.wrapMode=i?r.WrapMode.Loop:r.WrapMode.Normal,e){case c.ANI_TYPE.ATTACK_LEFT:case c.ANI_TYPE.ATTACK_RIGHT:this._aniState.speed=1.1*A.gameSpeed;break;case c.ANI_TYPE.KICK:this.isKicking=!0;break;case c.ANI_TYPE.DIE:this._aniState.speed=4*A.gameSpeed,this.isPlayer&&A.scriptPlayer.triggerDie();break;case c.ANI_TYPE.RUN:this._aniState.speed=1.2*A.gameSpeed;break;case c.ANI_TYPE.DODGE_LEFT:case c.ANI_TYPE.DODGE_RIGHT:this._aniState.speed=.7*A.gameSpeed;break;default:this._aniState.speed=1*A.gameSpeed}i||this.aniComPlayer.once(a.EventType.FINISHED,(function(){l.isAniPlaying=!1,t&&t()}))},h.playAniAttack=function(e){var i,t,n=null===(i=this.aniComPlayer)||void 0===i?void 0:i.getState(c.ANI_TYPE.ATTACK_LEFT),a=null===(t=this.aniComPlayer)||void 0===t?void 0:t.getState(c.ANI_TYPE.ATTACK_RIGHT);n.isPlaying||a.isPlaying||A.isGameOver||(this._isAttackLeft?(this.playAni(c.ANI_TYPE.ATTACK_LEFT,!1,(function(){e&&e(),A.gameType===c.GAME_TYPE.REWARD&&p.dispatchEvent(c.EVENT_TYPE.ON_BOX_HIT)})),this._isAttackLeft=!1):(this.playAni(c.ANI_TYPE.ATTACK_RIGHT,!1,(function(){e&&e(),A.gameType===c.GAME_TYPE.REWARD&&p.dispatchEvent(c.EVENT_TYPE.ON_BOX_HIT)})),this._isAttackLeft=!0))},h.onFrameKickUp=function(){A.gameType===c.GAME_TYPE.NORMAL?this.isPlayer?T.instance.playFightBoomEffect(this.ndSocketHead,f.scriptEnemy.scriptManModel.ndSocketHead,x):T.instance.playFightBoomEffect(this.ndSocketHead,A.scriptPlayer.scriptManModel.ndSocketHead,X):A.gameType===c.GAME_TYPE.REWARD?this.isPlayer&&T.instance.playFightBoomEffect(this.ndSocketHead,f.ndBox):A.gameType===c.GAME_TYPE.BOSS&&this.isPlayer&&T.instance.playFightBoomEffect(this.node,f.ndBoss,J)},h.onFrameKickTop=function(){if(y.vibrateShort(),A.gameType===c.GAME_TYPE.REWARD)this.isPlayer&&(console.log("onKickStart"),A.gameSpeed=.8,E.instance.playSound(c.AUDIO_SOUND.ATTACK[Math.floor(Math.random()*c.AUDIO_SOUND.ATTACK.length)]));else if(A.gameType===c.GAME_TYPE.NORMAL)if(this.isPlayer&&this.aniType===c.ANI_TYPE.KICK){A.gameSpeed=.2;var e=f.ndEnemy.worldPosition.clone(),i=e.clone().add3f(.5,.8,2.4),t=e.clone().add3f(0,.4,0);A.scriptGameCamera.moveCamera(i,t,(function(){}),2,!0),E.instance.playSound(c.AUDIO_SOUND.ATTACK[Math.floor(Math.random()*c.AUDIO_SOUND.ATTACK.length)]),f.scriptEnemy.scriptManModel.playAni(c.ANI_TYPE.HIT_FLY_01,!1,(function(){p.dispatchEvent(c.EVENT_TYPE.HIT_FLY_ENEMY),A.scriptGameCamera.moveCameraFollowTarget(f.ndEnemy),f.scriptEnemy.scriptManModel.playAni(c.ANI_TYPE.HIT_FLY_02,!0)})),p.dispatchEvent(c.EVENT_TYPE.SHOW_SCORE_LINE)}else this.isPlayer||this.aniType!==c.ANI_TYPE.KICK||E.instance.playSound(c.AUDIO_SOUND.ATTACK[Math.floor(Math.random()*c.AUDIO_SOUND.ATTACK.length)]);else if(A.gameType===c.GAME_TYPE.BOSS){var n;if(this.isPlayer&&this.aniType===c.ANI_TYPE.KICK)E.instance.playSound(c.AUDIO_SOUND.ATTACK[Math.floor(Math.random()*c.AUDIO_SOUND.ATTACK.length)]),A.gameSpeed=.2,null===(n=f.scriptBoss)||void 0===n||n.playAni(c.BOSS_ANI_TYPE.BOSS_DIE,!1,(function(){E.instance.playSound(c.AUDIO_SOUND.FALL_DOWN_ON_GROUND)}))}},h.onFrameKickDown=function(){var e=this;A.gameType===c.GAME_TYPE.REWARD?this.isPlayer&&(A.gameSpeed=1,p.dispatchEvent(c.EVENT_TYPE.ON_BOX_OPEN,(function(){s(e.node).to(1,{eulerAngles:G},{easing:"smooth"}).call((function(){e.playAni(c.ANI_TYPE.WIN,!0);var i=A.scriptPlayer.node.worldPosition.clone(),t=i.clone().add3f(0,.9,2),n=i.clone().add3f(0,.3,-.2);A.scriptGameCamera.moveCamera(t,n,(function(){A.isWin=!0}),2,!0)})).start()}))):A.gameType===c.GAME_TYPE.NORMAL?this.isPlayer&&(this.aniType,c.ANI_TYPE.KICK):A.gameType===c.GAME_TYPE.BOSS&&this.isPlayer&&this.aniType===c.ANI_TYPE.KICK&&(A.gameSpeed=1,f.scriptBoss.hitFlyBoss())},h.onFrameKickBack=function(){if(A.gameType===c.GAME_TYPE.NORMAL)if(this.isPlayer&&this.aniType===c.ANI_TYPE.KICK);else if(!this.isPlayer&&this.aniType===c.ANI_TYPE.KICK){var e=A.scriptPlayer.node.worldPosition.clone(),i=e.clone().add3f(0,1.1,3),t=e.clone().add3f(0,.3,0);A.scriptGameCamera.moveCamera(i,t,(function(){}),2,!0),A.scriptPlayer.scriptManModel.playAni(c.ANI_TYPE.DIE,!1,(function(){E.instance.playSound(c.AUDIO_SOUND.FALL_DOWN_ON_GROUND)}))}},h.onFrameKickEnd=function(){A.gameType===c.GAME_TYPE.NORMAL?this.isPlayer&&this.aniType===c.ANI_TYPE.KICK?this.playAni(c.ANI_TYPE.WIN,!0):this.isPlayer||this.aniType!==c.ANI_TYPE.KICK||(this.playAni(c.ANI_TYPE.WIN,!0),A.isWin=!1):A.gameType===c.GAME_TYPE.BOSS&&(this.playAni(c.ANI_TYPE.WIN,!0),A.isWin=!0,A.scriptPlayer.showFireworks())},h.onFrameHitFly=function(){A.gameType===c.GAME_TYPE.BOSS&&this.isPlayer&&(A.gameSpeed=1)},h.onFrameAttackLeft=function(){A.gameType===c.GAME_TYPE.NORMAL?this.isPlayer?T.instance.playHitEffect(this.ndSocketLeftFinger,f.scriptEnemy.scriptManModel.ndSocketLeftFinger,w):T.instance.playHitEffect(this.ndSocketLeftFinger,A.scriptPlayer.scriptManModel.ndSocketLeftFinger,H):A.gameType===c.GAME_TYPE.REWARD?this.isPlayer&&T.instance.playHitEffect(this.ndSocketLeftFinger,f.ndBox,U):A.gameType===c.GAME_TYPE.BOSS&&this.isPlayer&&T.instance.playHitEffect(this.ndSocketLeftFinger,f.ndBoss,B)},h.onFrameAttackRight=function(){A.gameType===c.GAME_TYPE.NORMAL?this.isPlayer?T.instance.playHitEffect(this.ndSocketRightFinger,f.scriptEnemy.scriptManModel.ndSocketRightFinger,W):T.instance.playHitEffect(this.ndSocketRightFinger,A.scriptPlayer.scriptManModel.ndSocketRightFinger,z):A.gameType===c.GAME_TYPE.REWARD?this.isPlayer&&T.instance.playHitEffect(this.ndSocketRightFinger,f.ndBox,V):A.gameType===c.GAME_TYPE.BOSS&&this.isPlayer&&T.instance.playHitEffect(this.ndSocketRightFinger,f.ndBoss,j)},h.onFrameRunFootstep=function(){E.instance.playSound(c.AUDIO_SOUND.FOOT_STEP[Math.floor(Math.random()*c.AUDIO_SOUND.FOOT_STEP.length)])},h.onFrameRunHit=function(){},h.onFrameFallGround=function(){this.isPlayer||(E.instance.playSound(c.AUDIO_SOUND.FALL_DOWN_ON_GROUND),y.vibrateShort())},h.onFrameAttackPeople=function(){y.vibrateShort()},h.onFrameJumpLandGround=function(){this.isPlayer&&E.instance.playSound(c.AUDIO_SOUND.JUMP_LAND_GROUND)},h.notIdleAniPlaying=function(){if(this.isPlayer)return A.scriptPlayer.scriptManModel.isAniPlaying&&this.aniType!==c.ANI_TYPE.FIGHT_IDLE&&this.aniType!==c.ANI_TYPE.IDLE},h.playHitHeadEffect=function(){T.instance.playEffect(this.ndSocketHead,"fightBoom/fightBoom",!1,!0,3,3*d.scaleRatio,G)},o=n,(l=[{key:"isAttacking",get:function(){var e,i,t=null===(e=this.aniComPlayer)||void 0===e?void 0:e.getState(c.ANI_TYPE.ATTACK_LEFT),n=null===(i=this.aniComPlayer)||void 0===i?void 0:i.getState(c.ANI_TYPE.ATTACK_RIGHT);return t.isPlaying||n.isPlaying}}])&&R(o.prototype,l),u&&R(o,u),n}(l)).prototype,"isPlayer",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),O=K(I.prototype,"aniComPlayer",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=K(I.prototype,"ndSocketHead",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=K(I.prototype,"ndSocketLeftFinger",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=K(I.prototype,"ndSocketRightFinger",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=K(I.prototype,"ndSocketLeftFoot",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=K(I.prototype,"ndSocketRightFoot",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=I))||N));i._RF.pop()}}}));

System.register("chunks:///_virtual/boxPanel.ts",["cc","./constant.ts","./clientEvent.ts","./resourceUtil.ts","./localConfig.ts","./playerData.ts","./audioManager.ts","./uiManager.ts","./gameLogic.ts","./effectManager.ts","./boxItem.ts"],(function(e){"use strict";var n,t,i,a,r,o,l,u,c,s,d,b,f,p,m,h,y;return{setters:[function(e){n=e.cclegacy,t=e._decorator,i=e.SpriteFrame,a=e.Node,r=e.SpriteComponent,o=e.LabelComponent,l=e.Component},function(e){u=e.constant},function(e){c=e.clientEvent},function(e){s=e.resourceUtil},function(e){d=e.localConfig},function(e){b=e.playerData},function(e){f=e.AudioManager},function(e){p=e.uiManager},function(e){m=e.GameLogic},function(e){h=e.EffectManager},function(e){y=e.BoxItem}],execute:function(){var v,R,_,D,E,B,N,g,w,I,K,S,O,C,P,k,A,L,z,T,x,U,H,j,M,Y,V,F,W,X,q,G,Z;function J(e,n,t,i){t&&Object.defineProperty(e,n,{enumerable:t.enumerable,configurable:t.configurable,writable:t.writable,value:t.initializer?t.initializer.call(i):void 0})}function Q(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function $(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ee(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function ne(e,n,t,i,a){var r={};return Object.keys(i).forEach((function(e){r[e]=i[e]})),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=t.slice().reverse().reduce((function(t,i){return i(e,n,t)||t}),r),a&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(a):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,n,r),r=null),r}n._RF.push({},"c2a79Z6ibdEmYO+NqC6BroN","boxPanel",void 0);var te=t.ccclass,ie=t.property;e("BoxPanel",(v=te("BoxPanel"),R=ie(i),_=ie(i),D=ie(i),E=ie(a),B=ie(a),N=ie(a),g=ie(a),w=ie(a),I=ie(a),K=ie(r),S=ie(r),O=ie(r),C=ie(o),P=ie(o),k=ie(o),v((z=ne((L=function(e){var n,t;function i(){for(var n,t=arguments.length,i=new Array(t),a=0;a<t;a++)i[a]=arguments[a];return J($(n=e.call.apply(e,[this].concat(i))||this),"sfKeyEnable",z,$(n)),J($(n),"sfKeyDisable",T,$(n)),J($(n),"sfDiamondIcon",x,$(n)),J($(n),"ndKeyList",U,$(n)),J($(n),"ndBtnReceiveKey",H,$(n)),J($(n),"ndBtnSkip",j,$(n)),J($(n),"ndBtnReceiveDiamondDouble",M,$(n)),J($(n),"ndBtnReceiveDiamondNormal",Y,$(n)),J($(n),"ndContainer",V,$(n)),J($(n),"spPayIconKey",F,$(n)),J($(n),"spPayIconDouble",W,$(n)),J($(n),"spBestReward",X,$(n)),J($(n),"lbBestRewardNum",q,$(n)),J($(n),"lbDouble",G,$(n)),J($(n),"lbNormal",Z,$(n)),ee($(n),"keyNum",0),ee($(n),"objBestReward",void 0),ee($(n),"isOpenHatSkin",!1),ee($(n),"_unlockNum",0),ee($(n),"_bestRewardType",0),ee($(n),"_bestRewardIndex",0),ee($(n),"_diamondNum",0),n}t=e,(n=i).prototype=Object.create(t.prototype),n.prototype.constructor=n,n.__proto__=t;var a,o,l,v=i.prototype;return v.onEnable=function(){},v.onDisable=function(){},v.start=function(){},v.show=function(){this.ndKeyList.active=!1,this.ndBtnReceiveKey.active=!1,this.ndBtnSkip.active=!1,this.ndBtnReceiveDiamondNormal.active=!1,this.ndBtnReceiveDiamondDouble.active=!1,this.isOpenHatSkin=!1,this.diamondNum=0,this._unlockNum=0,this._bestRewardIndex=0,this._initBestReward(),this._initBoxItem(),this._getKey()},v._initBestReward=function(){if(this.objBestReward=b.instance.getBestRewardBox(),this._bestRewardType=this.objBestReward.type,this._bestRewardType===u.REWARD_TYPE.DIAMOND)this.lbBestRewardNum.node.active=!0,this.lbBestRewardNum.string=this.objBestReward.num,this.spBestReward.spriteFrame=this.sfDiamondIcon;else if(this._bestRewardType===u.REWARD_TYPE.SKIN){var e=d.instance.queryByID("shop",this.objBestReward.obj.ID);this.lbBestRewardNum.node.active=!1;var n="texture/icon/hats/"+e.iconName;s.setSpriteFrame(n,this.spBestReward,(function(){}))}},v._initBoxItem=function(){var e=this;this._bestRewardIndex=Math.floor(9*Math.random()),console.log("最佳奖品在第"+(this._bestRewardIndex+1)+"个宝箱"),this.ndContainer.children.forEach((function(n,t,i){var a=n.getComponent(y);t===e._bestRewardIndex?e._bestRewardType===u.REWARD_TYPE.SKIN?a.init(u.REWARD_TYPE.SKIN,e,!0):e._bestRewardType===u.REWARD_TYPE.DIAMOND&&a.init(u.REWARD_TYPE.DIAMOND,e,!0):a.init(u.REWARD_TYPE.DIAMOND,e,!1)}))},v.useKey=function(){var e=this;if(this._unlockNum+=1,this.keyNum-=1,b.instance.updatePlayerInfo("key",-1),this.keyNum<=0){if(this.ndKeyList.active=!1,this.ndBtnReceiveKey.active=!0,this.ndBtnSkip.active=!0,this._unlockNum>=9)return this.ndBtnSkip.active=!1,this.ndBtnReceiveKey.active=!1,this.ndBtnReceiveDiamondDouble.active=!0,this.ndBtnReceiveDiamondNormal.active=!0,void m.updatePayIcon(u.SHARE_ID.BOX_RECEIVE_DOUBLE,this.spPayIconDouble);m.updatePayIcon(u.SHARE_ID.BOX_RECEIVE_KEY,this.spPayIconKey)}this.ndKeyList.children.forEach((function(n,t,i){var a=e.ndKeyList.children[t].getComponent(r);t<e.keyNum?a.spriteFrame=e.sfKeyEnable:a.spriteFrame=e.sfKeyDisable}))},v._getKey=function(){var e=this;f.instance.playSound(u.AUDIO_SOUND.COLLECT_KEY),this.keyNum=3,b.instance.updatePlayerInfo("key",3),this.ndKeyList.active=!0,this.ndKeyList.children.forEach((function(n){n.getComponent(r).spriteFrame=e.sfKeyEnable}))},v.onBtnReceiveKeyClick=function(){var e=this;f.instance.playSound(u.AUDIO_SOUND.CLICK),m.vibrateShort(),m.pay(u.SHARE_ID.BOX_RECEIVE_KEY,(function(n){n||(e._getKey(),e.ndBtnSkip.active=!1,e.ndBtnReceiveKey.active=!1)}))},v.onBtnSkipClick=function(){f.instance.playSound(u.AUDIO_SOUND.CLICK),m.vibrateShort(),this.ndBtnSkip.active=!1,this.ndBtnReceiveKey.active=!1,this.ndBtnReceiveDiamondDouble.active=!0,this.ndBtnReceiveDiamondNormal.active=!0,this.lbDouble.string=String(2*this.diamondNum),this.lbNormal.string=String(this.diamondNum),m.updatePayIcon(u.SHARE_ID.BOX_RECEIVE_DOUBLE,this.spPayIconDouble)},v.onBtnReceiveDiamondNormal=function(){f.instance.playSound(u.AUDIO_SOUND.DIAMOND_RECEIVE),m.vibrateShort(),this._getReward()},v.onBtnReceiveDiamondDouble=function(){var e=this;f.instance.playSound(u.AUDIO_SOUND.DIAMOND_RECEIVE),m.vibrateShort(),m.pay(u.SHARE_ID.BOX_RECEIVE_DOUBLE,(function(n){n||(e.diamondNum*=2,e._getReward())}))},v._getReward=function(){var e=this;this.ndBtnReceiveDiamondDouble.active=!1,this.ndBtnReceiveDiamondNormal.active=!1,h.instance.showFlyReward(this.diamondNum,(function(){p.instance.hideDialog("box/boxPanel"),e.isOpenHatSkin?p.instance.showDialog("skin/skinPanel",[u.SKIN_HAT_CHANEL.BOX,u.SKIN_TYPE.HAT,e.objBestReward.obj,function(){c.dispatchEvent(u.EVENT_TYPE.CHECK_LEVEL_UNLOCK_HAT_SKIN)}]):c.dispatchEvent(u.EVENT_TYPE.CHECK_LEVEL_UNLOCK_HAT_SKIN)}))},a=i,(o=[{key:"diamondNum",get:function(){return this._diamondNum},set:function(e){this._diamondNum=e,this.lbDouble.string=String(2*this._diamondNum),this.lbNormal.string=String(this._diamondNum)}}])&&Q(a.prototype,o),l&&Q(a,l),i}(l)).prototype,"sfKeyEnable",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=ne(L.prototype,"sfKeyDisable",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=ne(L.prototype,"sfDiamondIcon",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=ne(L.prototype,"ndKeyList",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=ne(L.prototype,"ndBtnReceiveKey",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=ne(L.prototype,"ndBtnSkip",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=ne(L.prototype,"ndBtnReceiveDiamondDouble",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=ne(L.prototype,"ndBtnReceiveDiamondNormal",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=ne(L.prototype,"ndContainer",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=ne(L.prototype,"spPayIconKey",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=ne(L.prototype,"spPayIconDouble",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=ne(L.prototype,"spBestReward",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=ne(L.prototype,"lbBestRewardNum",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=ne(L.prototype,"lbDouble",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=ne(L.prototype,"lbNormal",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=L))||A));n._RF.pop()}}}));

System.register("chunks:///_virtual/homePanel.ts",["cc","./constant.ts","./clientEvent.ts","./localConfig.ts","./storageManager.ts","./playerData.ts","./audioManager.ts","./uiManager.ts","./gameLogic.ts","./effectManager.ts","./gameManager.ts"],(function(e){"use strict";var n,i,t,a,r,o,l,c,s,u,d,f,p,v,b,h,g,y,m,k,_,I;return{setters:[function(e){n=e.cclegacy,i=e._decorator,t=e.LabelComponent,a=e.Node,r=e.SpriteFrame,o=e.SpriteComponent,l=e.profiler,c=e.AnimationComponent,s=e.UITransformComponent,u=e.Color,d=e.Vec3,f=e.Component},function(e){p=e.constant},function(e){v=e.clientEvent},function(e){b=e.localConfig},function(e){h=e.StorageManager},function(e){g=e.playerData},function(e){y=e.AudioManager},function(e){m=e.uiManager},function(e){k=e.GameLogic},function(e){_=e.EffectManager},function(e){I=e.GameManager}],execute:function(){var H,w,C,P,D,K,L,S,E,z,B,U,O,T,x,A,M,N,V,R,F,G,W,j,q,Y,J,Z,Q,X,$,ee,ne,ie,te,ae,re,oe,le,ce,se,ue,de,fe,pe,ve,be,he,ge;function ye(e,n,i,t){i&&Object.defineProperty(e,n,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(t):void 0})}function me(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ke(e,n,i){return n in e?Object.defineProperty(e,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[n]=i,e}function _e(e,n,i,t,a){var r={};return Object.keys(t).forEach((function(e){r[e]=t[e]})),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=i.slice().reverse().reduce((function(i,t){return t(e,n,i)||i}),r),a&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(a):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,n,r),r=null),r}n._RF.push({},"d1f858TyZtJeJ/6+7rdCmWI","homePanel",void 0);var Ie=i.ccclass,He=i.property;e("HomePanel",(H=Ie("HomePanel"),w=He(t),C=He(t),P=He(a),D=He(a),K=He(a),L=He(r),S=He(r),E=He(r),z=He(r),B=He(r),U=He(r),O=He(o),T=He(o),x=He(a),A=He(a),M=He(a),N=He(a),V=He(a),R=He(a),F=He(a),G=He(a),W=He(a),j=He(a),H((J=_e((Y=function(e){var n,i;function a(){for(var n,i=arguments.length,t=new Array(i),a=0;a<i;a++)t[a]=arguments[a];return ye(me(n=e.call.apply(e,[this].concat(t))||this),"lbDiamond",J,me(n)),ye(me(n),"lbLevel",Z,me(n)),ye(me(n),"ndLevelList",Q,me(n)),ye(me(n),"ndLineList",X,me(n)),ye(me(n),"ndLevelView",$,me(n)),ye(me(n),"sfBox",ee,me(n)),ye(me(n),"sfBoss",ne,me(n)),ye(me(n),"sfBlue",ie,me(n)),ye(me(n),"sfGray",te,me(n)),ye(me(n),"sfLineBlue",ae,me(n)),ye(me(n),"sfLineGray",re,me(n)),ye(me(n),"spPayIconPowerHand",oe,me(n)),ye(me(n),"spPayIconPowerKick",le,me(n)),ye(me(n),"ndHand",ce,me(n)),ye(me(n),"ndKick",se,me(n)),ye(me(n),"ndHandTip",ue,me(n)),ye(me(n),"ndKickTip",de,me(n)),ye(me(n),"ndHandVideo",fe,me(n)),ye(me(n),"ndKickVideo",pe,me(n)),ye(me(n),"ndHandPrice",ve,me(n)),ye(me(n),"ndKickPrice",be,me(n)),ye(me(n),"ndHandDesc",he,me(n)),ye(me(n),"ndKickDesc",ge,me(n)),ke(me(n),"_nextHandInfo",null),ke(me(n),"_nextKickInfo",null),ke(me(n),"_debugClickTimes",0),n}i=e,(n=a).prototype=Object.create(i.prototype),n.prototype.constructor=n,n.__proto__=i;var r=a.prototype;return r.onEnable=function(){},r.onDisable=function(){},r.start=function(){},r.show=function(){var e;!0===(null!==(e=h.instance.getGlobalData("debug"))&&void 0!==e&&e)?l.showStats():l.hideStats(),v.dispatchEvent(p.EVENT_TYPE.REFRESH_DIAMOND),this._refreshHandUpgradeBtn(),this._refreshKickUpgradeBtn(),this._refreshLevel(),this._debugClickTimes=0},r._refreshHandUpgradeBtn=function(e){void 0===e&&(e=!0);var n=g.instance.playerInfo.handPowerLevel;this._nextHandInfo=b.instance.queryByID("power",n+1);var i=g.instance.getFightTimes();if(this._nextHandInfo){var a;if(this.ndHandDesc.active=!1,this._nextHandInfo.handCost<g.instance.playerInfo.diamond)this.ndHandPrice.active=!0,this.ndHandVideo.active=!1,(null===(a=this.ndHandPrice.getChildByName("txt"))||void 0===a?void 0:a.getComponent(t)).string=this._nextHandInfo.handCost;else this.ndHandPrice.active=!1,this.ndHandVideo.active=!0,k.updatePayIcon(p.SHARE_ID.HOME_POWER_HAND,this.spPayIconPowerHand);i%3==0&&0!==i&&e&&g.instance.playerInfo.kickPowerLevel<this._nextHandInfo.ID?this.ndHandTip.active=!0:this.ndHandTip.active=!1}else this.ndHandDesc.active=!0,this.ndHandPrice.active=!1,this.ndHandTip.active=!1,this.ndHandVideo.active=!1},r._refreshKickUpgradeBtn=function(e){void 0===e&&(e=!0);var n=g.instance.playerInfo.kickPowerLevel;this._nextKickInfo=b.instance.queryByID("power",n+1);var i=g.instance.getFightTimes();if(this._nextKickInfo){var a;if(this.ndKickDesc.active=!1,this._nextKickInfo.kickCost<g.instance.playerInfo.diamond)this.ndKickPrice.active=!0,this.ndKickVideo.active=!1,(null===(a=this.ndKickPrice.getChildByName("txt"))||void 0===a?void 0:a.getComponent(t)).string=this._nextKickInfo.kickCost;else this.ndKickPrice.active=!1,this.ndKickVideo.active=!0,k.updatePayIcon(p.SHARE_ID.HOME_POWER_HAND,this.spPayIconPowerKick);i%3==0&&0!==i&&e&&g.instance.playerInfo.kickPowerLevel<this._nextKickInfo.ID?this.ndKickTip.active=!0:this.ndKickTip.active=!1}else this.ndKickDesc.active=!0,this.ndKickPrice.active=!1,this.ndKickTip.active=!1,this.ndKickVideo.active=!1},r._refreshLevel=function(){var e=this,n=g.instance.playerInfo.level;this.lbLevel.string="第"+n+"关";var i=b.instance.getTableArr("map"),a=1,r=0;n<=2?(a=1,r=n-1):n>=i.length-4?(a=i.length-4,r=n-(i.length-4)):(a=n-2,r=2),this.ndLevelList.children.forEach((function(n,i,l){var d=b.instance.queryByID("map",String(a));if(d){var f,v,h,g=null===(f=n.getChildByName("level"))||void 0===f?void 0:f.getComponent(t),y=null===(v=n.getChildByName("icon"))||void 0===v?void 0:v.getComponent(o),m=e.ndLineList.children[i].getComponent(o),k=n.getComponent(o),_=n.getComponent(c);if(_.stop(),i<r?(k.spriteFrame=e.sfBlue,m.spriteFrame=e.sfLineBlue):i===r?(_.play(),k.spriteFrame=e.sfBlue,m.spriteFrame=e.sfLineBlue):(k.spriteFrame=e.sfGray,m.spriteFrame=e.sfLineGray),i===l.length-1&&(m.node.active=!1),d.type==p.GAME_TYPE.NORMAL)g.node.active=!0,y.node.active=!1,g.string=d.ID,null===(h=n.getComponent(s))||void 0===h||h.setContentSize(56,56),g.color=new u(255,255,255,255);else if(d.type==p.GAME_TYPE.REWARD){var I;g.node.active=!1,y.node.active=!0,y.spriteFrame=e.sfBox,null===(I=n.getComponent(s))||void 0===I||I.setContentSize(74,74)}else{var H;g.node.active=!1,y.node.active=!0,y.spriteFrame=e.sfBoss,null===(H=n.getComponent(s))||void 0===H||H.setContentSize(74,74)}}a++}))},r.onBtnSettingClick=function(){y.instance.playSound(p.AUDIO_SOUND.CLICK),k.vibrateShort(),m.instance.showDialog("setting/settingPanel")},r.onBtnInvincibleClick=function(){y.instance.playSound(p.AUDIO_SOUND.CLICK),k.vibrateShort(),m.instance.showDialog("invincible/invinciblePanel")},r.onBtnShopClick=function(){y.instance.playSound(p.AUDIO_SOUND.CLICK),k.vibrateShort(),m.instance.showDialog("shop/shopPanel")},r.onBtnUpgradeHandClick=function(){var e=this;if(y.instance.playSound(p.AUDIO_SOUND.CLICK),k.vibrateShort(),this._nextHandInfo){_.instance.playLevelUpStar(this.ndHand);var n=function(){y.instance.playSound(p.AUDIO_SOUND.LEVEL_UP),_.instance.playEffect(I.scriptPlayer.node,"levelUp/levelUp",!0,!0,2,1.5,new d(0,0,0)),e.ndHandTip.active=!1,g.instance.updateHandPowerLevel(e._nextHandInfo.ID),e._refreshHandUpgradeBtn(!1)};this.ndHandVideo.active?k.pay(p.SHARE_ID.HOME_POWER_HAND,(function(e){e||n()})):(I.addDiamond(-this._nextHandInfo.handCost),n())}},r.onBtnUpgradeKickClick=function(){var e=this;if(y.instance.playSound(p.AUDIO_SOUND.CLICK),k.vibrateShort(),this._nextKickInfo){_.instance.playLevelUpStar(this.ndKick);var n=function(){y.instance.playSound(p.AUDIO_SOUND.LEVEL_UP),_.instance.playEffect(I.scriptPlayer.node,"levelUp/levelUp",!0,!0,2,1.5,new d(0,0,0)),e.ndKickTip.active=!1,g.instance.updateKickPowerLevel(e._nextKickInfo.ID),e._refreshKickUpgradeBtn(!1)};this.ndKickVideo.active?k.pay(p.SHARE_ID.HOME_POWER_KICK,(function(e){e||n()})):(I.addDiamond(-this._nextKickInfo.kickCost),n())}},r.onBtnDebugClick=function(){this._debugClickTimes+=1,this._debugClickTimes>=5&&(this._debugClickTimes=0,m.instance.showDialog("debug/debugPanel"))},a}(f)).prototype,"lbDiamond",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=_e(Y.prototype,"lbLevel",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=_e(Y.prototype,"ndLevelList",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=_e(Y.prototype,"ndLineList",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=_e(Y.prototype,"ndLevelView",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ee=_e(Y.prototype,"sfBox",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ne=_e(Y.prototype,"sfBoss",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ie=_e(Y.prototype,"sfBlue",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),te=_e(Y.prototype,"sfGray",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ae=_e(Y.prototype,"sfLineBlue",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),re=_e(Y.prototype,"sfLineGray",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),oe=_e(Y.prototype,"spPayIconPowerHand",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),le=_e(Y.prototype,"spPayIconPowerKick",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ce=_e(Y.prototype,"ndHand",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),se=_e(Y.prototype,"ndKick",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ue=_e(Y.prototype,"ndHandTip",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),de=_e(Y.prototype,"ndKickTip",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),fe=_e(Y.prototype,"ndHandVideo",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),pe=_e(Y.prototype,"ndKickVideo",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ve=_e(Y.prototype,"ndHandPrice",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),be=_e(Y.prototype,"ndKickPrice",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),he=_e(Y.prototype,"ndHandDesc",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ge=_e(Y.prototype,"ndKickDesc",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=Y))||q));n._RF.pop()}}}));

System.register("chunks:///_virtual/csvManager.ts",["cc","./resourceUtil.ts"],(function(e){"use strict";var t,r,n,i;return{setters:[function(e){t=e.cclegacy,r=e._decorator,n=e.Component},function(e){i=e.resourceUtil}],execute:function(){var a,o,s;function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}t._RF.push({},"d7554BuqnJLAKibwVUWte5P","csvManager",void 0);var h=r.ccclass,f=(r.property,[",",";","\t","|","^"]),d=["\r\n","\r","\n"],v=function(e,t,r,n){return r instanceof Array?"number"===r[t]?Number(n[t]):"boolean"===r[t]?"true"===n[t]||"t"===n[t]||"1"===n[t]:n[t]:isNaN(Number(e))?"false"==e||"true"==e||"t"==e||"f"==e?"true"===n[t]||"t"===n[t]||"1"===n[t]:n[t]:Number(n[t])},p={STANDARD_DECODE_OPTS:{skip:0,limit:!1,header:!1,cast:!1,comment:""},STANDARD_ENCODE_OPTS:{delimiter:f[0],newline:d[0],skip:0,limit:!1,header:!1},quoteMark:'"',doubleQuoteMark:'""',quoteRegex:/"/g,assign:function(){for(var e=Array.prototype.slice.call(arguments),t=e[0],r=e.slice(1),n=0,i=r.length;n<i;n++)for(var a in r[n])t[a]=r[n][a];return t},map:function(e,t){for(var r=[],n=0,i=e.length;n<i;n++)r[n]=t(e[n],n);return r},getType:function(e){return Object.prototype.toString.call(e).slice(8,-1)},getLimit:function(e,t){return!1===e?t:e},buildObjectConstructor:function(e,t,r){return function(n){var i=new Object,a=function(e,t){return i[e]=t};return r?e.forEach((function(e,i){a(e,v(t[i],i,r,n))})):e.forEach((function(e,r){a(e,v(t[r],r,null,n))})),i}},buildArrayConstructor:function(e,t,r){return function(n){var i=new Array(t.length),a=function(e,t){return i[e]=t};return r?e.forEach((function(e,i){a(e,v(t[i],i,r,n))})):e.forEach((function(e,r){a(e,v(t[r],r,null,n))})),i}},frequency:function(e,t,r){void 0===r&&(r=!1);for(var n=0,i=0,a=this.getLimit(r,e.length);i<a&&-1!==(i=e.indexOf(t,i));)i+=1,n++;return n},mostFrequent:function(e,t,r){for(var n,i=t.length-1;i>=0;i--)this.frequency(e,t[i],r)>0&&(n=t[i]);return n||t[0]},unsafeParse:function(e,t,r){var n,i,a=e.split(t.newline);function o(e){var r=e.shift();if(r.indexOf('"')>=0){for(var n=0,i=0,a=0;e.length>0&&(-1!==(n=r.indexOf('"',i))||a%2!=0);)-1!==n?(i=n+1,a++):r=r+t.newline+e.shift();var o,s=[],u=0,l=0,c=0,h=r.length;for(var f in r)if(r.hasOwnProperty(f)){var d=parseInt(f),v=r[f];0===d&&'"'===v&&(u++,l=1),'"'===v&&(u++,r[d-1]===t.delimiter&&l===d&&l++),'"'===v&&u%2==0&&(r[d+1]!==t.delimiter&&d+1!==h||(c=d,o=r.substring(l,c),s.push(o),c=l=c+2)),v===t.delimiter&&u%2==0&&((c=d)>l?(o=r.substring(l,c),s.push(o),c=l=c+1):c===l&&(s.push(""),c=l=c+1))}return(c=h)>=l&&(o=r.substring(l,c),s.push(o)),s}return r.split(t.delimiter)}for(t.skip>0&&a.splice(t.skip),t.header?(!0===t.header?(t.comment=o(a),t.cast=o(a),n=o(a)):"Array"===this.getType(t.header)&&(n=t.header),i=this.buildObjectConstructor(n,a[0].split(t.delimiter),t.cast)):i=this.buildArrayConstructor(n,a[0].split(t.delimiter),t.cast);a.length>0;){var s=o(a);s.length>1&&r(i(s),n[0])}return!0},safeParse:function(e,t,r){t.delimiter;var n=t.newline,i=e.split(n);return t.skip>0&&i.splice(t.skip),!0},encodeCells:function(e,t,r){for(var n=e.slice(0),i=0,a=n.length;i<a;i++)-1!==n[i].indexOf(this.quoteMark)&&(n[i]=n[i].replace(this.quoteRegex,this.doubleQuoteMark)),-1===n[i].indexOf(t)&&-1===n[i].indexOf(r)||(n[i]=this.quoteMark+n[i]+this.quoteMark);return n.join(t)},encodeArrays:function(e,t,r){var n=t.delimiter,i=t.newline;t.header&&"Array"===this.getType(t.header)&&r(this.encodeCells(t.header,n,i));for(var a=0,o=this.getLimit(t.limit,e.length);a<o;a++)r(this.encodeCells(e[a],n,i));return!0},encodeObjects:function(e,t,r){var n,i,a=t.delimiter,o=t.newline;for(var s in n=[],i=[],e[0])n.push(s),i.push(e[0][s]);!0===t.header?r(this.encodeCells(n,a,o)):"Array"===this.getType(t.header)&&r(this.encodeCells(t.header,a,o)),r(this.encodeCells(i,a));for(var u=1,l=this.getLimit(t.limit,e.length);u<l;u++){i=[];for(var c=0,h=n.length;c<h;c++)i.push(e[u][n[c]]);r(this.encodeCells(i,a,o))}return!0},parse:function(e,t,r){var n;if("Function"===this.getType(t)?(r=t,t={}):"Function"!==this.getType(r)?r=(n=[]).push.bind(n):n=[],t=this.assign({},this.STANDARD_DECODE_OPTS,t),this.opts=t,!t.delimiter||!t.newline){var i=Math.min(48,Math.floor(e.length/20),e.length);t.delimiter=t.delimiter||this.mostFrequent(e,f,i),t.newline=t.newline||this.mostFrequent(e,d,i)}return this.unsafeParse(e,t,r)&&(!(n.length>0)||n)},encode:function(e,t,r){var n;return"Function"===this.getType(t)?(r=t,t={}):"Function"!==this.getType(r)&&(r=(n=[]).push.bind(n)),(t=this.assign({},this.STANDARD_ENCODE_OPTS,t)).skip>0&&(e=e.slice(t.skip)),("Array"===this.getType(e[0])?this.encodeArrays:this.encodeObjects)(e,t,r)&&(!(n.length>0)||n.join(t.newline))}};e("CSVManager",h("CSVManager")((s=o=function(e){var t,r;function n(){for(var t,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return c(l(t=e.call.apply(e,[this].concat(n))||this),"loadCallback",void 0),c(l(t),"cntLoad",void 0),c(l(t),"curLoad",void 0),c(l(t),"csvTablesLoaded",{}),c(l(t),"csvTables",{}),c(l(t),"csvTableForArr",{}),c(l(t),"tableCast",{}),c(l(t),"tableComment",{}),t}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var a,o,s,h=n.prototype;return h.addTable=function(e,t,r){if(!this.csvTables[e]||r){var n={},i=[];p.parse(t,{header:!0},(function(e,t){n[e[t]]=e,i.push(e)})),this.tableCast[e]=p.opts.cast,this.tableComment[e]=p.opts.comment,this.csvTables[e]=n,this.csvTableForArr[e]=i}},h.getTableArr=function(e){return this.csvTableForArr[e]},h.getTable=function(e){return this.csvTables[e]},h.queryOne=function(e,t,r){var n=this.getTable(e);if(!n)return null;if(!t)return n[r];for(var i in n)if(n.hasOwnProperty(i)&&n[i][t]===r)return n[i]},h.queryByID=function(e,t){return this.queryOne(e,null,t)},h.queryAll=function(e,t,r){var n=this.getTable(e);if(!n||!t)return null;var i={};for(var a in n)n.hasOwnProperty(a)&&n[a][t]===r&&(i[a]=n[a]);return i},h.queryIn=function(e,t,r){var n=this.getTable(e);if(!n||!t)return null;for(var i={},a=Object.keys(n),o=a.length,s=0;s<o;s++){var u=n[a[s]];r.indexOf(u[t])>-1&&(i[a[s]]=u)}return i},h.queryByCondition=function(e,t){if(t.constructor!==Object)return null;var r=this.getTable(e);if(!r)return null;for(var n={},i=Object.keys(r),a=i.length,o=Object.keys(t),s=o.length,u=0;u<a;u++){for(var l=r[i[u]],c=!0,h=0;h<s;h++){var f=o[h];c=c&&t[f]===l[f]&&!n[i[u]]}c&&(n[i[u]]=l)}return n},h.queryOneByCondition=function(e,t){if(t.constructor!==Object)return null;var r=this.getTable(e);if(!r)return null;var n=Object.keys(t),i=n.length;for(var a in r){for(var o=r[a],s=!0,u=0;u<i;u++){var l=n[u];s=s&&t[l]===o[l]}if(s)return o}return null},h.loadTables=function(e,t){var r=this;e.length>0?(this.loadCallback=t,this.cntLoad=e.length,this.curLoad=0,e.forEach((function(t,n){r.csvTablesLoaded[t]?n==e.length-1&&r.checkLoadFinished():(r.csvTablesLoaded[t]=!0,i.getData(t,(function(e,t){e?cc.error(e.message||e):(console.log(t.name),r.addTable(t.name,t.text),r.checkLoadFinished())})))})),setTimeout((function(){r.loadCallback&&t&&t()}),1e4)):t&&t()},h.checkLoadFinished=function(){if(this.curLoad++,this.curLoad>=this.cntLoad){var e=this.loadCallback;this.loadCallback=null,e&&e()}},a=n,s=[{key:"instance",get:function(){return this._instance||(this._instance=new n),this._instance}}],(o=null)&&u(a.prototype,o),s&&u(a,s),n}(n),c(o,"_instance",void 0),a=s))||a);t._RF.pop()}}}));

System.register("chunks:///_virtual/lz-string.min.js",["./cjs-loader.mjs"],(function(r,e){"use strict";var o;return{setters:[function(r){o=r.default}],execute:function(){let n;r("default",void 0),o.define(e.meta.url,(function(e,t,i,s,u){o.createRequireWithReqMap({},t);window.LZString=function(){function r(r,e){if(!t[r]){t[r]={};for(var o=0;o<r.length;o++)t[r][r.charAt(o)]=o}return t[r][e]}var e=String.fromCharCode,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",t={},i={compressToBase64:function(r){if(null==r)return"";var e=i._compress(r,6,(function(r){return o.charAt(r)}));switch(e.length%4){default:case 0:return e;case 1:return e+"===";case 2:return e+"==";case 3:return e+"="}},decompressFromBase64:function(e){return null==e?"":""==e?null:i._decompress(e.length,32,(function(n){return r(o,e.charAt(n))}))},compressToUTF16:function(r){return null==r?"":i._compress(r,15,(function(r){return e(r+32)}))+" "},decompressFromUTF16:function(r){return null==r?"":""==r?null:i._decompress(r.length,16384,(function(e){return r.charCodeAt(e)-32}))},compressToUint8Array:function(r){for(var e=i.compress(r),o=new Uint8Array(2*e.length),n=0,t=e.length;t>n;n++){var s=e.charCodeAt(n);o[2*n]=s>>>8,o[2*n+1]=s%256}return o},decompressFromUint8Array:function(r){if(null==r)return i.decompress(r);for(var o=new Array(r.length/2),n=0,t=o.length;t>n;n++)o[n]=256*r[2*n]+r[2*n+1];var s=[];return o.forEach((function(r){s.push(e(r))})),i.decompress(s.join(""))},compressToEncodedURIComponent:function(r){return null==r?"":i._compress(r,6,(function(r){return n.charAt(r)}))},decompressFromEncodedURIComponent:function(e){return null==e?"":""==e?null:(e=e.replace(/ /g,"+"),i._decompress(e.length,32,(function(o){return r(n,e.charAt(o))})))},compress:function(r){return i._compress(r,16,(function(r){return e(r)}))},_compress:function(r,e,o){if(null==r)return"";var n,t,i,s={},u={},c="",a="",p="",l=2,f=3,h=2,d=[],m=0,v=0;for(i=0;i<r.length;i+=1)if(c=r.charAt(i),Object.prototype.hasOwnProperty.call(s,c)||(s[c]=f++,u[c]=!0),a=p+c,Object.prototype.hasOwnProperty.call(s,a))p=a;else{if(Object.prototype.hasOwnProperty.call(u,p)){if(p.charCodeAt(0)<256){for(n=0;h>n;n++)m<<=1,v==e-1?(v=0,d.push(o(m)),m=0):v++;for(t=p.charCodeAt(0),n=0;8>n;n++)m=m<<1|1&t,v==e-1?(v=0,d.push(o(m)),m=0):v++,t>>=1}else{for(t=1,n=0;h>n;n++)m=m<<1|t,v==e-1?(v=0,d.push(o(m)),m=0):v++,t=0;for(t=p.charCodeAt(0),n=0;16>n;n++)m=m<<1|1&t,v==e-1?(v=0,d.push(o(m)),m=0):v++,t>>=1}0==--l&&(l=Math.pow(2,h),h++),delete u[p]}else for(t=s[p],n=0;h>n;n++)m=m<<1|1&t,v==e-1?(v=0,d.push(o(m)),m=0):v++,t>>=1;0==--l&&(l=Math.pow(2,h),h++),s[a]=f++,p=String(c)}if(""!==p){if(Object.prototype.hasOwnProperty.call(u,p)){if(p.charCodeAt(0)<256){for(n=0;h>n;n++)m<<=1,v==e-1?(v=0,d.push(o(m)),m=0):v++;for(t=p.charCodeAt(0),n=0;8>n;n++)m=m<<1|1&t,v==e-1?(v=0,d.push(o(m)),m=0):v++,t>>=1}else{for(t=1,n=0;h>n;n++)m=m<<1|t,v==e-1?(v=0,d.push(o(m)),m=0):v++,t=0;for(t=p.charCodeAt(0),n=0;16>n;n++)m=m<<1|1&t,v==e-1?(v=0,d.push(o(m)),m=0):v++,t>>=1}0==--l&&(l=Math.pow(2,h),h++),delete u[p]}else for(t=s[p],n=0;h>n;n++)m=m<<1|1&t,v==e-1?(v=0,d.push(o(m)),m=0):v++,t>>=1;0==--l&&(l=Math.pow(2,h),h++)}for(t=2,n=0;h>n;n++)m=m<<1|1&t,v==e-1?(v=0,d.push(o(m)),m=0):v++,t>>=1;for(;;){if(m<<=1,v==e-1){d.push(o(m));break}v++}return d.join("")},decompress:function(r){return null==r?"":""==r?null:i._decompress(r.length,32768,(function(e){return r.charCodeAt(e)}))},_decompress:function(r,o,n){var t,i,s,u,c,a,p,l=[],f=4,h=4,d=3,m="",v=[],w={val:n(0),position:o,index:1};for(t=0;3>t;t+=1)l[t]=t;for(s=0,c=Math.pow(2,2),a=1;a!=c;)u=w.val&w.position,w.position>>=1,0==w.position&&(w.position=o,w.val=n(w.index++)),s|=(u>0?1:0)*a,a<<=1;switch(s){case 0:for(s=0,c=Math.pow(2,8),a=1;a!=c;)u=w.val&w.position,w.position>>=1,0==w.position&&(w.position=o,w.val=n(w.index++)),s|=(u>0?1:0)*a,a<<=1;p=e(s);break;case 1:for(s=0,c=Math.pow(2,16),a=1;a!=c;)u=w.val&w.position,w.position>>=1,0==w.position&&(w.position=o,w.val=n(w.index++)),s|=(u>0?1:0)*a,a<<=1;p=e(s);break;case 2:return""}for(l[3]=p,i=p,v.push(p);;){if(w.index>r)return"";for(s=0,c=Math.pow(2,d),a=1;a!=c;)u=w.val&w.position,w.position>>=1,0==w.position&&(w.position=o,w.val=n(w.index++)),s|=(u>0?1:0)*a,a<<=1;switch(p=s){case 0:for(s=0,c=Math.pow(2,8),a=1;a!=c;)u=w.val&w.position,w.position>>=1,0==w.position&&(w.position=o,w.val=n(w.index++)),s|=(u>0?1:0)*a,a<<=1;l[h++]=e(s),p=h-1,f--;break;case 1:for(s=0,c=Math.pow(2,16),a=1;a!=c;)u=w.val&w.position,w.position>>=1,0==w.position&&(w.position=o,w.val=n(w.index++)),s|=(u>0?1:0)*a,a<<=1;l[h++]=e(s),p=h-1,f--;break;case 2:return v.join("")}if(0==f&&(f=Math.pow(2,d),d++),l[p])m=l[p];else{if(p!==h)return null;m=i+i.charAt(0)}v.push(m),l[h++]=i+m.charAt(0),i=m,0==--f&&(f=Math.pow(2,d),d++)}}};return i}(),"function"==typeof define&&define.amd?define((function(){return LZString})):void 0!==i&&null!=i&&(i.exports=LZString),n=r("default",i.exports)}));r("__cjsMetaURL",e.meta.url)}}}));

System.register("chunks:///_virtual/hatItem.ts",["cc","./constant.ts","./clientEvent.ts","./resourceUtil.ts","./playerData.ts","./audioManager.ts","./gameLogic.ts"],(function(t){"use strict";var e,i,n,a,r,s,o,c,u,l,h,f;return{setters:[function(t){e=t.cclegacy,i=t._decorator,n=t.SpriteComponent,a=t.SpriteFrame,r=t.Node,s=t.Component},function(t){o=t.constant},function(t){c=t.clientEvent},function(t){u=t.resourceUtil},function(t){l=t.playerData},function(t){h=t.AudioManager},function(t){f=t.GameLogic}],execute:function(){var p,_,E,T,b,I,d,m,S,v,H,g,y,P,O,N,U;function M(t,e,i,n){i&&Object.defineProperty(t,e,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(n):void 0})}function k(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function A(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function z(t,e,i,n,a){var r={};return Object.keys(n).forEach((function(t){r[t]=n[t]})),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=i.slice().reverse().reduce((function(i,n){return n(t,e,i)||i}),r),a&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(a):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(t,e,r),r=null),r}e._RF.push({},"e4334jLz0BI8oGxYpsR8h1k","hatItem",void 0);var D=i.ccclass,j=i.property;t("HatItem",(p=D("HatItem"),_=j(n),E=j(a),T=j(a),b=j(r),I=j(r),d=j(r),m=j(n),p((H=z((v=function(t){var e,i;function n(){for(var e,i=arguments.length,n=new Array(i),a=0;a<i;a++)n[a]=arguments[a];return M(k(e=t.call.apply(t,[this].concat(n))||this),"spItemBg",H,k(e)),M(k(e),"sfWhite",g,k(e)),M(k(e),"sfGray",y,k(e)),M(k(e),"ndLock",P,k(e)),M(k(e),"ndTick",O,k(e)),M(k(e),"ndSelect",N,k(e)),M(k(e),"spHatIcon",U,k(e)),A(k(e),"_status",o.SHOP_ITEM_STATUS.LOCK),A(k(e),"_obj",void 0),A(k(e),"_itemInfo",void 0),e}i=t,(e=n).prototype=Object.create(i.prototype),e.prototype.constructor=e,e.__proto__=i;var a=n.prototype;return a.onEnable=function(){c.on(o.EVENT_TYPE.HIDE_HAT_EQUIPMENT,this._hideHatEquipment,this),c.on(o.EVENT_TYPE.REFRESH_HAT_ITEM,this._refreshHatItem,this)},a.onDisable=function(){c.off(o.EVENT_TYPE.HIDE_HAT_EQUIPMENT,this._hideHatEquipment,this),c.off(o.EVENT_TYPE.REFRESH_HAT_ITEM,this._refreshHatItem,this)},a.start=function(){},a.init=function(t){this._itemInfo=t,this._obj=l.instance.getHatStatus(t.ID),this._status=this._obj.status;var e="texture/icon/hats/"+t.iconName;switch(this._status){case o.SHOP_ITEM_STATUS.LOCK:this.spItemBg.spriteFrame=this.sfGray,this.spHatIcon.node.active=!1,this.ndLock.active=!0,this.ndSelect.active=!1,this.ndTick.active=!1;break;case o.SHOP_ITEM_STATUS.UNLOCKED_NOT_OWNED:this.spItemBg.spriteFrame=this.sfGray,this.spHatIcon.node.active=!0,this.ndLock.active=!1,this.ndSelect.active=!1,this.ndTick.active=!1,u.setSpriteFrame("texture/icon/hats/h10",this.spHatIcon,(function(){}));break;case o.SHOP_ITEM_STATUS.OWNED:this.spItemBg.spriteFrame=this.sfWhite,this.spHatIcon.node.active=!0,this.ndLock.active=!1,this.ndSelect.active=!1,this.ndTick.active=!1,u.setSpriteFrame(e,this.spHatIcon,(function(){}));break;case o.SHOP_ITEM_STATUS.EQUIPMENT:this.spItemBg.spriteFrame=this.sfWhite,this.spHatIcon.node.active=!0,this.ndLock.active=!1,this.ndSelect.active=!0,this.ndTick.active=!0,u.setSpriteFrame(e,this.spHatIcon,(function(){}))}},a.onHatItemClick=function(){this._status===o.SHOP_ITEM_STATUS.OWNED&&(h.instance.playSound(o.AUDIO_SOUND.CLICK),f.vibrateShort(),c.dispatchEvent(o.EVENT_TYPE.HIDE_HAT_EQUIPMENT),this._obj.status=o.SHOP_ITEM_STATUS.EQUIPMENT,l.instance.updateHatStatus(this._obj),this.init(this._itemInfo),c.dispatchEvent(o.EVENT_TYPE.EQUIPMENT_HAT))},a._hideHatEquipment=function(){this._status===o.SHOP_ITEM_STATUS.EQUIPMENT&&(this._obj.status=o.SHOP_ITEM_STATUS.OWNED,l.instance.updateHatStatus(this._obj),this.init(this._itemInfo))},a._refreshHatItem=function(t){t.ID===this._obj.ID&&(this._obj.status=t.status,this.init(this._itemInfo))},n}(s)).prototype,"spItemBg",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=z(v.prototype,"sfWhite",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=z(v.prototype,"sfGray",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=z(v.prototype,"ndLock",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=z(v.prototype,"ndTick",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=z(v.prototype,"ndSelect",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=z(v.prototype,"spHatIcon",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=v))||S));e._RF.pop()}}}));

System.register("chunks:///_virtual/poolManager.ts",["cc"],(function(t){"use strict";var e,n,o,i;return{setters:[function(t){e=t.cclegacy,n=t._decorator,o=t.instantiate,i=t.NodePool}],execute:function(){var r,a,c;function l(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}e._RF.push({},"e4ab6T5/1VCqK/Vn+UcADNM","poolManager",void 0);var u=n.ccclass;n.property,t("poolManager",u("poolManager")((c=a=function(){function t(){s(this,"dictPool",{}),s(this,"dictPrefab",{})}var e,n,r,a=t.prototype;return a.getNode=function(t,e){var n=t.name;t.position||(n=t.data.name),this.dictPrefab[n]=t;var r=null;if(this.dictPool.hasOwnProperty(n)){var a=this.dictPool[n];r=a.size()>0?a.get():o(t)}else{var c=new i;this.dictPool[n]=c,r=o(t)}return r.parent=e,r.active=!0,r},a.putNode=function(t){if(t){var e=t.name,n=null;this.dictPool.hasOwnProperty(e)?n=this.dictPool[e]:(n=new i,this.dictPool[e]=n),n.put(t)}},a.clearPool=function(t){this.dictPool.hasOwnProperty(t)&&this.dictPool[t].clear()},e=t,r=[{key:"instance",get:function(){return this._instance||(this._instance=new t),this._instance}}],(n=null)&&l(e.prototype,n),r&&l(e,r),t}(),s(a,"_instance",void 0),r=c))||r);e._RF.pop()}}}));

System.register("chunks:///_virtual/clientEvent.ts",["cc","./oneToMultiListener.ts"],(function(t){"use strict";var e,r,n;return{setters:[function(t){e=t.cclegacy,r=t._decorator},function(t){n=t.oneToMultiListener}],execute:function(){var c,o,i;e._RF.push({},"e55dbzBNn1NUrh8r5zusvCZ","clientEvent",void 0);var u,s,a,l=r.ccclass;r.property,t("clientEvent",l("clientEvent")((i=o=function(t){var e,r;function n(){return t.apply(this,arguments)||this}return r=t,(e=n).prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r,n}(n),a={},(s="handlers")in(u=o)?Object.defineProperty(u,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):u[s]=a,c=i))||c);e._RF.pop()}}}));

System.register("chunks:///_virtual/playerData.ts",["cc","./constant.ts","./localConfig.ts","./storageManager.ts"],(function(t){"use strict";var e,n,a,s,i,r;return{setters:[function(t){e=t.cclegacy,n=t._decorator,a=t.Component},function(t){s=t.constant},function(t){i=t.localConfig},function(t){r=t.StorageManager}],execute:function(){var o,c,h;function l(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function u(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function f(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}e._RF.push({},"e5927B2lO9C6o5eLg2NmcKB","playerData",void 0);var S=n.ccclass;n.property,t("playerData",S("playerData")((h=c=function(t){var e,n;function a(){for(var e,n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return f(u(e=t.call.apply(t,[this].concat(a))||this),"serverTime",0),f(u(e),"localTime",0),f(u(e),"showCar",0),f(u(e),"isComeFromBalance",!1),f(u(e),"userId",""),f(u(e),"playerInfo",null),f(u(e),"history",null),f(u(e),"settings",null),f(u(e),"isNewBee",!1),f(u(e),"dataVersion",""),f(u(e),"isLoadFinished",!1),f(u(e),"isUnlockAllSkin",!1),e}n=t,(e=a).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n;var o,c,h,S=a.prototype;return S.loadGlobalCache=function(){var t=r.instance.getUserId();t&&(this.userId=t)},S.loadFromCache=function(){this.playerInfo=this.loadDataByKey(s.LOCAL_CACHE.PLAYER),this.history=this.loadDataByKey(s.LOCAL_CACHE.HISTORY),this.settings=this.loadDataByKey(s.LOCAL_CACHE.SETTINGS)},S.loadDataByKey=function(t){var e={},n=r.instance.getConfigData(t);if(n)try{e=JSON.parse(n)}catch(t){e={}}return e},S.createPlayerInfo=function(t){if(this.playerInfo={diamond:0,key:0,level:1,createDate:new Date,hat:[],shoes:[],handPowerLevel:1,kickPowerLevel:1},this.isNewBee=!0,t)for(var e in t)this.playerInfo[e]=t[e];this.savePlayerInfoToLocalCache()},S.generateRandomAccount=function(){this.userId=""+Date.now()+10,r.instance.setUserId(this.userId)},S.saveAccount=function(t){this.userId=t,r.instance.setUserId(t)},S.savePlayerInfoToLocalCache=function(){r.instance.setConfigData(s.LOCAL_CACHE.PLAYER,JSON.stringify(this.playerInfo))},S.saveSettingsToLocalCache=function(){r.instance.setConfigData(s.LOCAL_CACHE.SETTINGS,JSON.stringify(this.settings))},S.saveAll=function(){r.instance.setConfigDataWithoutSave(s.LOCAL_CACHE.PLAYER,JSON.stringify(this.playerInfo)),r.instance.setConfigDataWithoutSave(s.LOCAL_CACHE.HISTORY,JSON.stringify(this.history)),r.instance.setConfigDataWithoutSave(s.LOCAL_CACHE.SETTINGS,JSON.stringify(this.settings)),r.instance.setConfigData(s.LOCAL_CACHE.DATA_VERSION,this.dataVersion)},S.updatePlayerInfo=function(t,e){var n=!1;this.playerInfo.hasOwnProperty(t)&&("number"==typeof e?(n=!0,this.playerInfo[t]+=e,this.playerInfo[t]<0&&(this.playerInfo[t]=0)):"boolean"!=typeof e&&"string"!=typeof e||(n=!0,this.playerInfo[t]=e)),n&&r.instance.setConfigData(s.LOCAL_CACHE.PLAYER,JSON.stringify(this.playerInfo))},S.updateHatStatus=function(t){var e=this;this.playerInfo.hat.forEach((function(n){n.ID===t.ID?(n.status=t.status,e.savePlayerInfoToLocalCache()):t.status===s.SHOP_ITEM_STATUS.EQUIPMENT&&n.status===s.SHOP_ITEM_STATUS.EQUIPMENT&&(n.status=s.SHOP_ITEM_STATUS.OWNED,e.savePlayerInfoToLocalCache())}))},S.getHatStatus=function(t){var e,n=this.playerInfo.hat.filter((function(e){return e.ID===t}));return n[0]?e={ID:t,status:n[0].status}:(e={ID:t,status:s.SHOP_ITEM_STATUS.LOCK},this.playerInfo.hat.push(e)),e},S.updateShoesStatus=function(t){var e=this;this.playerInfo.shoes.forEach((function(n){n.ID===t.ID&&(n.status=t.status,n.watchTimes=t.watchTimes,e.savePlayerInfoToLocalCache())}))},S.getShoesStatus=function(t){var e,n=this.playerInfo.shoes.filter((function(e){return e.ID===t}));return n[0]?e={ID:t,status:n[0].status,watchTimes:n[0].watchTimes}:(e={ID:t,status:s.SHOP_ITEM_STATUS.LOCK,watchTimes:0},this.playerInfo.shoes.push(e)),e},S.getSetting=function(t){return this.settings&&this.settings.hasOwnProperty(t)?this.settings[t]:null},S.setSetting=function(t,e){this.settings||(this.settings={}),this.settings[t]=e,this.saveSettingsToLocalCache()},S.getBestRewardBox=function(){var t={type:s.REWARD_TYPE.DIAMOND,num:500,obj:{}},e=this.playerInfo.hat.filter((function(t){var e=i.instance.queryByID("shop",t.ID);return t.status===s.SHOP_ITEM_STATUS.LOCK&&(e.chanel===s.SKIN_HAT_CHANEL.BOX||e.chanel===s.SKIN_HAT_CHANEL.BOX_SETTLEMENT)}));if(e.length){var n=e[Math.floor(Math.random()*e.length)];if(0===Object.keys(n).length)return t;t.type=s.REWARD_TYPE.SKIN,t.obj=n}return t},S.refreshSkinStatus=function(){var t=this;i.instance.getTableArr("shop").forEach((function(e){e.type==s.SKIN_TYPE.HAT?t.getHatStatus(e.ID):e.type===s.SKIN_TYPE.SHOES&&t.getShoesStatus(e.ID)})),this.getSetting(s.SETTINGS_KEY.LEVEL_HAT_PROGRESS)||this.refreshHatProgress()},S.refreshHatProgress=function(){var t,e=this,n=this.getSetting(s.SETTINGS_KEY.LEVEL_HAT_PROGRESS),a=function(){(t=e.getArrHatUnlockByLevel()).length&&(n={ID:t[0].ID,progress:0},e.setSetting(s.SETTINGS_KEY.LEVEL_HAT_PROGRESS,n))};n?n.progress>=100?a():this.setSetting(s.SETTINGS_KEY.LEVEL_HAT_PROGRESS,{ID:n.ID,progress:n.progress}):a()},S.getArrHatUnlockByLevel=function(){return this.playerInfo.hat.filter((function(t){var e=i.instance.queryByID("shop",t.ID);return t.status===s.SHOP_ITEM_STATUS.LOCK&&e.chanel===s.SKIN_HAT_CHANEL.LEVEL}))},S.isLevelHatUnlockOver=function(){var t=this.getArrHatUnlockByLevel(),e=this.getSetting(s.SETTINGS_KEY.LEVEL_HAT_PROGRESS);return t.length<=0&&e.progress>=100},S.getArrHatUnlockByBox=function(){return this.playerInfo.hat.filter((function(t){var e=i.instance.queryByID("shop",t.ID);return t.status===s.SHOP_ITEM_STATUS.LOCK&&(e.chanel===s.SKIN_HAT_CHANEL.BOX||e.chanel===s.SKIN_HAT_CHANEL.BOX_SETTLEMENT)}))},S.isBoxHatUnlockOver=function(){return this.getArrHatUnlockByBox().length<=0},S.getFightTimes=function(){var t=this.getSetting(s.SETTINGS_KEY.FIGHT_TIMES);return t||(t=0,this.setSetting(s.SETTINGS_KEY.FIGHT_TIMES,0)),t},S.addFightTimes=function(t){var e=this.getFightTimes();e+=1,this.setSetting(s.SETTINGS_KEY.FIGHT_TIMES,e)},S.updateHandPowerLevel=function(t){t>this.playerInfo.handPowerLevel&&(this.playerInfo.handPowerLevel=t,this.savePlayerInfoToLocalCache())},S.updateKickPowerLevel=function(t){t>this.playerInfo.kickPowerLevel&&(this.playerInfo.kickPowerLevel=t,this.savePlayerInfoToLocalCache())},S.clear=function(){this.playerInfo={},this.settings={},this.saveAll()},o=a,h=[{key:"instance",get:function(){return this._instance||(this._instance=new a),this._instance}}],(c=null)&&l(o.prototype,c),h&&l(o,h),a}(a),f(c,"_instance",void 0),o=h))||o);e._RF.pop()}}}));

System.register("chunks:///_virtual/uiManager.ts",["cc","./constant.ts","./resourceUtil.ts","./poolManager.ts","./tips.ts","./fightTip.ts"],(function(i){"use strict";var t,e,n,o,a,r,s,p,c,h,u;return{setters:[function(i){t=i.cclegacy,e=i._decorator,n=i.isValid,o=i.find,a=i.Vec3,r=i.UITransformComponent},function(i){s=i.constant},function(i){p=i.resourceUtil},function(i){c=i.poolManager},function(i){h=i.tips},function(i){u=i.FightTip}],execute:function(){var l,f,g;function d(i,t){for(var e=0;e<t.length;e++){var n=t[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(i,n.key,n)}}function P(i,t,e){return t in i?Object.defineProperty(i,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):i[t]=e,i}t._RF.push({},"f9384FYDp5GqoW+CtrCla3U","uiManager",void 0);var v=e.ccclass;e.property,i("uiManager",v("uiManager")((g=f=function(){function i(){P(this,"dictSharedPanel",{}),P(this,"dictLoading",{}),P(this,"arrPopupDialog",[]),P(this,"showTipsTime",0)}var t,e,l,f=i.prototype;return f.isDialogVisible=function(i){if(!this.dictSharedPanel.hasOwnProperty(i))return!1;var t=this.dictSharedPanel[i];return n(t)&&t.active&&t.parent},f.showDialog=function(i,t,e){var a=this;if(!this.dictLoading[i]){var r=i.lastIndexOf("/"),s=i.slice(r+1);if(t||(t=[]),this.dictSharedPanel.hasOwnProperty(i)){var c=this.dictSharedPanel[i];if(n(c)){c.parent=o("Canvas"),c.active=!0;var h=c.getComponent(s),u=c.getComponent(s.charAt(0).toUpperCase()+s.slice(1));if(h&&h.show)h.show.apply(h,t),e&&e(h);else{if(!u||!u.show)throw"查找不到脚本文件"+s;u.show.apply(u,t),e&&e(u)}return}}this.dictLoading[i]=!0,p.createUI(i,(function(n,o){var r=!1;if(a.dictLoading[i]||(r=!0),a.dictLoading[i]=!1,n)console.error(n);else{a.dictSharedPanel[i]=o;var p=o.getComponent(s),c=o.getComponent(s.charAt(0).toUpperCase()+s.slice(1));if(p&&p.show)p.show.apply(p,t),e&&e(p);else{if(!c||!c.show)throw"查找不到脚本文件"+s;c.show.apply(c,t),e&&e(c)}r&&a.hideDialog(i)}}))}},f.hideDialog=function(i,t){if(this.dictSharedPanel.hasOwnProperty(i)){var e=this.dictSharedPanel[i];if(e&&n(e)){var o=e.getComponent("animationUI");o?o.close((function(){e.parent=null,t&&"function"==typeof t&&t()})):(e.parent=null,t&&"function"==typeof t&&t())}else t&&"function"==typeof t&&t()}this.dictLoading[i]=!1},f.pushToPopupSeq=function(i,t,e){var n={panelPath:i,scriptName:t,param:e,isShow:!1};this.arrPopupDialog.push(n),this.checkPopupSeq()},f.insertToPopupSeq=function(i,t,e){var n={panelPath:t,param:e,isShow:!1};this.arrPopupDialog.splice(i,0,n)},f.shiftFromPopupSeq=function(i){var t=this;this.hideDialog(i,(function(){t.arrPopupDialog[0]&&t.arrPopupDialog[0].panelPath===i&&(t.arrPopupDialog.shift(),t.checkPopupSeq())}))},f.checkPopupSeq=function(){if(this.arrPopupDialog.length>0){var i=this.arrPopupDialog[0];i.isShow||(this.showDialog(i.panelPath,i.param),this.arrPopupDialog[0].isShow=!0)}},f.showTips=function(i,t,e,n,o){var r=this;void 0===t&&(t="txt"),void 0===e&&(e=new a),void 0===n&&(n=1),void 0===o&&(o=function(){});var s=String(i),p=function(){r._showTipsAni(s,t,e,n,o)},c=Date.now();if(c-this.showTipsTime<800&&"gold"!==t&&"heart"!==t){var h=800-(c-this.showTipsTime);setTimeout((function(){p()}),h),this.showTipsTime=c+h}else p(),this.showTipsTime=c},f._showTipsAni=function(i,t,e,n,a){p.getUIPrefabRes("common/tips",(function(p,u){if(!p){var l=c.instance.getNode(u,o("Canvas"));t===s.TIP_TYPE.GOLD||t===s.TIP_TYPE.HEART?l.getComponent(r).priority=s.ZORDER.NORMAL:(t=s.TIP_TYPE.TXT)&&(l.getComponent(r).priority=s.ZORDER.TIPS),l.getComponent(h).show(i,t,e,n,a)}}))},f.showFightTips=function(i,t,e,n){p.getUIPrefabRes("common/fightTip",(function(a,p){if(!a){var h=c.instance.getNode(p,o("Canvas"));h.setPosition(e);var l=h.getComponent(r);i===s.FIGHT_TIP_INDEX.SCORE_ADD?l.priority=s.ZORDER.TIPS:i===s.FIGHT_TIP_INDEX.SCORE_MINUS&&(l.priority=s.ZORDER.TIPS_1),h.getComponent(u).show(i,t,n)}}))},t=i,l=[{key:"instance",get:function(){return this._instance||(this._instance=new i),this._instance}}],(e=null)&&d(t.prototype,e),l&&d(t,l),i}(),P(f,"_instance",void 0),l=g))||l);t._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./constant.ts","./oneToMultiListener.ts","./clientEvent.ts","./util.ts","./resourceUtil.ts","./csvManager.ts","./localConfig.ts","./storageManager.ts","./playerData.ts","./poolManager.ts","./gameCamera.ts","./audioManager.ts","./tips.ts","./fightTip.ts","./uiManager.ts","./gameLogic.ts","./diamond.ts","./flyReward.ts","./effectManager.ts","./boss.ts","./manModel.ts","./enemy.ts","./fightMap.ts","./colliderItem.ts","./player.ts","./gameManager.ts","./playerRigid.ts","./verticalRaycast.ts","./debugLevelItem.ts","./settlementSuccessPanel.ts","./debugPanel.ts","./playerRigidController.ts","./eventListener.ts","./batchUtil.ts","./migrate-canvas.ts","./shoesItem.ts","./boxItem.ts","./settlementFailPanel.ts","./homePanel.ts","./parkourPanel.ts","./invinciblePanel.ts","./settingPanel.ts","./skinPanel.ts","./loadingPanel.ts","./hatItem.ts","./shopPanel.ts","./main.ts","./lodash.ts","./camera.ts","./boxPanel.ts","./cocosAnalytics.min.mjs_cjs=&original=.js","./lz-string.min.mjs_cjs=&original=.js"],(function(){"use strict";return{setters:[function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){}],execute:function(){}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});